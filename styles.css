/* ========================================
   TF2 MANN CO. FORGE - STYLES
   Tema Industrial Dark inspirado en TF2
   ======================================== */

/* ===== VARIABLES CSS ===== */
:root {
    /* Colores principales */
    --bg-main: #1B1B1B;
    --bg-card: #2a2a2a;
    --bg-card-hover: #333333;
    --bg-input: #1f1f1f;
    --text-main: #F5F5F5;
    --text-secondary: #b0b0b0;
    --text-muted: #7E7E7E;
    
    /* Colores de acento */
    --accent-red: #FF4040;
    --accent-blu: #0066FF;
    --accent-orange: #FF8C00;
    --accent-green: #4CAF50;
    
    /* Bordes */
    --border-inactive: #7E7E7E;
    --border-active: #F5F5F5;
    
    /* Tiers */
    --god-tier: #FFD700;
    --high-tier: #FF69B4;
    --mid-tier: #9370DB;
    
    /* Colores de estado */
    --status-ready: #4CAF50;
    --status-pending: #FF8C00;
    --status-error: #FF4040;
    
    /* Sombras */
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.5);
    
    /* Transiciones */
    --transition-fast: 0.15s ease;
    --transition-normal: 0.25s ease;
    
    /* Espaciado */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    
    /* Bordes */
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 12px;
}

/* ===== RESET Y BASE ===== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Roboto', 'Segoe UI', sans-serif;
    background-color: var(--bg-main);
    color: var(--text-main);
    min-height: 100vh;
    line-height: 1.5;
}

/* ===== HEADER ===== */
.main-header {
    background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
    padding: var(--spacing-md) var(--spacing-xl);
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 3px solid var(--accent-red);
    box-shadow: var(--shadow-md);
}

.logo {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
}

.logo-icon {
    font-size: 2.5rem;
    animation: spin 10s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* ===== ESTILOS GLOBALES DE SELECT Y OPTION ===== */
select {
    background-color: var(--bg-input);
    color: var(--text-main);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
    font-family: inherit;
    cursor: pointer;
}

select:focus {
    outline: none;
    border-color: var(--accent-orange);
}

/* Estilos para las opciones del dropdown */
select option {
    background-color: #2a2a2a;
    color: #F5F5F5;
    padding: 8px;
}

select option:hover,
select option:focus,
select option:checked {
    background-color: #3a3a3a;
    color: #FF8C00;
}

/* Para navegadores Webkit (Chrome, Edge, Safari) */
select::-webkit-scrollbar {
    width: 8px;
}

select::-webkit-scrollbar-track {
    background: #1f1f1f;
}

select::-webkit-scrollbar-thumb {
    background: #555;
    border-radius: 4px;
}

select::-webkit-scrollbar-thumb:hover {
    background: #777;
}

.logo h1 {
    font-family: 'Russo One', sans-serif;
    font-size: 1.8rem;
    color: var(--text-main);
    text-transform: uppercase;
    letter-spacing: 2px;
}

.logo .highlight {
    color: var(--accent-red);
    text-shadow: 0 0 10px rgba(255, 64, 64, 0.5);
}

.header-stats {
    display: flex;
    gap: var(--spacing-md);
}

.stat-badge {
    background: var(--bg-card);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-md);
    border: 2px solid var(--god-tier);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.stat-label {
    color: var(--text-secondary);
    font-size: 0.85rem;
}

.stat-value {
    color: var(--god-tier);
    font-weight: 700;
    font-size: 1.1rem;
}

/* ===== NAVEGACIÓN POR TABS ===== */
.tab-navigation {
    background: var(--bg-card);
    display: flex;
    padding: var(--spacing-sm) var(--spacing-xl);
    gap: var(--spacing-sm);
    border-bottom: 1px solid var(--border-inactive);
}

.tab-btn {
    background: transparent;
    border: none;
    color: var(--text-secondary);
    padding: var(--spacing-md) var(--spacing-lg);
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all var(--transition-normal);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    text-transform: uppercase;
    letter-spacing: 1px;
}

.tab-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-main);
}

.tab-btn.active {
    background: var(--accent-red);
    color: white;
    box-shadow: var(--shadow-sm);
}

.tab-icon {
    font-size: 1.2rem;
}

/* ===== CONTENEDOR PRINCIPAL ===== */
.main-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: var(--spacing-xl);
    min-height: calc(100vh - 200px);
}

.tab-content {
    display: none;
    animation: fadeIn 0.3s ease;
}

.tab-content.active {
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* ===== BANNER DE ALERTAS ===== */
.alert-banner {
    background: linear-gradient(90deg, var(--accent-orange) 0%, #e67e00 100%);
    color: white;
    padding: var(--spacing-md) var(--spacing-lg);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    box-shadow: var(--shadow-md);
    animation: slideDown 0.5s ease;
}

@keyframes slideDown {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

.alert-banner.hidden {
    display: none;
}

.alert-icon {
    font-size: 1.5rem;
}

.alert-text {
    flex: 1;
    font-weight: 500;
}

.alert-close {
    background: rgba(0, 0, 0, 0.2);
    border: none;
    color: white;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1rem;
    transition: background var(--transition-fast);
}

.alert-close:hover {
    background: rgba(0, 0, 0, 0.4);
}

/* ===== SECCIONES ===== */
.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-lg);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--border-inactive);
}

.section-header h2 {
    font-family: 'Russo One', sans-serif;
    font-size: 1.4rem;
    color: var(--text-main);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.section-subtitle {
    font-size: 1.1rem;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-sm);
    border-left: 3px solid var(--accent-blu);
}

/* ===== DASHBOARD GRID ===== */
.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--spacing-lg);
    margin-bottom: var(--spacing-xl);
}

/* ===== TARJETAS RESUMEN ===== */
.summary-card {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
    box-shadow: var(--shadow-md);
    border: 1px solid var(--border-inactive);
    transition: transform var(--transition-normal), box-shadow var(--transition-normal);
}

.summary-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.card-header {
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--border-inactive);
}

.card-header h3 {
    font-size: 1.1rem;
    color: var(--text-main);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

/* Currency Display */
.currency-display {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.currency-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-sm);
    background: var(--bg-input);
    border-radius: var(--radius-sm);
}

.currency-icon {
    font-size: 1.2rem;
    width: 40px;
    height: 40px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-main);
    border-radius: var(--radius-sm);
    overflow: hidden;
}

.currency-icon img {
    width: 32px;
    height: 32px;
    object-fit: contain;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.5));
}

.currency-icon.scrap { border: 1px solid #8B4513; }
.currency-icon.rec { border: 1px solid #708090; }
.currency-icon.ref { border: 1px solid var(--god-tier); }
.currency-icon.key { border: 1px solid var(--god-tier); }

.currency-name {
    flex: 1;
    color: var(--text-secondary);
}

.currency-count {
    font-weight: 700;
    font-size: 1.2rem;
    color: var(--text-main);
    min-width: 40px;
    text-align: right;
}

/* Projects Summary */
.projects-summary {
    display: flex;
    justify-content: space-around;
    text-align: center;
}

.project-stat {
    padding: var(--spacing-md);
}

.project-count {
    display: block;
    font-size: 2rem;
    font-weight: 900;
    color: var(--accent-blu);
}

.project-stat.ready .project-count {
    color: var(--status-ready);
}

.project-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* ===== ROBOT PARTS GRID ===== */
.robot-parts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: var(--spacing-md);
}

.part-card {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    border: 1px solid var(--border-inactive);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    transition: all var(--transition-normal);
}

.part-card:hover {
    border-color: var(--accent-blu);
    background: var(--bg-card-hover);
    transform: translateY(-2px);
}

/* Header - Nombre */
.part-card .part-header {
    width: 100%;
    text-align: center;
    padding-bottom: var(--spacing-xs);
    border-bottom: 1px solid var(--border-inactive);
}

.part-card .part-name {
    font-weight: 600;
    font-size: 0.85rem;
    color: var(--text-main);
}

/* Body - Imagen (3/4) + Contador (1/4) */
.part-card .part-body {
    display: flex;
    align-items: center;
    width: 100%;
    gap: var(--spacing-sm);
}

.part-card .part-image {
    flex: 3;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 60px;
}

.part-card .part-image img {
    width: 52px;
    height: 52px;
    object-fit: contain;
}

.part-card .part-count-wrapper {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
}

.part-card .part-count {
    font-size: 1.8rem;
    font-weight: 900;
    color: var(--accent-blu);
    text-align: center;
}

.part-card .part-count.zero {
    color: var(--text-muted);
    font-size: 1.4rem;
}

/* Footer - Categoría */
.part-card .part-footer {
    width: 100%;
    text-align: center;
    padding-top: var(--spacing-xs);
    border-top: 1px solid var(--border-inactive);
}

.part-card .part-tier {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
}

/* Legacy styles - mantener compatibilidad */
.part-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

/* ============================================
   DASHBOARD PARTS - Tarjetas verticales
   ============================================ */

.part-card.dashboard-card {
    display: flex;
    flex-direction: column;
    padding: var(--spacing-sm);
    gap: 0;
}

/* Header - Nombre corto arriba */
.part-card.dashboard-card .dash-card-header {
    width: 100%;
    padding: var(--spacing-xs) var(--spacing-sm);
    border-bottom: 1px solid var(--border-inactive);
    text-align: center;
}

.part-card.dashboard-card .dash-card-name {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-main);
    line-height: 1.2;
}

/* Body - Imagen (75%) + Contador (25%) lado a lado */
.part-card.dashboard-card .dash-card-body {
    display: flex;
    flex-direction: row;
    align-items: center;
    width: 100%;
    padding: var(--spacing-sm) 0;
}

.part-card.dashboard-card .dash-card-image {
    flex: 3;
    display: flex;
    justify-content: center;
    align-items: center;
    border-right: 1px solid var(--border-inactive);
    padding: var(--spacing-xs);
}

.part-card.dashboard-card .dash-card-image img {
    width: 56px;
    height: 56px;
    object-fit: contain;
}

.part-card.dashboard-card .dash-card-counter {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: var(--spacing-xs);
}

.part-card.dashboard-card .dash-count {
    font-size: 1.8rem;
    font-weight: 900;
    color: var(--accent-blu);
}

.part-card.dashboard-card .dash-count.zero {
    color: var(--text-muted);
    font-size: 1.5rem;
}

/* Footer - Categoría con color abajo */
.part-card.dashboard-card .dash-card-footer {
    width: 100%;
    padding: var(--spacing-xs) var(--spacing-sm);
    border-top: 1px solid var(--border-inactive);
    text-align: center;
}

.part-card.dashboard-card .dash-card-category {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
}

/* ===== BACKPACK SECTION ===== */
.backpack-section {
    margin-bottom: var(--spacing-xl);
}

.backpack-section.hidden {
    display: none;
}

/* Filter Buttons */
.filter-buttons {
    display: flex;
    gap: var(--spacing-sm);
}

.filter-btn {
    background: var(--bg-input);
    border: 1px solid var(--border-inactive);
    color: var(--text-secondary);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-weight: 600;
    transition: all var(--transition-fast);
}

.filter-btn:hover {
    border-color: var(--text-main);
    color: var(--text-main);
}

.filter-btn.active {
    background: var(--accent-blu);
    border-color: var(--accent-blu);
    color: white;
}

/* Stock Grid */
.stock-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--spacing-md);
}

.stock-item {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    border: 1px solid var(--border-inactive);
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    transition: all var(--transition-normal);
}

.stock-item:hover {
    border-color: var(--accent-blu);
    box-shadow: var(--shadow-sm);
}

.stock-icon {
    font-size: 2rem;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-input);
    border-radius: var(--radius-sm);
}

.stock-info {
    flex: 1;
}

.stock-name {
    font-weight: 600;
    color: var(--text-main);
    margin-bottom: 2px;
}

.stock-category {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
}

.stock-controls {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.stock-btn {
    width: 36px;
    height: 36px;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 1.2rem;
    font-weight: 700;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.stock-btn.minus {
    background: var(--accent-red);
    color: white;
}

.stock-btn.minus:hover {
    background: #ff5555;
}

.stock-btn.plus {
    background: var(--accent-blu);
    color: white;
}

.stock-btn.plus:hover {
    background: #3385ff;
}

.stock-count {
    font-size: 1.4rem;
    font-weight: 900;
    min-width: 50px;
    text-align: center;
    color: var(--text-main);
}

/* ===== ECONOMÍA REAL ===== */
.real-economy-section {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
}

.economy-config-card,
.economy-card {
    background: var(--bg-card);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-md);
    overflow: hidden;
}

.economy-config-card {
    border-left: 4px solid var(--accent-blu);
}

.config-header,
.card-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-inactive);
}

.config-icon,
.card-icon {
    font-size: 1.3rem;
}

.card-icon-img {
    width: 24px;
    height: 24px;
}

.config-header h4,
.card-header h4 {
    margin: 0;
    font-size: 1rem;
    flex: 1;
}

.config-body,
.card-body {
    padding: var(--spacing-md);
}

.config-row {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.config-row:last-child {
    margin-bottom: 0;
}

.config-row label {
    min-width: 150px;
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.config-row select,
.config-row input {
    flex: 1;
    min-width: 150px;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-sm);
    color: var(--text-main);
    font-size: 0.9rem;
}

.config-row select:focus,
.config-row input:focus {
    outline: none;
    border-color: var(--accent-gold);
}

.rate-hint {
    font-size: 0.75rem;
    color: var(--text-muted);
    width: 100%;
    margin-top: 4px;
}

/* Steam Wallet Card */
.steam-wallet-card {
    border-left: 4px solid #1b2838;
}

.wallet-input-group {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.wallet-input-group label {
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.wallet-input-group input {
    flex: 1;
    max-width: 150px;
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-sm);
    color: var(--text-main);
    font-size: 1.1rem;
    font-weight: 700;
    text-align: right;
}

.wallet-input-group input:focus {
    outline: none;
    border-color: var(--accent-gold);
}

.wallet-conversions,
.key-conversions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: var(--spacing-sm);
}

.conversion-display {
    background: var(--bg-tertiary);
    padding: var(--spacing-sm);
    border-radius: var(--radius-sm);
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.conv-label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.conv-value {
    font-size: 1rem;
    font-weight: 700;
    color: var(--accent-gold);
}

/* Key Prices Container */
.key-prices-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-md);
}

.key-price-card.community {
    border-left: 4px solid var(--accent-blu);
}

.key-price-card.mannco {
    border-left: 4px solid var(--accent-red);
}

.price-badge {
    padding: 2px 8px;
    border-radius: var(--radius-xs);
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
}

.price-badge.fluctuates {
    background: rgba(255, 152, 0, 0.2);
    color: #FF9800;
}

.price-badge.stable {
    background: rgba(76, 175, 80, 0.2);
    color: var(--status-ready);
}

.key-input-group {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.key-input-group label {
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.key-input-group input {
    width: 100px;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-sm);
    color: var(--text-main);
    font-size: 1rem;
    font-weight: 700;
    text-align: center;
}

.key-input-group input:focus {
    outline: none;
    border-color: var(--accent-gold);
}

.price-note {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-top: var(--spacing-sm);
    padding-top: var(--spacing-sm);
    border-top: 1px solid var(--border-inactive);
}

/* Comparison Card */
.comparison-card {
    border-left: 4px solid var(--accent-gold);
}

.comparison-result {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.comparison-similar,
.comparison-mannco,
.comparison-community {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    border-radius: var(--radius-sm);
}

.comparison-similar {
    background: rgba(100, 100, 100, 0.1);
    border-left: 3px solid var(--text-muted);
}

.comparison-mannco {
    background: rgba(255, 64, 64, 0.1);
    border-left: 3px solid var(--accent-red);
}

.comparison-community {
    background: rgba(40, 98, 200, 0.1);
    border-left: 3px solid var(--accent-blu);
}

.comp-icon {
    font-size: 2rem;
    flex-shrink: 0;
}

.comp-text strong {
    display: block;
    font-size: 1.1rem;
    margin-bottom: var(--spacing-xs);
}

.comp-text p {
    margin: 0;
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.comp-detail {
    font-size: 0.8rem !important;
    color: var(--text-muted) !important;
    margin-top: var(--spacing-xs) !important;
}

.wallet-info {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: rgba(255, 215, 0, 0.1);
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--accent-gold);
}

.wallet-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
}

.wallet-text strong {
    display: block;
    margin-bottom: var(--spacing-xs);
}

.wallet-text p {
    margin: 0;
    font-size: 0.9rem;
}

.wallet-leftover {
    font-size: 0.8rem !important;
    color: var(--text-muted) !important;
    margin-top: 4px !important;
}

/* Mann Co. Store Card */
.mannco-store-card {
    border-left: 4px solid var(--accent-red);
}

.mannco-note {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: rgba(255, 152, 0, 0.1);
    border-radius: var(--radius-sm);
    margin-bottom: var(--spacing-md);
    font-size: 0.85rem;
}

.mannco-note span {
    font-size: 1.2rem;
}

.mannco-note p {
    margin: 0;
    color: var(--text-secondary);
}

/* Community Stores Section */
.community-stores-section {
    margin-top: var(--spacing-md);
}

.community-stores-section .section-subtitle {
    margin-bottom: var(--spacing-xs);
}

.stores-hint {
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-md);
}

.stores-key-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-md);
}

.store-key-card {
    background: var(--bg-card);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-md);
    overflow: hidden;
    transition: all var(--transition-fast);
}

.store-key-card:hover {
    border-color: var(--accent-gold);
}

.store-key-card.steam-market {
    border-left: 4px solid #1b2838;
}

.store-key-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-inactive);
}

.store-emoji {
    font-size: 1.5rem;
}

.store-key-info {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.store-key-info h4 {
    margin: 0;
    font-size: 1rem;
}

.store-currency-badge {
    padding: 2px 8px;
    background: var(--bg-secondary);
    border-radius: var(--radius-xs);
    font-size: 0.7rem;
    font-weight: 700;
    color: var(--text-secondary);
}

.store-currency-badge.usd {
    background: rgba(76, 175, 80, 0.2);
    color: var(--status-ready);
}

.store-currency-badge.local {
    background: rgba(255, 215, 0, 0.2);
    color: var(--accent-gold);
}

.store-key-prices {
    padding: var(--spacing-md);
}

.price-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
}

.price-row:last-child {
    margin-bottom: 0;
}

.price-row label {
    min-width: 100px;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.price-row input {
    width: 80px;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-xs);
    color: var(--text-main);
    font-size: 0.9rem;
    text-align: right;
}

.price-row input:focus {
    outline: none;
    border-color: var(--accent-gold);
}

.price-row.buy input {
    border-left: 3px solid var(--accent-red);
}

.price-row.sell input {
    border-left: 3px solid var(--status-ready);
}

.price-row.disabled input {
    background: var(--bg-secondary);
    color: var(--text-muted);
    cursor: not-allowed;
}

.currency-label {
    font-size: 0.8rem;
    color: var(--text-muted);
    min-width: 30px;
}

.store-key-converted {
    padding: 0 var(--spacing-md) var(--spacing-md);
}

.converted-prices {
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
}

.conv-row {
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
    padding: 2px 0;
}

.conv-type {
    color: var(--text-muted);
}

.conv-values {
    color: var(--text-secondary);
}

.store-note {
    font-size: 0.75rem;
    color: var(--text-muted);
    padding: 0 var(--spacing-md) var(--spacing-sm);
    margin: 0;
}

/* Best Option Section */
.best-option-section {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--spacing-md);
    margin-top: var(--spacing-lg);
}

.best-option-card {
    background: var(--bg-card);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-md);
    overflow: hidden;
}

.best-option-card.buy {
    border-left: 4px solid var(--accent-red);
}

.best-option-card.sell {
    border-left: 4px solid var(--status-ready);
}

.best-option-card .card-header {
    background: var(--bg-tertiary);
}

.best-option-card.buy .card-header {
    border-bottom: 2px solid var(--accent-red);
}

.best-option-card.sell .card-header {
    border-bottom: 2px solid var(--status-ready);
}

.best-option-result {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.best-winner {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: rgba(255, 64, 64, 0.1);
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--accent-red);
}

.best-winner.sell {
    background: rgba(76, 175, 80, 0.1);
    border-left-color: var(--status-ready);
}

.winner-emoji {
    font-size: 2rem;
}

.winner-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.winner-info strong {
    font-size: 1.1rem;
}

.winner-price {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--accent-gold);
}

.winner-ref {
    font-size: 0.85rem;
    color: var(--text-muted);
}

.savings-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm);
    background: rgba(76, 175, 80, 0.1);
    border-radius: var(--radius-sm);
}

.savings-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.savings-amount {
    font-size: 1rem;
    font-weight: 700;
    color: var(--status-ready);
}

.all-options {
    padding-top: var(--spacing-sm);
    border-top: 1px solid var(--border-inactive);
}

.options-label {
    display: block;
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-bottom: var(--spacing-sm);
}

.option-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-xs);
    font-size: 0.85rem;
}

.option-row.best {
    background: rgba(255, 215, 0, 0.1);
    border-radius: var(--radius-xs);
}

.opt-rank {
    width: 25px;
    font-weight: 700;
    color: var(--text-muted);
}

.option-row.best .opt-rank {
    color: var(--accent-gold);
}

.opt-name {
    flex: 1;
}

.opt-price {
    font-weight: 600;
}

.no-options {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    color: var(--text-muted);
    font-size: 0.9rem;
}

.no-options span {
    font-size: 1.5rem;
}

/* Profitability Card */
.profitability-card {
    margin-top: var(--spacing-lg);
    border-left: 4px solid var(--accent-gold);
}

.profitability-content {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.profit-advice {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    border-radius: var(--radius-sm);
}

.profit-advice.positive {
    background: rgba(76, 175, 80, 0.1);
    border-left: 3px solid var(--status-ready);
}

.profit-advice.neutral {
    background: rgba(100, 100, 100, 0.1);
    border-left: 3px solid var(--text-muted);
}

.profit-advice.negative {
    background: rgba(255, 64, 64, 0.1);
    border-left: 3px solid var(--accent-red);
}

.advice-icon {
    font-size: 2rem;
    flex-shrink: 0;
}

.advice-text {
    flex: 1;
}

.advice-text strong {
    display: block;
    font-size: 1.1rem;
    margin-bottom: var(--spacing-xs);
}

.advice-text p {
    margin: 0;
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.profit-detail {
    margin-top: var(--spacing-xs) !important;
    font-weight: 600;
    color: var(--status-ready) !important;
}

.loss-detail {
    margin-top: var(--spacing-xs) !important;
    font-style: italic;
    color: var(--text-muted) !important;
}

.wallet-profit-info {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: rgba(255, 215, 0, 0.1);
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--accent-gold);
}

/* Responsive */
@media (max-width: 768px) {
    .stores-key-grid {
        grid-template-columns: 1fr;
    }
    
    .best-option-section {
        grid-template-columns: 1fr;
    }
    
    .price-row {
        flex-wrap: wrap;
    }
    
    .price-row label {
        width: 100%;
        margin-bottom: 4px;
    }
}

/* Responsive */
@media (max-width: 768px) {
    .key-prices-container {
        grid-template-columns: 1fr;
    }
    
    .config-row {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .config-row select,
    .config-row input {
        width: 100%;
    }
    
    .wallet-input-group {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .wallet-input-group input {
        width: 100%;
        max-width: none;
    }
}

/* ===== LA FORJA ===== */
.forge-layout {
    display: grid;
    grid-template-columns: 400px 1fr;
    gap: var(--spacing-xl);
}

@media (max-width: 900px) {
    .forge-layout {
        grid-template-columns: 1fr;
    }
}

.forge-panel {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    overflow: visible;
    box-shadow: var(--shadow-md);
}

.panel-header {
    background: linear-gradient(135deg, #333 0%, #2a2a2a 100%);
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 2px solid var(--accent-red);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.panel-header h2 {
    font-family: 'Russo One', sans-serif;
    font-size: 1.2rem;
}

.project-counter {
    background: var(--accent-blu);
    color: white;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: 20px;
    font-weight: 700;
    font-size: 0.9rem;
}

/* Form Styles */
.project-form {
    padding: var(--spacing-lg);
}

.form-group {
    margin-bottom: var(--spacing-lg);
}

.form-group label {
    display: block;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-sm);
    text-transform: uppercase;
    font-size: 0.85rem;
    letter-spacing: 1px;
}

.form-group select,
.form-group input {
    width: 100%;
    padding: var(--spacing-md);
    background: var(--bg-input);
    border: 2px solid var(--border-inactive);
    border-radius: var(--radius-sm);
    color: var(--text-main);
    font-size: 1rem;
    transition: border-color var(--transition-fast);
}

.form-group select:focus,
.form-group input:focus {
    outline: none;
    border-color: var(--accent-blu);
}

.form-group select option {
    background: var(--bg-card);
    color: var(--text-main);
}

/* Form Info Box */
.form-info {
    margin-bottom: var(--spacing-lg);
}

.info-box {
    background: var(--bg-input);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-sm);
    padding: var(--spacing-md);
}

.info-box h4 {
    color: var(--accent-blu);
    margin-bottom: var(--spacing-sm);
    font-size: 0.9rem;
}

.info-box p {
    color: var(--text-secondary);
    font-size: 0.9rem;
    line-height: 1.6;
}

/* Kit Info Display */
.info-box .info-placeholder {
    color: var(--text-muted);
    font-style: italic;
}

.kit-info-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--border-inactive);
}

.kit-info-header .kit-info-icon {
    width: 32px;
    height: 32px;
    object-fit: contain;
}

.kit-info-header strong {
    font-size: 1rem;
    color: var(--text-main);
}

.kit-info-requirements {
    margin-bottom: var(--spacing-md);
}

.kit-info-requirements .req-total {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-sm);
    padding: var(--spacing-xs) var(--spacing-sm);
    background: rgba(0, 0, 0, 0.2);
    border-radius: var(--radius-xs);
}

.kit-info-requirements .req-label {
    color: var(--text-secondary);
    font-size: 0.85rem;
}

.kit-info-requirements .req-value {
    color: var(--accent-blu);
    font-size: 1.2rem;
    font-weight: 700;
}

.kit-info-requirements .req-breakdown {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
}

.kit-info-requirements .req-part {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 0.8rem;
    color: var(--text-secondary);
    padding: var(--spacing-xs) var(--spacing-sm);
    background: rgba(255, 255, 255, 0.05);
    border-radius: var(--radius-xs);
}

.kit-info-requirements .part-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.kit-info-extra {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-inactive);
}

.kit-info-extra .extra-req {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: rgba(255, 193, 7, 0.1);
    border: 1px solid rgba(255, 193, 7, 0.3);
    border-radius: var(--radius-sm);
}

.kit-info-extra .extra-icon {
    width: 24px;
    height: 24px;
    object-fit: contain;
}

.kit-info-extra .extra-req span {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.kit-info-extra .extra-req strong {
    color: #FFC107;
}

/* Weapon requirement styling */
.kit-info-extra .weapon-req {
    flex-direction: row;
    align-items: flex-start;
}

.kit-info-extra .weapon-req-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.kit-info-extra .weapon-hint {
    color: var(--text-muted);
    font-size: 0.75rem;
}

/* Requirements note */
.kit-info-requirements .req-note {
    margin-top: var(--spacing-sm);
    padding: var(--spacing-xs);
    background: rgba(255, 193, 7, 0.05);
    border-radius: var(--radius-xs);
}

.kit-info-requirements .req-note small {
    color: #FFC107;
    font-size: 0.75rem;
}

/* Parts status section */
.parts-status-section {
    margin-top: var(--spacing-sm);
}

.parts-default-hint {
    margin-top: var(--spacing-xs);
    text-align: center;
}

.parts-default-hint small {
    color: var(--text-muted);
    font-size: 0.75rem;
}

/* Parts category header */
.category-header-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-sm);
}

.category-total-control .category-hint {
    font-size: 0.7rem;
    color: var(--text-muted);
    background: rgba(255, 255, 255, 0.05);
    padding: 2px 6px;
    border-radius: var(--radius-xs);
}

/* Parts total display */
.parts-limit-header .total-display {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--text-muted);
}

.parts-limit-header .total-display.has-value {
    color: var(--accent-blu);
}

/* Parts status message */
.parts-status-msg.has-parts {
    color: var(--accent-green);
    background: rgba(76, 175, 80, 0.1);
    border-color: rgba(76, 175, 80, 0.3);
}

/* Forge Button */
.btn-forge {
    width: 100%;
    padding: var(--spacing-md) var(--spacing-lg);
    background: linear-gradient(135deg, var(--accent-red) 0%, #cc3333 100%);
    border: none;
    border-radius: var(--radius-sm);
    color: white;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all var(--transition-normal);
    box-shadow: var(--shadow-sm);
}

.btn-forge:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    background: linear-gradient(135deg, #ff5555 0%, var(--accent-red) 100%);
}

.btn-icon {
    font-size: 1.3rem;
}

/* Projects List */
.projects-list {
    padding: var(--spacing-md);
    max-height: 600px;
    overflow-y: auto;
}

.empty-state {
    text-align: center;
    padding: var(--spacing-xl);
    color: var(--text-muted);
}

.empty-icon {
    font-size: 3rem;
    display: block;
    margin-bottom: var(--spacing-md);
}

.empty-hint {
    font-size: 0.85rem;
    margin-top: var(--spacing-sm);
}

/* Project Card */
.project-card {
    background: var(--bg-input);
    border-radius: var(--radius-sm);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border: 2px solid var(--border-inactive);
    transition: all var(--transition-normal);
}

.project-card.ready {
    border-color: var(--status-ready);
    box-shadow: 0 0 10px rgba(76, 175, 80, 0.3);
}

.project-card.pending {
    border-color: var(--status-pending);
}

.project-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--spacing-md);
}

.project-header-left {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.project-kit-icon {
    width: 40px;
    height: 40px;
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.project-kit-icon img {
    width: 32px;
    height: 32px;
    object-fit: contain;
}

.project-title {
    font-weight: 700;
    color: var(--text-main);
    font-size: 1rem;
}

.project-type {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
}

.project-badge {
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--radius-sm);
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
}

.project-badge.specialized {
    background: var(--accent-blu);
    color: white;
}

.project-badge.professional {
    background: var(--high-tier);
    color: white;
}

.project-details {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.detail-tag {
    background: var(--bg-card);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
    display: flex;
    align-items: center;
    gap: 4px;
}

.detail-tag .color-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
}

.detail-tag .detail-img {
    width: 20px;
    height: 20px;
    object-fit: contain;
    border-radius: 2px;
}

.detail-tag.sheen-tag,
.detail-tag.effect-tag {
    padding: var(--spacing-xs) var(--spacing-sm);
}

/* Requirements Box with Image */
.req-with-image {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-md);
}

.req-image {
    width: 48px;
    height: 48px;
    object-fit: contain;
    flex-shrink: 0;
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    padding: 4px;
}

/* Progress Bar */
.project-progress {
    margin-bottom: var(--spacing-md);
}

.progress-label {
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-xs);
}

.progress-bar {
    height: 8px;
    background: var(--bg-main);
    border-radius: 4px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-blu) 0%, #3385ff 100%);
    border-radius: 4px;
    transition: width var(--transition-normal);
}

.progress-fill.complete {
    background: linear-gradient(90deg, var(--status-ready) 0%, #66bb6a 100%);
}

/* Project Actions */
.project-actions {
    display: flex;
    gap: var(--spacing-sm);
    align-items: stretch;
}

/* .project-btn {
    padding: var(--spacing-sm);
    border: none;
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
} */

/* Botón completar ocupa el espacio restante */
/* .project-btn.complete {
    flex: 1;
    background: var(--status-ready);
    color: white;
} */

/* .project-btn.complete:hover {
    background: #5cb85c;
} */

/* .project-btn.complete:disabled {
    background: var(--text-muted);
    cursor: not-allowed;
} */

/* Animación para botón listo */
/* .project-btn.complete.ready-pulse {
    animation: readyPulse 2s ease-in-out infinite;
    box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
} */

/* @keyframes readyPulse {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
    }
    50% {
        transform: scale(1.02);
        box-shadow: 0 0 20px rgba(0, 255, 136, 0.8);
    }
} */

/* Botones de icono con ancho fijo */
/* .project-btn.edit,
.project-btn.cost,
.project-btn.delete {
    flex: 0 0 40px;
    width: 40px;
    min-width: 40px;
    font-size: 1rem;
} */

/* .project-btn.edit {
    background: var(--accent-primary);
    color: var(--bg-primary);
} */

/* .project-btn.edit:hover {
    filter: brightness(1.1);
    transform: scale(1.05);
} */

/* .project-btn.cost {
    background: linear-gradient(135deg, var(--accent-gold), #FFA500);
    color: var(--bg-main);
} */

/* .project-btn.cost:hover {
    transform: scale(1.05);
} */

/* .project-btn.delete {
    background: var(--accent-red);
    color: white;
} */

/* .project-btn.delete:hover {
    background: #ff5555;
    transform: scale(1.05);
} */

/* =============================================
   GUÍA DE POPULARIDAD CON PESTAÑAS
   ============================================= */

.popularity-guide-section {
    margin-top: var(--spacing-xl);
    padding: var(--spacing-lg);
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-inactive);
}

.popularity-guide-section .section-header {
    margin-bottom: var(--spacing-lg);
    text-align: center;
}

.popularity-guide-section .section-header h2 {
    font-size: 1.5rem;
    color: var(--text-main);
    margin-bottom: var(--spacing-xs);
}

.popularity-guide-section .section-subtitle {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

/* Pestañas de navegación */
.popularity-tabs-container {
    background: var(--bg-input);
    border-radius: var(--radius-md);
    overflow: hidden;
}

.popularity-tabs-nav {
    display: flex;
    background: #1a1a1a;
    border-bottom: 2px solid var(--border-inactive);
}

.popularity-tab-btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md) var(--spacing-lg);
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-normal);
    position: relative;
}

.popularity-tab-btn:hover {
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-main);
}

.popularity-tab-btn.active {
    color: var(--text-main);
    background: rgba(255, 255, 255, 0.08);
}

.popularity-tab-btn.active::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--accent-orange);
}

.popularity-tab-btn .tab-icon {
    font-size: 1.3rem;
}

.popularity-tab-btn .tab-label {
    font-weight: 600;
    font-size: 1rem;
}

.popularity-tab-btn .tab-badge {
    font-size: 0.7rem;
    padding: 2px 8px;
    background: rgba(255, 140, 0, 0.3);
    color: var(--accent-orange);
    border-radius: 10px;
    text-transform: uppercase;
    font-weight: 600;
}

.popularity-tab-btn .tab-badge.pro {
    background: rgba(147, 112, 219, 0.3);
    color: var(--mid-tier);
}

/* Paneles de contenido */
.popularity-tab-panel {
    display: none;
    padding: var(--spacing-lg);
}

.popularity-tab-panel.active {
    display: block;
    animation: fadeIn 0.3s ease;
}

.effects-intro {
    background: rgba(255, 140, 0, 0.1);
    border-left: 3px solid var(--accent-orange);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    border-radius: 0 var(--radius-md) var(--radius-md) 0;
}

.effects-intro p {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.effects-intro strong {
    color: var(--text-main);
}

/* Grid de efectos */
.effects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.effect-card {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    border: 1px solid var(--border-inactive);
    transition: all var(--transition-normal);
    display: flex;
    gap: var(--spacing-md);
    align-items: flex-start;
}

.effect-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    border-color: var(--effect-color, var(--accent-orange));
}

.effect-preview {
    width: 60px;
    height: 60px;
    border-radius: var(--radius-md);
    background: var(--bg-input);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    border: 2px solid var(--effect-color, #666);
    overflow: hidden;
}

.effect-preview img {
    max-width: 50px;
    max-height: 50px;
    object-fit: contain;
}

.effect-info {
    flex: 1;
    min-width: 0;
}

.effect-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--spacing-xs);
}

.effect-name {
    font-weight: 600;
    font-size: 1rem;
    color: var(--effect-color, var(--text-main));
}

.effect-tier-badge {
    font-size: 0.7rem;
    padding: 2px 8px;
    border-radius: 10px;
    text-transform: uppercase;
    font-weight: 600;
}

.effect-tier-badge.god {
    background: rgba(255, 215, 0, 0.2);
    color: var(--god-tier);
}

.effect-tier-badge.high {
    background: rgba(255, 105, 180, 0.2);
    color: var(--high-tier);
}

.effect-tier-badge.mid {
    background: rgba(147, 112, 219, 0.2);
    color: var(--mid-tier);
}

.effect-tier-badge.low {
    background: rgba(126, 126, 126, 0.2);
    color: var(--text-muted);
}

.effect-demand-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-xs);
}

.demand-label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.demand-bar-container {
    flex: 1;
    height: 8px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    overflow: hidden;
}

.demand-bar {
    height: 100%;
    border-radius: 4px;
    transition: width 0.5s ease;
}

.demand-bar.very-high {
    background: linear-gradient(90deg, var(--accent-orange), var(--god-tier));
}

.demand-bar.high {
    background: linear-gradient(90deg, var(--high-tier), #ff8fab);
}

.demand-bar.medium {
    background: linear-gradient(90deg, var(--mid-tier), #b19cd9);
}

.demand-bar.low {
    background: linear-gradient(90deg, #555, #777);
}

.effect-stats {
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.effect-stat {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.effect-stat-value {
    color: var(--text-main);
    font-weight: 600;
}

.effect-note {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-style: italic;
    margin-top: var(--spacing-xs);
}

/* ===== ENHANCED EFFECT CARDS (Diseño mejorado) ===== */
.effect-card.enhanced {
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: var(--spacing-lg);
    position: relative;
    overflow: hidden;
    background: linear-gradient(145deg, var(--bg-card) 0%, rgba(30, 30, 30, 0.95) 100%);
    border: 2px solid transparent;
    border-image: linear-gradient(145deg, var(--effect-color, #666) 0%, transparent 50%) 1;
}

.effect-card.enhanced::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--effect-color, #666);
}

.effect-card.enhanced:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 0 20px var(--effect-color, #666)30;
}

.effect-card.enhanced[data-tier="god"]::before {
    background: linear-gradient(90deg, var(--god-tier), #FFA500, var(--god-tier));
    animation: shimmer 2s ease-in-out infinite;
}

@keyframes shimmer {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
}

.effect-rank {
    position: absolute;
    top: var(--spacing-sm);
    left: var(--spacing-sm);
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--text-secondary);
    background: rgba(0, 0, 0, 0.5);
    padding: 4px 10px;
    border-radius: 20px;
}

.effect-visual-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.effect-preview-large {
    width: 100px;
    height: 100px;
    border-radius: var(--radius-lg);
    background: linear-gradient(145deg, #1a1a1a, #252525);
    display: flex;
    align-items: center;
    justify-content: center;
    border: 3px solid var(--effect-color, #666);
    transition: all var(--transition-normal);
    position: relative;
    overflow: hidden;
}

.effect-preview-large:hover {
    transform: scale(1.05);
}

.effect-img-main {
    max-width: 85px;
    max-height: 85px;
    object-fit: contain;
    transition: all var(--transition-normal);
}

.effect-img-alt {
    position: absolute;
    max-width: 85px;
    max-height: 85px;
    object-fit: contain;
    opacity: 0;
    transition: opacity var(--transition-normal);
}

.effect-preview-large:hover .effect-img-main {
    opacity: 0;
}

.effect-preview-large:hover .effect-img-alt {
    opacity: 1;
}

.effect-color-swatch {
    width: 40px;
    height: 8px;
    border-radius: 4px;
    box-shadow: 0 0 10px currentColor;
}

.effect-details {
    width: 100%;
}

.effect-name-row {
    margin-bottom: var(--spacing-xs);
}

.effect-name-large {
    font-size: 1.1rem;
    font-weight: 700;
    text-shadow: 0 0 10px currentColor;
}

.effect-tier-row {
    margin-bottom: var(--spacing-md);
}

.effect-tier-badge-large {
    display: inline-block;
    font-size: 0.75rem;
    padding: 4px 16px;
    border-radius: 20px;
    text-transform: uppercase;
    font-weight: 700;
    letter-spacing: 0.5px;
}

.effect-tier-badge-large.god {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(255, 165, 0, 0.2));
    color: var(--god-tier);
    border: 1px solid rgba(255, 215, 0, 0.5);
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
}

.effect-tier-badge-large.high {
    background: linear-gradient(135deg, rgba(255, 105, 180, 0.3), rgba(255, 105, 180, 0.1));
    color: var(--high-tier);
    border: 1px solid rgba(255, 105, 180, 0.5);
}

.effect-tier-badge-large.mid {
    background: linear-gradient(135deg, rgba(147, 112, 219, 0.3), rgba(147, 112, 219, 0.1));
    color: var(--mid-tier);
    border: 1px solid rgba(147, 112, 219, 0.5);
}

.effect-tier-badge-large.low {
    background: rgba(126, 126, 126, 0.2);
    color: var(--text-muted);
    border: 1px solid rgba(126, 126, 126, 0.3);
}

.effect-demand-visual {
    margin-bottom: var(--spacing-md);
}

.demand-bar-large-container {
    width: 100%;
    height: 24px;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 12px;
    overflow: hidden;
    position: relative;
}

.demand-bar-large {
    height: 100%;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding-right: var(--spacing-sm);
    transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.demand-bar-large.very-high {
    background: linear-gradient(90deg, #FF8C00, var(--god-tier));
}

.demand-bar-large.high {
    background: linear-gradient(90deg, #FF1493, var(--high-tier));
}

.demand-bar-large.medium {
    background: linear-gradient(90deg, #7B68EE, var(--mid-tier));
}

.demand-bar-large.low {
    background: linear-gradient(90deg, #555, #888);
}

.demand-percent {
    font-size: 0.8rem;
    font-weight: 700;
    color: #fff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

.effect-stats-row {
    display: flex;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.effect-stat-box {
    flex: 1;
    background: rgba(255, 255, 255, 0.05);
    border-radius: var(--radius-md);
    padding: var(--spacing-sm);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
}

.effect-stat-box .stat-icon {
    font-size: 1.2rem;
}

.effect-stat-box .stat-value {
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--text-main);
}

.effect-stat-box .stat-label {
    font-size: 0.65rem;
    color: var(--text-muted);
    text-transform: uppercase;
}

.effect-stat-box.price .stat-value {
    color: var(--accent-green);
}

.effect-note-box {
    font-size: 0.8rem;
    color: var(--text-secondary);
    background: rgba(255, 255, 255, 0.03);
    padding: var(--spacing-sm);
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--effect-color, #666);
}

/* ===== TEAM SHINE SPECIAL EFFECTS ===== */
.effect-card.team-shine-card {
    cursor: pointer;
}

.effect-card.team-shine-card .team-shine-preview {
    transition: all 0.4s ease;
}

/* Team Shine: cambio UNIFORME de rojo a azul (todo cambia) */
.effect-card.team-shine-card:hover .team-shine-preview {
    border-color: #2862C8 !important;
    box-shadow: 0 0 20px rgba(40, 98, 200, 0.4) !important;
}

.effect-card.team-shine-card:hover .effect-img-main {
    opacity: 0;
}

.effect-card.team-shine-card:hover .effect-img-alt {
    opacity: 1;
}

.effect-card.team-shine-card:hover .team-shine-swatch {
    background: #2862C8 !important;
}

.effect-card.team-shine-card:hover .effect-name-large {
    color: #2862C8 !important;
    -webkit-text-fill-color: #2862C8 !important;
}

/* Borde de la tarjeta cambia a azul en hover (manteniendo gradiente) */
.effect-card.team-shine-card:hover {
    border: 2px solid transparent !important;
    border-image: linear-gradient(145deg, #2862C8 0%, transparent 50%) 1 !important;
    --effect-color: #2862C8;
}

/* La línea superior dorada NO cambia - se mantiene dorada */
.effect-card.team-shine-card:hover::before {
    background: linear-gradient(90deg, var(--god-tier), #FFA500, var(--god-tier)) !important;
}

.effect-card.team-shine-card:hover .effect-note-box {
    border-left-color: #2862C8 !important;
}

/* Otros efectos: sin cambio de imagen en hover (solo tienen 1 imagen) */
.effect-card.enhanced:not(.team-shine-card) .effect-img-alt {
    display: none;
}

.effect-card.enhanced:not(.team-shine-card):hover .effect-img-main {
    opacity: 1;
}

.effect-card.enhanced {
    cursor: pointer;
}

/* ===== EFFECT PREVIEW MODAL ===== */
.effect-preview-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.effect-preview-modal.active {
    opacity: 1;
    visibility: visible;
}

.effect-preview-modal-backdrop {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(10px);
}

.effect-preview-modal-content {
    position: relative;
    background: linear-gradient(145deg, #2a2a2a, #1f1f1f);
    border-radius: var(--radius-lg);
    padding: var(--spacing-xl);
    max-width: 500px;
    width: 90%;
    max-height: 75vh;
    text-align: center;
    border: 3px solid var(--modal-color, #666);
    box-shadow: 0 0 60px var(--modal-color, #666)40;
    transform: scale(0.9);
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.effect-preview-modal.active .effect-preview-modal-content {
    transform: scale(1);
}

.effect-preview-modal-content.team-shine-modal {
    --current-color: var(--modal-color);
    border-color: var(--current-color);
    box-shadow: 0 0 60px var(--current-color)40;
    transition: border-color 0.5s ease, box-shadow 0.5s ease;
}

.effect-preview-modal-content.team-shine-modal.showing-blu {
    border-color: var(--modal-color-blu);
    box-shadow: 0 0 60px var(--modal-color-blu)40;
}

.effect-preview-modal-close {
    position: absolute;
    top: var(--spacing-sm);
    right: var(--spacing-sm);
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: var(--text-main);
    font-size: 1.2rem;
    cursor: pointer;
    transition: all var(--transition-normal);
    display: flex;
    align-items: center;
    justify-content: center;
}

.effect-preview-modal-close:hover {
    background: rgba(255, 64, 64, 0.3);
    transform: rotate(90deg);
}

.effect-preview-modal-image-container {
    width: 280px;
    height: 280px;
    margin: 0 auto var(--spacing-lg);
    border-radius: var(--radius-lg);
    background: linear-gradient(145deg, #1a1a1a, #252525);
    display: flex;
    align-items: center;
    justify-content: center;
    border: 3px solid var(--modal-color, #666);
    position: relative;
    overflow: hidden;
    transition: border-color 0.5s ease;
}

.effect-preview-modal-image-container.team-shine-container {
    border-color: var(--current-color, var(--modal-color));
}

.team-shine-modal.showing-blu .team-shine-container {
    border-color: var(--modal-color-blu);
}

.effect-preview-modal-img {
    max-width: 260px;
    max-height: 260px;
    object-fit: contain;
    transition: opacity 0.5s ease;
}

.effect-preview-modal-img.alt-img {
    position: absolute;
    opacity: 0;
}

.effect-preview-modal-info {
    margin-bottom: var(--spacing-md);
}

.effect-preview-modal-name {
    font-size: 2.2rem;
    font-weight: 700;
    margin-bottom: var(--spacing-md);
    transition: color 0.5s ease;
}

.effect-preview-modal-tier {
    display: inline-block;
    font-size: 0.85rem;
    padding: 6px 20px;
    border-radius: 20px;
    text-transform: uppercase;
    font-weight: 700;
    letter-spacing: 1px;
}

.effect-preview-modal-tier.god {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(255, 165, 0, 0.2));
    color: var(--god-tier);
    border: 1px solid rgba(255, 215, 0, 0.5);
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
}

.effect-preview-modal-tier.high {
    background: linear-gradient(135deg, rgba(255, 105, 180, 0.3), rgba(255, 105, 180, 0.1));
    color: var(--high-tier);
    border: 1px solid rgba(255, 105, 180, 0.5);
}

.effect-preview-modal-tier.mid {
    background: linear-gradient(135deg, rgba(147, 112, 219, 0.3), rgba(147, 112, 219, 0.1));
    color: var(--mid-tier);
    border: 1px solid rgba(147, 112, 219, 0.5);
}

.effect-preview-modal-tier.low {
    background: rgba(126, 126, 126, 0.2);
    color: var(--text-muted);
    border: 1px solid rgba(126, 126, 126, 0.3);
}

.team-shine-note {
    margin-top: var(--spacing-md);
    font-size: 0.85rem;
    color: var(--text-secondary);
    background: rgba(255, 255, 255, 0.05);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-md);
}

.effect-preview-modal-hint {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-top: var(--spacing-md);
}

/* Demand tags */
.demand-tag {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
}

.demand-tag.very-high {
    background: rgba(255, 140, 0, 0.2);
    color: var(--accent-orange);
}

.demand-tag.high {
    background: rgba(255, 105, 180, 0.2);
    color: var(--high-tier);
}

.demand-tag.medium {
    background: rgba(147, 112, 219, 0.2);
    color: var(--mid-tier);
}

.demand-tag.low {
    background: rgba(126, 126, 126, 0.2);
    color: var(--text-muted);
}

/* Leyenda de efectos */
.effects-legend {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: rgba(255, 255, 255, 0.03);
    border-radius: var(--radius-md);
    justify-content: center;
}

.legend-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.legend-text {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

/* ========================================== */
/* PESTAÑA MIS KITS                          */
/* ========================================== */

.popularity-tab-btn .tab-badge.inventory {
    background: rgba(0, 180, 150, 0.3);
    color: #00B496;
    min-width: 22px;
    text-align: center;
}

/* Contenedor principal */
.mykits-container {
    padding: var(--spacing-md);
}

/* Filtros */
.mykits-filters {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-lg);
    margin-bottom: var(--spacing-xl);
    padding: var(--spacing-lg);
    background: rgba(255, 255, 255, 0.03);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-color);
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.filter-group label {
    font-size: 0.85rem;
    color: var(--text-secondary);
    font-weight: 500;
}

.filter-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-xs);
}

.filter-btn {
    padding: 6px 12px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-secondary);
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.filter-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-main);
}

.filter-btn.active {
    background: var(--accent-orange);
    border-color: var(--accent-orange);
    color: #000;
}

.filter-btn.basic.active {
    background: #FF6B6B;
    border-color: #FF6B6B;
}

.filter-btn.specialized.active {
    background: #4ECDC4;
    border-color: #4ECDC4;
}

.filter-btn.professional.active {
    background: #9B59B6;
    border-color: #9B59B6;
}

.filter-btn.imbued.active {
    background: #F39C12;
    border-color: #F39C12;
}

/* Filtros de clase */
.class-filter {
    gap: 4px;
}

.class-btn {
    padding: 6px 10px;
    min-width: 38px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.class-filter-icon {
    width: 20px;
    height: 20px;
    object-fit: contain;
    filter: grayscale(50%) brightness(0.8);
    transition: all 0.2s ease;
}

.class-btn:hover .class-filter-icon,
.class-btn.active .class-filter-icon {
    filter: none;
}

.class-btn.active {
    background: rgba(255, 140, 0, 0.2);
    border-color: var(--accent-orange);
}

/* Grid de Mis Kits */
.mykits-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: var(--spacing-lg);
}

/* Tarjeta de Kit */
.mykit-card {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    position: relative;
    transition: all 0.3s ease;
    overflow: hidden;
}

.mykit-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--border-color);
}

.mykit-card.basic::before {
    background: linear-gradient(90deg, #FF6B6B, #FF8E8E, #FF6B6B);
}

.mykit-card.specialized::before {
    background: linear-gradient(90deg, #4ECDC4, #7EDDD6, #4ECDC4);
}

.mykit-card.professional::before {
    background: linear-gradient(90deg, #9B59B6, #B07CC6, #9B59B6);
}

.mykit-card[data-tier="god"]::before {
    background: linear-gradient(90deg, var(--god-tier), #FFA500, var(--god-tier));
    animation: goldShimmer 3s ease infinite;
}

.mykit-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

/* Header del kit */
.mykit-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.mykit-type-badge {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}

.mykit-type-badge.basic {
    background: rgba(255, 107, 107, 0.2);
    color: #FF6B6B;
}

.mykit-type-badge.specialized {
    background: rgba(78, 205, 196, 0.2);
    color: #4ECDC4;
}

.mykit-type-badge.professional {
    background: rgba(155, 89, 182, 0.2);
    color: #9B59B6;
}

.mykit-type-icon {
    width: 18px;
    height: 18px;
    object-fit: contain;
}

.mykit-tier-badge {
    padding: 4px 8px;
    border-radius: var(--radius-sm);
    font-size: 0.65rem;
    font-weight: 700;
    text-transform: uppercase;
    margin-left: auto;
}

.mykit-tier-badge.god {
    background: rgba(255, 215, 0, 0.2);
    color: var(--god-tier);
    border: 1px solid rgba(255, 215, 0, 0.4);
    animation: pulse 2s ease infinite;
}

.mykit-tier-badge.high {
    background: rgba(255, 105, 180, 0.2);
    color: var(--high-tier);
}

.mykit-tier-badge.mid {
    background: rgba(147, 112, 219, 0.2);
    color: var(--mid-tier);
}

.mykit-tier-badge.low {
    background: rgba(126, 126, 126, 0.2);
    color: var(--text-muted);
}

.mykit-class-badge {
    width: 28px;
    height: 28px;
    padding: 4px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 50%;
}

.mykit-class-badge img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

/* Nombre del arma */
.mykit-weapon {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--border-color);
}

.weapon-name {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-main);
}

.imbued-badge {
    font-size: 0.75rem;
    padding: 4px 8px;
    border-radius: var(--radius-sm);
    background: rgba(128, 128, 128, 0.2);
    color: var(--text-muted);
}

.imbued-badge.is-imbued {
    background: rgba(243, 156, 18, 0.2);
    color: #F39C12;
}

/* Efectos del kit */
.kit-effects {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.kit-effect {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
}

.kit-effect.sheen {
    border-left: 3px solid var(--sheen-color);
}

.kit-effect .effect-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
}

.kit-effect .effect-icon {
    font-size: 0.9rem;
}

.kit-effect .effect-label {
    color: var(--text-secondary);
}

/* Stock text */
.mykit-stock {
    margin-bottom: var(--spacing-md);
}

.stock-text-container {
    display: flex;
    gap: 4px;
}

.stock-text-input {
    flex: 1;
    padding: 8px 12px;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-main);
    font-size: 0.8rem;
    font-family: 'Fira Code', monospace;
}

.copy-stock-btn {
    padding: 8px 12px;
    background: rgba(255, 140, 0, 0.2);
    border: 1px solid var(--accent-orange);
    border-radius: var(--radius-sm);
    color: var(--accent-orange);
    cursor: pointer;
    transition: all 0.2s ease;
}

.copy-stock-btn:hover {
    background: var(--accent-orange);
    color: #000;
}

.copy-stock-btn.copied {
    background: var(--success);
    border-color: var(--success);
    color: #fff;
}

/* === PESTAÑAS DE PRECIOS POR TIENDA === */
.kit-price-tabs {
    margin: var(--spacing-md) 0;
    background: rgba(0, 0, 0, 0.2);
    border-radius: var(--radius-md);
    padding: var(--spacing-sm);
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.price-tabs-nav {
    display: flex;
    flex-direction: column;
    gap: 6px;
    margin-bottom: var(--spacing-sm);
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

/* Fila de las 5 tiendas */
.stores-row {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
}

.price-tab-btn {
    padding: 6px 10px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-sm);
    color: var(--text-secondary);
    font-size: 0.7rem;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 5px;
    flex: 1;
    justify-content: center;
    min-width: 0;
}

/* Logo de tienda */
.store-logo {
    width: 16px;
    height: 16px;
    object-fit: contain;
    border-radius: 2px;
}

.price-tab-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    transform: translateY(-1px);
}

.price-tab-btn.active {
    color: #fff;
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Colores específicos por tienda */
.price-tab-btn[data-store="backpack_tf"] {
    border-bottom: 2px solid #3f8bbf;
}
.price-tab-btn[data-store="backpack_tf"].active {
    background: #3f8bbf;
    border-color: #3f8bbf;
}

.price-tab-btn[data-store="scrap_tf"] {
    border-bottom: 2px solid #4CAF50;
}
.price-tab-btn[data-store="scrap_tf"].active {
    background: #4CAF50;
    border-color: #4CAF50;
}

.price-tab-btn[data-store="stntrading"] {
    border-bottom: 2px solid #FF5722;
}
.price-tab-btn[data-store="stntrading"].active {
    background: #FF5722;
    border-color: #FF5722;
}

.price-tab-btn[data-store="tradeit"] {
    border-bottom: 2px solid #9C27B0;
}
.price-tab-btn[data-store="tradeit"].active {
    background: #9C27B0;
    border-color: #9C27B0;
}

.price-tab-btn[data-store="steam_market"] {
    border-bottom: 2px solid #66c0f4;
}
.price-tab-btn[data-store="steam_market"].active {
    background: linear-gradient(135deg, #1b2838, #2a475e);
    border-color: #66c0f4;
}

/* Botón de Comparar - ancho completo */
.comparison-btn {
    width: 100%;
    justify-content: center;
    padding: 8px 12px;
    background: rgba(255, 215, 0, 0.1);
    border: 1px solid rgba(255, 215, 0, 0.3);
    border-bottom: 2px solid #FFD700;
    font-weight: 500;
}

.comparison-btn:hover {
    background: rgba(255, 215, 0, 0.2);
}

.comparison-btn.active {
    background: linear-gradient(135deg, #FFD700, #FFA500);
    border-color: #FFD700;
    color: #000;
}

.comparison-icon {
    font-size: 1rem;
}

/* Paneles de contenido */
.price-tab-panel {
    display: none;
    padding: var(--spacing-sm);
}

.price-tab-panel.active {
    display: block;
}

/* Panel de contenido de precios */
.price-panel-content {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

/* Fila de input de precio */
.price-input-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
}

.price-input-row label {
    flex: 0 0 35%;
    font-size: 0.8rem;
    color: var(--text-secondary);
}

/* Inputs duales (Keys + Refs) */
.price-inputs-dual {
    flex: 0 0 60%;
    display: flex;
    align-items: center;
    gap: 8px;
}

.price-separator {
    color: var(--text-muted);
    font-weight: 600;
}

/* Campo de input individual */
.price-input-field {
    display: flex;
    align-items: center;
    gap: 6px;
    flex: 1;
}

.price-input-field.usd-field,
.price-input-field.local-field {
    flex: 0 0 60%;
}

/* Input de precio */
.price-input {
    flex: 1;
    padding: 8px 12px;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.9rem;
    max-width: 100px;
}

.price-input.keys-input {
    max-width: 60px;
}

.price-input.refs-input {
    max-width: 80px;
}

.price-input.usd-input,
.price-input.local-input {
    max-width: 120px;
}

.price-input:focus {
    border-color: var(--accent);
    outline: none;
    box-shadow: 0 0 0 2px rgba(0, 139, 255, 0.2);
}

.price-input::placeholder {
    color: rgba(255, 255, 255, 0.3);
}

.price-input.disabled-input {
    opacity: 0.5;
    cursor: not-allowed;
    background: rgba(255, 0, 0, 0.1);
    border-color: rgba(255, 0, 0, 0.3);
}

.price-suffix {
    font-size: 0.75rem;
    color: var(--text-muted);
    white-space: nowrap;
}

/* Info de comisión */
.fee-info {
    font-size: 0.75rem;
    padding: 4px 8px;
    border-radius: var(--radius-sm);
    margin-top: 4px;
}

.fee-info.no-fee {
    color: var(--success);
    background: rgba(76, 175, 80, 0.1);
}

.fee-info.has-fee {
    color: var(--warning);
    background: rgba(255, 152, 0, 0.1);
}

/* Toggle de Overstock */
.overstock-toggle {
    margin-top: var(--spacing-xs);
}

.overstock-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    padding: 6px 10px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: var(--radius-sm);
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.2s ease;
}

.overstock-label:hover {
    background: rgba(0, 0, 0, 0.3);
}

.overstock-checkbox {
    width: 16px;
    height: 16px;
    cursor: pointer;
}

.overstock-text {
    font-size: 0.8rem;
    color: var(--success);
    transition: color 0.2s ease;
}

.overstock-text.is-overstock {
    color: var(--danger);
    font-weight: 500;
}

/* Mensaje de tienda bloqueada (scrap.tf kit imbuido) */
.store-blocked-message {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: rgba(244, 67, 54, 0.1);
    border: 1px solid rgba(244, 67, 54, 0.3);
    border-radius: var(--radius-md);
}

.store-blocked-message .blocked-icon {
    font-size: 2rem;
    line-height: 1;
}

.store-blocked-message .blocked-text {
    flex: 1;
}

.store-blocked-message .blocked-text strong {
    display: block;
    color: var(--danger);
    font-size: 0.9rem;
    margin-bottom: 4px;
}

.store-blocked-message .blocked-text p {
    margin: 0 0 6px 0;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.store-blocked-message .blocked-text small {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-style: italic;
}

/* Logo pequeño en comparación */
.store-logo-small {
    width: 20px;
    height: 20px;
    object-fit: contain;
    border-radius: 3px;
}

.price-currency {
    font-size: 0.85rem;
    color: var(--text-muted);
}

.store-fee-info {
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-top: var(--spacing-xs);
    font-style: italic;
}

/* Comparativa de precios */
.price-comparison-results {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.comparison-header {
    font-size: 0.85rem;
    color: var(--text-secondary);
    padding-bottom: var(--spacing-xs);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    margin-bottom: var(--spacing-xs);
}

.comparison-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: 10px 12px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: var(--radius-sm);
    transition: all 0.2s ease;
}

.comparison-item:hover {
    background: rgba(255, 255, 255, 0.06);
}

.comparison-item.rank-1 {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 215, 0, 0.05));
    border: 1px solid rgba(255, 215, 0, 0.3);
}

.comparison-item.rank-2 {
    background: linear-gradient(135deg, rgba(192, 192, 192, 0.12), rgba(192, 192, 192, 0.04));
    border: 1px solid rgba(192, 192, 192, 0.25);
}

.comparison-item.rank-3 {
    background: linear-gradient(135deg, rgba(205, 127, 50, 0.1), rgba(205, 127, 50, 0.03));
    border: 1px solid rgba(205, 127, 50, 0.2);
}

.comparison-medal {
    font-size: 1.2rem;
    min-width: 30px;
    text-align: center;
}

.comparison-store-name {
    flex: 1;
    font-size: 0.85rem;
    color: var(--text-primary);
}

.comparison-price {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--success);
}

.comparison-net-label {
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-left: 4px;
}

.comparison-fee {
    font-size: 0.7rem;
    color: var(--text-muted);
    min-width: 60px;
    text-align: right;
}

.comparison-empty {
    text-align: center;
    padding: var(--spacing-md);
    color: var(--text-muted);
    font-size: 0.85rem;
    font-style: italic;
}

.comparison-empty-icon {
    font-size: 2rem;
    margin-bottom: var(--spacing-sm);
    opacity: 0.5;
}

/* ============================================
   MODAL DE COMPARACIÓN DE PRECIOS
   ============================================ */

.price-comparison-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(8px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.price-comparison-modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.price-comparison-modal {
    width: 90%;
    max-width: 700px;
    max-height: 80vh;
    background: linear-gradient(145deg, #1a1a2e, #16213e);
    border-radius: var(--radius-lg);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transform: scale(0.9) translateY(20px);
    transition: transform 0.3s ease;
}

.price-comparison-modal-overlay.active .price-comparison-modal {
    transform: scale(1) translateY(0);
}

.modal-close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 36px;
    height: 36px;
    border: none;
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-secondary);
    border-radius: 50%;
    font-size: 1.2rem;
    cursor: pointer;
    transition: all 0.2s ease;
    z-index: 10;
}

.modal-close-btn:hover {
    background: rgba(255, 0, 0, 0.3);
    color: #fff;
    transform: rotate(90deg);
}

/* Header del modal */
.comparison-modal-header {
    padding: var(--spacing-lg);
    background: rgba(0, 0, 0, 0.3);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--spacing-md);
}

.modal-kit-info {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    flex: 1;
}

.modal-kit-icon {
    width: 64px;
    height: 64px;
    object-fit: contain;
}

.modal-kit-details {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.modal-weapon-name {
    font-size: 1.4rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
    line-height: 1.2;
}

.modal-kit-meta {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
}

.modal-kit-type {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.modal-tier-badge {
    font-size: 0.7rem;
    padding: 3px 10px;
    border-radius: 20px;
    font-weight: 600;
    text-transform: uppercase;
}

.modal-tier-badge.god {
    background: linear-gradient(135deg, #FFD700, #FFA500);
    color: #000;
}

.modal-tier-badge.high {
    background: linear-gradient(135deg, #00d4ff, #0099cc);
    color: #000;
}

.modal-tier-badge.mid {
    background: rgba(156, 39, 176, 0.3);
    color: #ce93d8;
    border: 1px solid rgba(156, 39, 176, 0.5);
}

.modal-tier-badge.low {
    background: rgba(158, 158, 158, 0.2);
    color: #9e9e9e;
    border: 1px solid rgba(158, 158, 158, 0.3);
}

/* Info de clase */
.modal-class-info {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 15px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: var(--radius-md);
}

.modal-class-icon {
    width: 40px;
    height: 40px;
    object-fit: contain;
}

.modal-class-details {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.modal-class-details .class-name {
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--text-primary);
}

.modal-class-details .weapon-slot {
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* Efectos del kit */
.comparison-modal-effects {
    display: flex;
    gap: 10px;
    padding: 12px var(--spacing-lg);
    background: rgba(0, 0, 0, 0.2);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    flex-wrap: wrap;
}

.effect-tag {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 20px;
    font-size: 0.8rem;
}

.effect-tag.sheen {
    border: 1px solid var(--effect-color);
}

.effect-tag.killstreaker {
    background: rgba(255, 215, 0, 0.1);
    border: 1px solid rgba(255, 215, 0, 0.3);
    color: #FFD700;
}

.effect-tag .effect-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
}

/* Body del modal */
.comparison-modal-body {
    padding: var(--spacing-lg);
    overflow-y: auto;
    flex: 1;
}

.modal-section-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 var(--spacing-md) 0;
}

/* Mensaje vacío */
.comparison-modal-empty {
    text-align: center;
    padding: var(--spacing-xl);
    color: var(--text-muted);
}

.comparison-modal-empty .empty-icon {
    font-size: 3rem;
    display: block;
    margin-bottom: var(--spacing-sm);
    opacity: 0.5;
}

.comparison-modal-empty p {
    font-size: 1rem;
    margin: 0 0 8px 0;
}

.comparison-modal-empty small {
    font-size: 0.85rem;
    opacity: 0.7;
}

/* Opciones de venta */
.comparison-modal-options {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.comparison-modal-option {
    background: rgba(0, 0, 0, 0.3);
    border-radius: var(--radius-md);
    border: 1px solid rgba(255, 255, 255, 0.08);
    padding: var(--spacing-md);
    display: grid;
    grid-template-columns: auto 1fr auto;
    grid-template-rows: auto auto;
    gap: var(--spacing-sm) var(--spacing-md);
    align-items: start;
    transition: all 0.2s ease;
}

.comparison-modal-option:hover {
    background: rgba(0, 0, 0, 0.4);
    border-color: var(--store-color, rgba(255, 255, 255, 0.15));
}

.comparison-modal-option.rank-1 {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.02));
    border-color: rgba(255, 215, 0, 0.3);
}

.comparison-modal-option.rank-2 {
    background: linear-gradient(135deg, rgba(192, 192, 192, 0.08), rgba(192, 192, 192, 0.02));
    border-color: rgba(192, 192, 192, 0.25);
}

.comparison-modal-option.rank-3 {
    background: linear-gradient(135deg, rgba(205, 127, 50, 0.08), rgba(205, 127, 50, 0.02));
    border-color: rgba(205, 127, 50, 0.25);
}

/* Rank medal */
.option-rank {
    font-size: 2rem;
    grid-row: span 2;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Store info */
.option-store {
    display: flex;
    align-items: center;
    gap: 10px;
}

.option-store-logo {
    width: 28px;
    height: 28px;
    object-fit: contain;
    border-radius: 4px;
}

.option-store-name {
    font-weight: 600;
    font-size: 1rem;
    color: var(--text-primary);
}

.demand-bonus-tag {
    font-size: 0.7rem;
    padding: 2px 8px;
    background: rgba(76, 175, 80, 0.2);
    color: var(--success);
    border-radius: 10px;
}

/* Prices */
.option-prices {
    display: flex;
    flex-direction: column;
    gap: 4px;
    text-align: right;
}

.option-price-main,
.option-price-fee,
.option-price-net {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    font-size: 0.85rem;
}

.option-prices .price-label {
    color: var(--text-muted);
}

.option-prices .price-value {
    font-weight: 500;
    min-width: 100px;
    text-align: right;
}

.option-price-main .price-value {
    color: var(--text-primary);
    font-size: 1rem;
}

.option-price-fee .price-value.negative {
    color: var(--danger);
}

.option-price-net .price-value.highlight {
    color: var(--success);
    font-weight: 600;
    font-size: 1rem;
}

.option-price-net.no-fee {
    color: var(--success);
}

.option-price-net .price-value.check {
    color: var(--success);
}

/* Conversions */
.option-conversions {
    grid-column: 2 / -1;
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding-top: var(--spacing-sm);
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    flex-wrap: wrap;
}

.conversion-title {
    color: var(--text-muted);
    font-size: 0.75rem;
}

.conversion-item {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
}

.conv-value {
    color: var(--text-primary);
    font-weight: 500;
}

.conv-label {
    color: var(--text-muted);
    font-size: 0.7rem;
}

/* More options */
.comparison-modal-more {
    text-align: center;
    padding: var(--spacing-sm);
    color: var(--text-muted);
    font-size: 0.85rem;
}

/* Footer */
.comparison-modal-footer {
    padding: var(--spacing-md) var(--spacing-lg);
    background: rgba(0, 0, 0, 0.2);
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    text-align: center;
}

.modal-disclaimer {
    color: var(--text-muted);
    font-size: 0.8rem;
}

/* Responsive */
@media (max-width: 600px) {
    .price-comparison-modal {
        width: 95%;
        max-height: 90vh;
    }
    
    .comparison-modal-header {
        flex-direction: column;
        gap: var(--spacing-sm);
    }
    
    .modal-kit-icon {
        width: 48px;
        height: 48px;
    }
    
    .modal-weapon-name {
        font-size: 1.1rem;
    }
    
    .comparison-modal-option {
        grid-template-columns: auto 1fr;
        grid-template-rows: auto auto auto;
    }
    
    .option-prices {
        grid-column: 1 / -1;
        text-align: left;
    }
    
    .option-conversions {
        grid-column: 1 / -1;
    }
}

/* Recomendaciones de venta */
.mykit-recommendations {
    margin-bottom: var(--spacing-md);
}

.mykit-recommendations h4 {
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-sm);
}

.sell-recommendation {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: 8px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: var(--radius-sm);
    margin-bottom: 4px;
}

.sell-recommendation[data-rating="5"],
.sell-recommendation[data-rating="4"] {
    background: rgba(255, 215, 0, 0.08);
}

.rec-icon {
    font-size: 1.1rem;
    width: 28px;
    text-align: center;
}

.rec-info {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.rec-market {
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-main);
}

.rec-note {
    font-size: 0.7rem;
    color: var(--text-muted);
}

.rec-stars {
    font-size: 0.75rem;
    color: var(--god-tier);
    letter-spacing: 1px;
}

/* Footer del kit */
.mykit-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-color);
    font-size: 0.8rem;
    color: var(--text-muted);
}

.kit-cost {
    color: var(--success);
    font-weight: 500;
}

/* Acciones del kit */
.mykit-actions {
    position: absolute;
    top: var(--spacing-md);
    right: var(--spacing-md);
    display: flex;
    gap: 4px;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.mykit-card:hover .mykit-actions {
    opacity: 1;
}

.mykit-action-btn {
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.9rem;
}

.mykit-action-btn:hover {
    background: rgba(255, 255, 255, 0.1);
}

.mykit-action-btn.delete:hover {
    background: rgba(231, 76, 60, 0.3);
    border-color: #E74C3C;
}

/* Estado vacío */
.mykits-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-xl) * 2;
    text-align: center;
    color: var(--text-muted);
}

.mykits-empty .empty-icon {
    font-size: 4rem;
    margin-bottom: var(--spacing-md);
    opacity: 0.5;
}

.mykits-empty h3 {
    font-size: 1.2rem;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-sm);
}

.mykits-empty p {
    font-size: 0.9rem;
}

.no-results-message {
    grid-column: 1 / -1;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--spacing-xl);
    color: var(--text-muted);
}

.no-results-message span {
    font-size: 2rem;
    margin-bottom: var(--spacing-sm);
}

/* Responsive */
@media (max-width: 768px) {
    .popularity-tabs-nav {
        flex-direction: column;
    }
    
    .popularity-tab-btn {
        justify-content: flex-start;
        padding: var(--spacing-md);
    }
    
    .popularity-tab-btn.active::after {
        width: 3px;
        height: auto;
        top: 0;
        bottom: 0;
        left: auto;
        right: 0;
    }
    
    .effects-grid {
        grid-template-columns: 1fr;
    }
    
    .effects-legend {
        flex-direction: column;
        align-items: flex-start;
    }
}

/* =============================================
   SISTEMA DE VALORACIÓN DE COMBINACIONES
   ============================================= */

.valuation-section {
    margin-top: var(--spacing-xl);
    padding-top: var(--spacing-xl);
    border-top: 2px solid var(--border-inactive);
}

/* Pestañas de Clases para Valoración */
.class-tabs-container {
    margin-bottom: var(--spacing-lg);
    overflow-x: auto;
}

.class-tabs {
    display: flex;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm);
    background: var(--bg-card);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-inactive);
    min-width: fit-content;
}

.class-tab {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: var(--spacing-sm) var(--spacing-md);
    background: transparent;
    border: 2px solid transparent;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all var(--transition-fast);
    min-width: 70px;
    color: var(--text-primary);
}

.class-tab:hover {
    background: var(--bg-tertiary);
    border-color: var(--border-inactive);
}

.class-tab.active {
    background: rgba(255, 214, 0, 0.5); /* amarillo con opacidad */
    border-color: var(--accent-gold);
    color: #000;
}

/* Colores por rol de clase */
.class-tab.role-offensive {
    border-bottom: 3px solid #E74C3C;
}
.class-tab.role-offensive:hover {
    background: rgba(231, 76, 60, 0.15);
    border-color: #E74C3C;
}
.class-tab.role-offensive.active {
    background: #E74C3C;
    border-color: #E74C3C;
    color: #fff;
}

.class-tab.role-defensive {
    border-bottom: 3px solid #3498DB;
}
.class-tab.role-defensive:hover {
    background: rgba(52, 152, 219, 0.15);
    border-color: #3498DB;
}
.class-tab.role-defensive.active {
    background: #3498DB;
    border-color: #3498DB;
    color: #fff;
}

.class-tab.role-support {
    border-bottom: 3px solid #2ECC71;
}
.class-tab.role-support:hover {
    background: rgba(46, 204, 113, 0.15);
    border-color: #2ECC71;
}
.class-tab.role-support.active {
    background: #2ECC71;
    border-color: #2ECC71;
    color: #fff;
}

/* Icon images en tabs */
.class-tab .tab-icon-img {
    width: 28px;
    height: 28px;
    object-fit: contain;
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.3));
}

.class-tab .tab-icon-img.logo-icon {
    width: 32px;
    height: 32px;
}

.class-tab.active .tab-icon-img {
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)) brightness(1.1);
}

.class-tab .tab-icon {
    font-size: 1.4rem;
}

.class-tab .tab-name {
    font-size: 0.65rem;
    font-weight: 600;
    text-transform: uppercase;
    white-space: nowrap;
}

/* Matrix Sub-tabs */
.matrix-tabs {
    display: flex;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-inactive);
}

.matrix-tab {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm) var(--spacing-md);
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-fast);
    font-size: 0.9rem;
    font-weight: 500;
}

.matrix-tab:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

.matrix-tab.active {
    background: var(--accent-gold);
    color: #000;
}

.matrix-tab span {
    font-size: 1rem;
}

.matrix-tab-panel {
    display: none;
}

.matrix-tab-panel.active {
    display: block;
}

.matrix-tab-panel .card-header {
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 1px solid var(--border-inactive);
}

.panel-subtitle {
    color: var(--text-muted);
    font-size: 0.85rem;
    margin-top: var(--spacing-xs);
}

/* Weapons Demand Grid */
.weapons-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    max-height: 600px;
    overflow-y: auto;
}

.weapon-demand-card {
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    overflow: hidden;
    border: 1px solid var(--border-inactive);
}

.weapon-demand-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-inactive);
}

.weapon-demand-header .class-icon {
    font-size: 1.5rem;
}

.weapon-demand-header .class-name {
    font-weight: 600;
    flex: 1;
}

.weapon-demand-list {
    padding: var(--spacing-sm);
}

.weapon-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--radius-xs);
    margin-bottom: var(--spacing-xs);
    transition: background var(--transition-fast);
}

.weapon-item:hover {
    background: var(--bg-secondary);
}

.weapon-item .slot-icon {
    font-size: 0.9rem;
    opacity: 0.7;
}

.weapon-item .weapon-name {
    flex: 1;
    font-size: 0.85rem;
}

.weapon-item .tier-badge {
    padding: 2px 8px;
    border-radius: var(--radius-xs);
    font-size: 0.7rem;
    font-weight: 600;
}

.tier-badge.tier-S { background: #FFD700; color: #000; }
.tier-badge.tier-A { background: #FF6B6B; color: #fff; }
.tier-badge.tier-B { background: #9370DB; color: #fff; }
.tier-badge.tier-C { background: #5DADE2; color: #fff; }
.tier-badge.tier-D { background: #7E7E7E; color: #fff; }

/* Combined Analysis */
.combined-analysis-container {
    padding: var(--spacing-lg);
}

.combined-selectors {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.selector-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.selector-group label {
    font-size: 0.8rem;
    color: var(--text-secondary);
    font-weight: 500;
}

.selector-group select {
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.9rem;
}

.combined-result {
    min-height: 300px;
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
}

.analysis-placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 250px;
    color: var(--text-muted);
    text-align: center;
}

.analysis-placeholder .placeholder-icon {
    font-size: 3rem;
    margin-bottom: var(--spacing-md);
    opacity: 0.5;
}

/* Combined Result Card */
.combined-result-card {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-lg);
}

.result-visual {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-lg);
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
}

.result-combo {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.result-combo img {
    width: 50px;
    height: 50px;
    border-radius: var(--radius-sm);
    background: var(--bg-tertiary);
    padding: 4px;
}

.result-tier-large {
    font-size: 2rem;
    padding: var(--spacing-sm) var(--spacing-lg);
    border-radius: var(--radius-md);
    font-weight: 700;
}

.result-details {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.detail-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm);
    background: var(--bg-secondary);
    border-radius: var(--radius-sm);
}

.detail-label {
    color: var(--text-secondary);
    font-size: 0.85rem;
}

.detail-value {
    font-weight: 600;
}

/* Selling Strategies */
.selling-strategies {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-md);
    margin-top: var(--spacing-lg);
}

.strategy-card {
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
    border: 2px solid var(--border-inactive);
    text-align: center;
    transition: all var(--transition-fast);
}

.strategy-card:hover {
    transform: translateY(-2px);
}

.strategy-card.fast {
    border-color: #4CAF50;
    background: rgba(76, 175, 80, 0.1);
}

.strategy-card.suggested {
    border-color: #FF9800;
    background: rgba(255, 152, 0, 0.1);
}

.strategy-card.collector {
    border-color: #9C27B0;
    background: rgba(156, 39, 176, 0.1);
}

.strategy-icon {
    font-size: 2rem;
    margin-bottom: var(--spacing-sm);
}

.strategy-name {
    font-weight: 600;
    margin-bottom: var(--spacing-xs);
}

.strategy-price {
    font-size: 1.2rem;
    font-weight: 700;
    margin: var(--spacing-sm) 0;
}

.strategy-days {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.strategy-platforms {
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-top: var(--spacing-xs);
}

/* Weapon Demand Grid - Class Icon Image */
.class-icon-img {
    width: 32px;
    height: 32px;
    object-fit: contain;
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.3));
}

.weapon-demand-header .class-icon-img {
    width: 36px;
    height: 36px;
}

.role-badge {
    padding: 2px 8px;
    border-radius: var(--radius-xs);
    font-size: 0.65rem;
    font-weight: 600;
    color: #fff;
    text-transform: uppercase;
}

/* Kit Type Info Badges */
.kit-type-info {
    margin-bottom: var(--spacing-md);
}

.kit-type-badge {
    display: none;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
}

.kit-type-badge.basic {
    background: rgba(128, 128, 128, 0.2);
    border-left: 3px solid #808080;
}

.kit-type-badge.specialized {
    background: rgba(255, 193, 7, 0.2);
    border-left: 3px solid #FFC107;
}

.kit-type-badge.professional {
    background: rgba(156, 39, 176, 0.2);
    border-left: 3px solid #9C27B0;
}

.badge-icon {
    font-size: 1.2rem;
}

/* Kit Type Header in Result */
.kit-type-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-sm);
    font-weight: 600;
    width: 100%;
    justify-content: center;
}

.kit-type-header.basic {
    background: rgba(128, 128, 128, 0.3);
    color: #ccc;
}

.kit-type-header.specialized {
    background: rgba(255, 193, 7, 0.3);
    color: #FFC107;
}

.kit-type-header.professional {
    background: rgba(156, 39, 176, 0.3);
    color: #CE93D8;
}

.kit-type-icon {
    font-size: 1.4rem;
}

/* Result Weapon with Image */
.result-weapon {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
    justify-content: center;
}

.result-weapon .class-icon-img {
    width: 48px;
    height: 48px;
}

.result-weapon .weapon-label {
    font-weight: 600;
    font-size: 1.1rem;
}

/* Combo Visual */
.combo-visual {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    width: 100%;
    justify-content: center;
}

.combo-visual.basic .combo-label {
    color: var(--text-muted);
    font-style: italic;
}

.sheen-preview {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--radius-sm);
}

.sheen-color-dot {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    box-shadow: 0 0 8px currentColor;
}

.combo-plus {
    font-size: 1.5rem;
    color: var(--text-muted);
}

.killstreaker-preview {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-secondary);
    border-radius: var(--radius-sm);
}

.killstreaker-preview img {
    width: 32px;
    height: 32px;
}

/* Multiplier Info */
.multiplier-info {
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    font-size: 0.9rem;
}

/* Kit Type Selector Highlight */
.selector-group.kit-type-selector select {
    font-weight: 600;
    border-width: 2px;
}

.selector-group.kit-type-selector select:focus {
    border-color: var(--accent-gold);
}

.valuation-header {
    text-align: center;
    margin-bottom: var(--spacing-xl);
}

.valuation-header h2 {
    font-family: 'Russo One', sans-serif;
    font-size: 1.8rem;
    margin-bottom: var(--spacing-sm);
    background: linear-gradient(135deg, var(--accent-gold), #FFA500);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.valuation-subtitle {
    color: var(--text-secondary);
    font-size: 0.95rem;
}

/* Valuation Grid */
.valuation-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: var(--spacing-lg);
    margin-bottom: var(--spacing-lg);
}

.valuation-card {
    background: var(--bg-card);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-md);
    overflow: hidden;
}

.valuation-card .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-inactive);
}

.valuation-card .card-header h3 {
    margin: 0;
    font-size: 1.1rem;
}

.card-badge {
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--radius-xs);
    font-size: 0.75rem;
    font-weight: 600;
    background: var(--accent-gold);
    color: #000;
}

.card-badge.warning {
    background: #FF6B6B;
    color: white;
}

/* Top Combos List */
.top-combos-list,
.bottom-combos-list {
    padding: var(--spacing-md);
}

.top-combo-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    margin-bottom: var(--spacing-sm);
    border-left: 4px solid var(--accent-gold);
    transition: all var(--transition-fast);
}

.top-combo-item:hover {
    transform: translateX(4px);
    background: var(--bg-secondary);
}

.top-combo-item.rank-1 {
    border-left-color: #FFD700;
    background: linear-gradient(90deg, rgba(255,215,0,0.1) 0%, transparent 100%);
}

.top-combo-item.rank-2 {
    border-left-color: #C0C0C0;
}

.top-combo-item.rank-3 {
    border-left-color: #CD7F32;
}

.combo-rank {
    font-family: 'Russo One', sans-serif;
    font-size: 1.2rem;
    color: var(--accent-gold);
    min-width: 35px;
}

.combo-visuals {
    display: flex;
    align-items: center;
    gap: 4px;
}

.combo-visuals.small {
    transform: scale(0.85);
}

.combo-sheen-img,
.combo-ks-img {
    width: 40px;
    height: 40px;
    object-fit: contain;
    border-radius: var(--radius-xs);
    background: var(--bg-secondary);
    padding: 2px;
}

.combo-plus {
    color: var(--text-muted);
    font-size: 0.8rem;
}

.combo-info {
    flex: 1;
    min-width: 0;
}

.combo-names {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-size: 0.9rem;
    margin-bottom: 4px;
}

.combo-names.small {
    font-size: 0.85rem;
}

.combo-names .separator {
    color: var(--text-muted);
}

.combo-meta {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
}

.combo-tier {
    padding: 2px 8px;
    border-radius: var(--radius-xs);
    font-size: 0.7rem;
    font-weight: 700;
    color: #000;
}

.combo-premium {
    font-weight: 700;
    font-size: 0.85rem;
    color: var(--status-ready);
}

.combo-premium.negative {
    color: var(--accent-red);
}

.combo-demand {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.combo-demand.demand-very-high { color: var(--status-ready); }
.combo-demand.demand-high { color: #4CAF50; }
.combo-demand.demand-medium { color: var(--accent-gold); }
.combo-demand.demand-low { color: var(--text-muted); }

/* Bottom Combos */
.bottom-combo-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    margin-bottom: var(--spacing-sm);
    border-left: 4px solid var(--text-muted);
}

.combo-warning {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 0.7rem;
    color: #FF6B6B;
    white-space: nowrap;
}

/* Combo Matrix */
.full-combos {
    margin-bottom: var(--spacing-lg);
}

.filter-controls {
    display: flex;
    gap: var(--spacing-xs);
    flex-wrap: wrap;
}

.filter-btn {
    padding: 4px 10px;
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-xs);
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    font-size: 0.75rem;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.filter-btn:hover {
    border-color: var(--accent-gold);
    color: var(--text-main);
}

.filter-btn.active {
    background: var(--accent-gold);
    color: #000;
    border-color: var(--accent-gold);
}

.combo-matrix-container {
    overflow-x: auto;
    padding: var(--spacing-md);
}

.combo-matrix {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.8rem;
}

.combo-matrix th,
.combo-matrix td {
    padding: var(--spacing-sm);
    text-align: center;
    border: 1px solid var(--border-inactive);
}

.combo-matrix .corner-cell {
    background: var(--bg-tertiary);
    font-weight: 600;
    font-size: 0.7rem;
    color: var(--text-muted);
    min-width: 120px;
}

.combo-matrix .ks-header,
.combo-matrix .sheen-header {
    background: var(--bg-tertiary);
    padding: var(--spacing-xs);
}

.matrix-img {
    width: 32px;
    height: 32px;
    object-fit: contain;
    display: block;
    margin: 0 auto 4px;
}

.header-name {
    font-size: 0.7rem;
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.combo-cell {
    min-width: 70px;
    cursor: default;
    transition: all var(--transition-fast);
}

.combo-cell:hover {
    transform: scale(1.05);
    z-index: 10;
    position: relative;
}

.combo-cell.tier-S { background: rgba(255, 215, 0, 0.2); }
.combo-cell.tier-A { background: rgba(255, 107, 107, 0.2); }
.combo-cell.tier-B { background: rgba(147, 112, 219, 0.2); }
.combo-cell.tier-C { background: rgba(93, 173, 226, 0.15); }
.combo-cell.tier-D { background: rgba(126, 126, 126, 0.15); }

.combo-cell.filtered-out {
    opacity: 0.2;
}

.cell-tier {
    display: block;
    font-size: 1.1rem;
}

.cell-multiplier {
    display: block;
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--text-secondary);
}

.combo-cell.tier-S .cell-multiplier { color: var(--accent-gold); }
.combo-cell.tier-A .cell-multiplier { color: #FF6B6B; }
.combo-cell.tier-D .cell-multiplier { color: var(--text-muted); }

/* Specialized Sheens Grid */
.specialized-sheens {
    margin-bottom: var(--spacing-lg);
}

.sheens-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-md);
    padding: var(--spacing-md);
}

.sheen-valuation-card {
    display: flex;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--border-inactive);
    transition: all var(--transition-fast);
}

.sheen-valuation-card:hover {
    background: var(--bg-secondary);
}

.sheen-valuation-card.tier-S { border-left-color: #FFD700; }
.sheen-valuation-card.tier-A { border-left-color: #FF6B6B; }
.sheen-valuation-card.tier-B { border-left-color: #9370DB; }
.sheen-valuation-card.tier-C { border-left-color: #5DADE2; }
.sheen-valuation-card.tier-D { border-left-color: #7E7E7E; }

.sheen-visual {
    position: relative;
    flex-shrink: 0;
}

.sheen-img {
    width: 60px;
    height: 60px;
    object-fit: contain;
    background: var(--bg-secondary);
    border-radius: var(--radius-sm);
    padding: 4px;
}

.sheen-tier-badge {
    position: absolute;
    bottom: -4px;
    right: -4px;
    padding: 2px 6px;
    border-radius: var(--radius-xs);
    font-size: 0.7rem;
    font-weight: 700;
    color: #000;
}

.sheen-details {
    flex: 1;
    min-width: 0;
}

.sheen-details h4 {
    margin: 0 0 var(--spacing-xs) 0;
    font-size: 1rem;
}

.sheen-stats {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-xs);
}

.sheen-stats .stat {
    display: flex;
    flex-direction: column;
}

.stat-label {
    font-size: 0.65rem;
    color: var(--text-muted);
    text-transform: uppercase;
}

.stat-value {
    font-size: 0.8rem;
    font-weight: 600;
}

.stat-value.positive { color: var(--status-ready); }
.stat-value.negative { color: var(--accent-red); }
.stat-value.demand-very-high { color: var(--status-ready); }
.stat-value.demand-high { color: #4CAF50; }
.stat-value.demand-medium { color: var(--accent-gold); }
.stat-value.demand-low { color: var(--text-muted); }
.stat-value.speed-fast { color: var(--status-ready); }
.stat-value.speed-medium { color: var(--accent-gold); }
.stat-value.speed-slow { color: var(--text-muted); }

.sheen-note {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-style: italic;
    margin: 0;
}

/* Valuation Legend */
.valuation-legend {
    background: var(--bg-card);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
}

.valuation-legend h4 {
    margin: 0 0 var(--spacing-md) 0;
    font-size: 1rem;
    color: var(--text-secondary);
}

.legend-items {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
}

.legend-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
}

.legend-item.tier-S { border-left: 3px solid #FFD700; }
.legend-item.tier-A { border-left: 3px solid #FF6B6B; }
.legend-item.tier-B { border-left: 3px solid #9370DB; }
.legend-item.tier-C { border-left: 3px solid #5DADE2; }
.legend-item.tier-D { border-left: 3px solid #7E7E7E; }

.legend-icon {
    font-size: 1.2rem;
}

.legend-info {
    flex: 1;
}

.legend-label {
    display: block;
    font-weight: 600;
    font-size: 0.9rem;
}

.legend-desc {
    display: block;
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* Responsive */
@media (max-width: 768px) {
    .valuation-grid {
        grid-template-columns: 1fr;
    }
    
    .combo-visuals {
        transform: scale(0.8);
    }
    
    .sheens-grid {
        grid-template-columns: 1fr;
    }
    
    .filter-controls {
        justify-content: center;
    }
}

/* ===== CALCULADORA ===== */
.calculator-layout {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: var(--spacing-xl);
}

.calc-panel {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    overflow: hidden;
    box-shadow: var(--shadow-md);
}

/* Config Grid */
.config-grid {
    padding: var(--spacing-lg);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.config-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm);
    background: var(--bg-input);
    border-radius: var(--radius-sm);
}

.config-item.highlight {
    background: rgba(255, 215, 0, 0.1);
    border: 1px solid var(--god-tier);
}

.config-item label {
    font-weight: 600;
    color: var(--text-secondary);
}

.config-input {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.config-input input {
    width: 80px;
    padding: var(--spacing-sm);
    background: var(--bg-card);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-sm);
    color: var(--text-main);
    font-size: 1rem;
    text-align: right;
}

.config-input input:focus {
    outline: none;
    border-color: var(--accent-blu);
}

.config-input span {
    color: var(--text-muted);
    font-size: 0.9rem;
}

.btn-calculate {
    margin: 0 var(--spacing-lg) var(--spacing-lg);
    padding: var(--spacing-md);
    background: var(--accent-blu);
    border: none;
    border-radius: var(--radius-sm);
    color: white;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    transition: all var(--transition-normal);
}

.btn-calculate:hover {
    background: #3385ff;
    transform: translateY(-2px);
}

/* Results Breakdown */
.results-breakdown {
    padding: var(--spacing-lg);
}

.breakdown-item {
    display: grid;
    grid-template-columns: 1fr auto auto;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    border-bottom: 1px solid var(--border-inactive);
    align-items: center;
}

.breakdown-item.highlight {
    background: rgba(255, 215, 0, 0.1);
    border-radius: var(--radius-sm);
    border: none;
    margin-bottom: var(--spacing-sm);
}

.breakdown-label {
    color: var(--text-secondary);
}

.breakdown-count {
    color: var(--text-main);
    font-weight: 600;
    text-align: right;
}

.breakdown-value {
    color: var(--accent-blu);
    font-weight: 700;
    text-align: right;
    min-width: 80px;
}

.breakdown-total {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-lg);
    background: linear-gradient(135deg, var(--accent-red) 0%, #cc3333 100%);
    border-radius: var(--radius-sm);
    margin-top: var(--spacing-md);
}

.total-label {
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.total-value {
    font-size: 1.5rem;
    font-weight: 900;
}

.breakdown-conversion {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-md);
    background: rgba(255, 215, 0, 0.1);
    border-radius: var(--radius-sm);
    margin-top: var(--spacing-md);
    border: 1px solid var(--god-tier);
}

.conversion-label {
    color: var(--text-secondary);
}

.conversion-value {
    color: var(--god-tier);
    font-weight: 700;
    font-size: 1.2rem;
}

/* ===== FOOTER ===== */
.main-footer {
    text-align: center;
    padding: var(--spacing-lg);
    color: var(--text-muted);
    font-size: 0.85rem;
    border-top: 1px solid var(--border-inactive);
    margin-top: var(--spacing-xl);
}

/* ===== MODAL ===== */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.modal-overlay.active {
    display: flex;
}

.modal-content {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    width: 90%;
    max-width: 400px;
    box-shadow: var(--shadow-lg);
    animation: modalSlide 0.3s ease;
}

@keyframes modalSlide {
    from { opacity: 0; transform: scale(0.9); }
    to { opacity: 1; transform: scale(1); }
}

.modal-header {
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--border-inactive);
}

.modal-header h3 {
    font-size: 1.2rem;
}

.modal-body {
    padding: var(--spacing-lg);
    color: var(--text-secondary);
}

.modal-footer {
    padding: var(--spacing-lg);
    display: flex;
    gap: var(--spacing-md);
    justify-content: flex-end;
    border-top: 1px solid var(--border-inactive);
}

.btn-cancel,
.btn-confirm {
    padding: var(--spacing-sm) var(--spacing-lg);
    border: none;
    border-radius: var(--radius-sm);
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-cancel {
    background: var(--bg-input);
    color: var(--text-secondary);
    border: 1px solid var(--border-inactive);
}

.btn-cancel:hover {
    background: var(--bg-card-hover);
}

.btn-confirm {
    background: var(--accent-red);
    color: white;
}

.btn-confirm:hover {
    background: #ff5555;
}

/* ===== TOAST NOTIFICATIONS ===== */
.toast-container {
    position: fixed;
    bottom: var(--spacing-lg);
    right: var(--spacing-lg);
    z-index: 1001;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.toast {
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    padding: var(--spacing-md) var(--spacing-lg);
    box-shadow: var(--shadow-lg);
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    animation: toastSlide 0.3s ease;
    border-left: 4px solid var(--accent-blu);
}

.toast.success {
    border-left-color: var(--status-ready);
}

.toast.error {
    border-left-color: var(--accent-red);
}

.toast.warning {
    border-left-color: var(--status-pending);
}

@keyframes toastSlide {
    from { opacity: 0; transform: translateX(100px); }
    to { opacity: 1; transform: translateX(0); }
}

.toast-icon {
    font-size: 1.2rem;
}

.toast-message {
    color: var(--text-main);
    font-weight: 500;
}

/* =============================================
   MODAL DE VISTA PREVIA DE IMAGEN
   ============================================= */

.image-preview-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.9);
    z-index: 2000;
    justify-content: center;
    align-items: center;
    padding: var(--spacing-xl);
}

.image-preview-modal.active {
    display: flex;
    animation: fadeIn 0.2s ease;
}

.preview-content {
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    max-width: 600px;
    width: 100%;
    max-height: 90vh;
    overflow: hidden;
    position: relative;
    animation: scaleIn 0.3s ease;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

@keyframes scaleIn {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.preview-close {
    position: absolute;
    top: var(--spacing-md);
    right: var(--spacing-md);
    background: var(--bg-tertiary);
    border: none;
    color: var(--text-muted);
    font-size: 1.8rem;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
    z-index: 10;
}

.preview-close:hover {
    background: var(--accent-red);
    color: white;
    transform: rotate(90deg);
}

.preview-image-container {
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
    padding: var(--spacing-xl);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 250px;
}

.preview-image {
    max-width: 200px;
    max-height: 200px;
    object-fit: contain;
    animation: pulseGlow 2s ease-in-out infinite;
}

@keyframes pulseGlow {
    0%, 100% { filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.3)); }
    50% { filter: drop-shadow(0 0 25px rgba(255, 215, 0, 0.6)); }
}

.preview-info {
    padding: var(--spacing-lg);
}

.preview-info h3 {
    margin: 0 0 var(--spacing-md) 0;
    font-size: 1.5rem;
    font-family: 'Russo One', sans-serif;
}

.preview-tier {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    font-weight: 700;
    color: #000;
    margin-bottom: var(--spacing-md);
}

.preview-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.preview-stat {
    background: var(--bg-tertiary);
    padding: var(--spacing-sm);
    border-radius: var(--radius-sm);
}

.preview-stat .stat-label {
    display: block;
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
    margin-bottom: 2px;
}

.preview-stat .stat-value {
    font-weight: 600;
    font-size: 0.9rem;
}

.preview-stat .stat-value.positive { color: var(--status-ready); }
.preview-stat .stat-value.negative { color: var(--accent-red); }

.color-swatch {
    display: inline-block;
    width: 14px;
    height: 14px;
    border-radius: 3px;
    vertical-align: middle;
    margin-right: 4px;
    border: 1px solid rgba(255,255,255,0.2);
}

.preview-note {
    font-size: 0.9rem;
    color: var(--text-secondary);
    font-style: italic;
    margin: 0;
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--accent-gold);
}

.preview-variants {
    margin-top: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
}

.variant-label {
    display: block;
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-bottom: var(--spacing-sm);
}

.variant-images {
    display: flex;
    gap: var(--spacing-md);
    justify-content: center;
}

.variant-img {
    width: 80px;
    height: 80px;
    object-fit: contain;
    background: var(--bg-secondary);
    border-radius: var(--radius-sm);
    padding: var(--spacing-xs);
    transition: transform var(--transition-fast);
}

.variant-img:hover {
    transform: scale(1.1);
}

/* =============================================
   CLICKABLE PREVIEW IMAGES (Hover Effects)
   ============================================= */

.clickable-preview {
    cursor: pointer;
    transition: all var(--transition-fast);
}

.clickable-preview:hover {
    transform: scale(1.15);
    filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.6));
    z-index: 10;
    position: relative;
}

.combo-sheen-img.clickable-preview:hover,
.combo-ks-img.clickable-preview:hover {
    animation: hoverPulse 0.5s ease;
}

@keyframes hoverPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1.15); }
}

.matrix-img.clickable-preview {
    cursor: pointer;
}

.matrix-img.clickable-preview:hover {
    transform: scale(1.3);
    filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.8));
}

.sheen-img.clickable-preview:hover {
    transform: scale(1.1);
    filter: drop-shadow(0 0 12px rgba(255, 215, 0, 0.7));
}

/* ===== SCROLLBAR PERSONALIZADO ===== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--bg-main);
}

::-webkit-scrollbar-thumb {
    background: var(--border-inactive);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--text-muted);
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
    .main-header {
        flex-direction: column;
        gap: var(--spacing-md);
        text-align: center;
    }
    
    .logo h1 {
        font-size: 1.4rem;
    }
    
    .tab-navigation {
        overflow-x: auto;
        padding: var(--spacing-sm);
    }
    
    .tab-btn {
        padding: var(--spacing-sm) var(--spacing-md);
        font-size: 0.85rem;
        white-space: nowrap;
    }
    
    .main-container {
        padding: var(--spacing-md);
    }
    
    .section-header {
        flex-direction: column;
        gap: var(--spacing-md);
        align-items: flex-start;
    }
    
    .filter-buttons {
        width: 100%;
        justify-content: center;
    }
}

/* ===== TIER COLORS PARA OPCIONES ===== */
.tier-god {
    color: var(--god-tier) !important;
}

.tier-high {
    color: var(--high-tier) !important;
}

/* Sheen/Killstreaker color indicators */
.sheen-indicator,
.effect-indicator {
    display: inline-block;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-right: var(--spacing-xs);
    vertical-align: middle;
}

/* ===== IMÁGENES DE ITEMS ===== */

/* Part Card Images */
.part-card {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
}

.part-image {
    width: 48px;
    height: 48px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-input);
    border-radius: var(--radius-sm);
    overflow: hidden;
}

.part-image img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    image-rendering: pixelated;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

/* Stock Item Images */
.stock-icon.with-img {
    padding: 4px;
    background: var(--bg-main);
    border: 1px solid var(--border-inactive);
}

.stock-icon.with-img img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    image-rendering: auto;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4));
}

.stock-item.has-image {
    padding: var(--spacing-md) var(--spacing-sm);
}

.stock-item.has-image .stock-icon {
    width: 56px;
    height: 56px;
}

/* Currency Icons in Dashboard */
.currency-item .currency-icon img {
    width: 32px;
    height: 32px;
    object-fit: contain;
    vertical-align: middle;
}

/* Project Card Sheen/Effect Images */
.detail-tag img {
    width: 24px;
    height: 24px;
    object-fit: contain;
    vertical-align: middle;
    border-radius: 4px;
}

/* Selector Option Images Preview */
.sheen-preview,
.effect-preview {
    width: 32px;
    height: 32px;
    display: inline-block;
    vertical-align: middle;
    margin-right: var(--spacing-sm);
    border-radius: var(--radius-sm);
    background: var(--bg-input);
    overflow: hidden;
}

.sheen-preview img,
.effect-preview img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

/* Kit Type Images */
.kit-type-icon {
    width: 40px;
    height: 40px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-input);
    border-radius: var(--radius-sm);
    margin-right: var(--spacing-sm);
}

.kit-type-icon img {
    width: 32px;
    height: 32px;
    object-fit: contain;
}

/* Hover Effects for Images */
.part-image:hover img,
.stock-icon.with-img:hover img {
    transform: scale(1.1);
    transition: transform var(--transition-normal);
}

/* Loading State for Images */
.stock-icon img,
.part-image img {
    opacity: 1;
    transition: opacity var(--transition-normal);
}

.stock-icon img[loading],
.part-image img[loading] {
    opacity: 0.5;
}

/* Category Colors for Parts */
.part-tier.pristine,
.stock-category.pristine {
    color: var(--god-tier);
}

.part-tier.reinforced,
.stock-category.reinforced {
    color: var(--accent-blu);
}

.part-tier.battle-worn,
.stock-category.battle-worn {
    color: var(--high-tier);
}

/* ===== TIER SYSTEM (4 LEVELS) ===== */
.tier-god { color: #FFD700 !important; }
.tier-high { color: #FF69B4 !important; }
.tier-mid { color: #9370DB !important; }
.tier-low { color: #7E7E7E !important; }

.tier-badge {
    font-size: 0.7rem;
    margin-left: 4px;
}

/* ===== PARTS BREAKDOWN IN REQUIREMENTS ===== */
.parts-breakdown {
    margin-top: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border-inactive);
}

.parts-breakdown h5 {
    margin-bottom: var(--spacing-sm);
    color: var(--text-secondary);
    font-size: 0.85rem;
}

.breakdown-grid {
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.breakdown-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-input);
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
}

.breakdown-color {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    flex-shrink: 0;
}

.breakdown-label {
    color: var(--text-secondary);
}

.breakdown-value {
    font-weight: 700;
    color: var(--text-main);
    margin-left: var(--spacing-xs);
}

/* ===== PROJECT CARD PARTS BREAKDOWN ===== */
.project-parts-breakdown {
    margin: var(--spacing-md) 0;
    padding: var(--spacing-sm);
    background: var(--bg-main);
    border-radius: var(--radius-sm);
}

.parts-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: 4px 0;
}

.parts-row.complete .parts-category,
.parts-row.complete .parts-count {
    color: var(--status-ready);
}

.parts-category {
    font-size: 0.75rem;
    font-weight: 600;
    width: 80px;
    text-transform: uppercase;
}

.parts-mini-bar {
    flex: 1;
    height: 6px;
    background: var(--bg-card);
    border-radius: 3px;
    overflow: hidden;
}

.parts-mini-fill {
    height: 100%;
    border-radius: 3px;
    transition: width var(--transition-normal);
}

.parts-count {
    font-size: 0.75rem;
    font-weight: 700;
    min-width: 40px;
    text-align: right;
    color: var(--text-secondary);
}

/* ===== PROJECT EXTRAS (Basic Kit info) ===== */
.project-extras {
    margin: var(--spacing-sm) 0;
    padding: var(--spacing-sm);
    background: var(--bg-main);
    border-radius: var(--radius-sm);
}

.extra-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.extra-item.complete {
    color: var(--status-ready);
}

.extra-item.missing {
    color: var(--status-pending);
}

.extra-icon {
    font-size: 1rem;
}

/* ===== FORM CHECKBOX ===== */
.checkbox-group {
    margin-bottom: var(--spacing-md);
}

.checkbox-label {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    cursor: pointer;
    color: var(--text-secondary);
    font-weight: 500;
}

.checkbox-label input[type="checkbox"] {
    width: 20px;
    height: 20px;
    accent-color: var(--accent-blu);
    cursor: pointer;
}

.input-hint {
    display: block;
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-top: var(--spacing-xs);
}

/* ===== SPEC WEAPONS COUNTER ===== */
.spec-weapons-counter {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--bg-input);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border-inactive);
}

.counter-label {
    color: var(--text-secondary);
}

.counter-controls {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.counter-btn {
    width: 32px;
    height: 32px;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 1.2rem;
    font-weight: 700;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.counter-btn.minus {
    background: var(--accent-red);
    color: white;
}

.counter-btn.plus {
    background: var(--accent-blu);
    color: white;
}

.counter-btn:hover {
    transform: scale(1.1);
}

.counter-value {
    font-size: 1.5rem;
    font-weight: 900;
    min-width: 40px;
    text-align: center;
    color: var(--text-main);
}

.counter-value.complete {
    color: var(--status-ready);
}

.counter-max {
    font-size: 0.85rem;
    color: var(--text-muted);
}

/* ===== REQUIREMENTS DETAILS ===== */
.req-details {
    flex: 1;
}

.req-details strong {
    display: block;
    margin-bottom: var(--spacing-sm);
}

.req-weapons {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.req-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.req-mini-img {
    width: 20px;
    height: 20px;
    object-fit: contain;
}
.req-note {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-top: var(--spacing-sm);
    font-style: italic;
}

/* ===== PARTS REQUIREMENTS FORM ===== */
#partsRequirementsGroup {
    display: block !important;
}

#partsRequirementsGroup.visible {
    display: block !important;
}

.parts-requirements-container {
    background: var(--bg-input);
    border: 2px solid var(--accent-gold);
    border-radius: var(--radius-sm);
    padding: var(--spacing-md);
    margin-top: var(--spacing-sm);
    min-height: 100px;
}

.parts-requirements-container .select-kit-msg {
    text-align: center;
    color: var(--text-muted);
    padding: var(--spacing-lg);
    font-style: italic;
}

.parts-limit-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--border-inactive);
}

.parts-limit-header .limit-text {
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.parts-limit-header .total-limit-display {
    display: flex;
    align-items: center;
    gap: 4px;
}

.parts-limit-header .total-display {
    font-size: 1.5rem;
    font-weight: 900;
    color: var(--text-muted);
    min-width: 30px;
    text-align: right;
}

.parts-limit-header .total-display.has-value {
    color: var(--accent-blu);
}

.parts-limit-header .total-display.at-limit {
    color: var(--accent-green);
}

.parts-limit-header .total-display.over-limit {
    color: var(--accent-red);
    animation: pulse-warning 0.5s ease-in-out;
}

.parts-limit-header .limit-separator {
    font-size: 1.2rem;
    color: var(--text-muted);
    font-weight: 300;
}

.parts-limit-header .max-limit {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-secondary);
    padding: 2px 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-xs);
}

@keyframes pulse-warning {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

/* Status message styles */
.parts-status-msg.at-limit {
    color: var(--accent-green) !important;
}

.parts-status-msg.over-limit {
    color: var(--accent-red) !important;
}

.parts-req-grid {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.parts-category-section {
    background: rgba(0, 0, 0, 0.2);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
}

.category-header-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm);
    margin-bottom: 0;
    background: rgba(0, 0, 0, 0.3);
    border-radius: var(--radius-xs);
    cursor: pointer;
    transition: background var(--transition-fast);
}

.category-header-row:hover {
    background: rgba(0, 0, 0, 0.4);
}

.category-header-row.collapsible {
    user-select: none;
}

.category-header-left {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.collapse-icon {
    font-size: 0.75rem;
    color: var(--text-muted);
    transition: transform var(--transition-fast);
    width: 12px;
}

.category-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
}

.category-header-row .category-label {
    margin: 0;
    font-size: 0.85rem;
    font-weight: 700;
    text-transform: uppercase;
}

.category-header-right {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.category-subtotal {
    font-size: 1rem;
    font-weight: 700;
    color: var(--text-muted);
    min-width: 24px;
    text-align: center;
}

.category-subtotal.has-value {
    color: var(--accent-green);
}

.category-subtotal.at-limit {
    color: var(--accent-orange);
}

.category-limit-separator {
    color: var(--text-muted);
    font-size: 0.85rem;
}

.category-max-limit {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-muted);
    padding: 2px 6px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: var(--radius-xs);
}

.category-limit-icon {
    font-size: 0.75rem;
    opacity: 0.7;
    margin-left: 2px;
}

/* Estado cuando la categoría está al límite */
.parts-category-section.at-limit {
    border-color: var(--accent-orange);
    background: rgba(255, 140, 0, 0.05);
}

.parts-category-section.at-limit .category-header-row {
    background: rgba(255, 140, 0, 0.1);
}

.parts-category-section.at-limit .part-req-btn.plus {
    opacity: 0.3;
    cursor: not-allowed;
}

/* Animación de flash al intentar exceder límite */
.parts-category-section.limit-flash {
    animation: limitFlash 0.6s ease;
}

@keyframes limitFlash {
    0%, 100% { background: transparent; }
    25%, 75% { background: rgba(255, 64, 64, 0.15); }
    50% { background: rgba(255, 64, 64, 0.25); }
}

.category-hint {
    font-size: 0.7rem;
    color: var(--text-muted);
}

.category-parts-list {
    display: grid;
    gap: var(--spacing-xs);
    margin-top: var(--spacing-sm);
    padding-top: var(--spacing-sm);
    border-top: 1px solid var(--border-inactive);
    max-height: 500px;
    overflow-y: auto;
    transition: max-height 0.3s ease, opacity 0.3s ease, margin 0.3s ease, padding 0.3s ease;
}

.category-parts-list.collapsed {
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    margin-top: 0;
    padding-top: 0;
    border-top: none;
}

.part-req-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-secondary);
    border-radius: var(--radius-xs);
    margin-bottom: var(--spacing-xs);
}

.part-req-row:last-child {
    margin-bottom: 0;
}

.part-req-img {
    width: 32px;
    height: 32px;
    object-fit: contain;
    flex-shrink: 0;
}

.part-req-name {
    flex: 1;
    font-size: 0.85rem;
    color: var(--text-main);
}

.part-available {
    font-size: 0.75rem;
    padding: 2px 6px;
    border-radius: var(--radius-xs);
    margin-right: var(--spacing-xs);
    font-weight: 600;
}

.part-available.has-stock {
    color: var(--accent-green);
    background: rgba(78, 205, 196, 0.15);
}

.part-available.no-stock {
    color: var(--accent-red);
    background: rgba(255, 107, 107, 0.15);
}

.part-req-counter {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.part-req-btn {
    width: 28px;
    height: 28px;
    border: none;
    border-radius: var(--radius-xs);
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all var(--transition-fast);
    background: var(--bg-tertiary);
    color: var(--text-main);
    display: flex;
    align-items: center;
    justify-content: center;
}

.part-req-btn:hover {
    transform: scale(1.1);
}

.part-req-btn.minus:hover {
    background: var(--accent-red);
    color: white;
}

.part-req-btn.plus:hover {
    background: var(--accent-blu);
    color: white;
}

.part-req-input {
    width: 50px;
    text-align: center;
    padding: var(--spacing-xs);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-xs);
    background: var(--bg-input);
    color: var(--text-main);
    font-size: 1rem;
    font-weight: 700;
}

.part-req-input:focus {
    border-color: var(--accent-gold);
    outline: none;
}

.parts-status-section {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-sm);
    border-top: 1px solid var(--border-inactive);
    text-align: center;
}

.parts-status-msg {
    padding: var(--spacing-sm);
    border-radius: var(--radius-xs);
    font-size: 0.85rem;
    color: var(--text-muted);
    background: rgba(255, 255, 255, 0.03);
}

.parts-status-msg.has-parts {
    color: var(--accent-green);
    background: rgba(76, 175, 80, 0.1);
}

.parts-default-hint {
    margin-top: var(--spacing-xs);
}

.parts-default-hint small {
    color: var(--text-muted);
    font-size: 0.75rem;
}

/* Legacy styles for backward compatibility */
.parts-requirements-grid {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    max-height: 350px;
    overflow-y: auto;
    padding-right: var(--spacing-xs);
    margin-top: var(--spacing-sm);
}

.parts-requirements-grid::-webkit-scrollbar {
    width: 6px;
}

.parts-requirements-grid::-webkit-scrollbar-track {
    background: var(--bg-input);
    border-radius: 3px;
}

.parts-requirements-grid::-webkit-scrollbar-thumb {
    background: var(--border-inactive);
    border-radius: 3px;
}

.parts-category-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-xs);
    margin-top: var(--spacing-sm);
    border-bottom: 1px solid var(--border-inactive);
}

.parts-category-header:first-child {
    margin-top: 0;
}

.category-color {
    width: 12px;
    height: 12px;
    border-radius: 2px;
}

.category-name {
    font-weight: 700;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.part-requirement-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--bg-input);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border-inactive);
}

.part-req-image {
    width: 36px;
    height: 36px;
    flex-shrink: 0;
}

.part-req-image img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.part-req-name {
    flex: 1;
    font-size: 0.85rem;
    color: var(--text-main);
}

.part-req-controls {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.part-req-btn {
    width: 26px;
    height: 26px;
    border: none;
    border-radius: var(--radius-xs);
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all var(--transition-fast);
    background: var(--bg-tertiary);
    color: var(--text-main);
}

.part-req-btn:hover {
    transform: scale(1.1);
}

.part-req-btn.minus:hover {
    background: var(--accent-red);
}

.part-req-btn.plus:hover {
    background: var(--accent-blu);
}

.part-req-input {
    width: 45px;
    text-align: center;
    padding: var(--spacing-xs);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-xs);
    background: var(--bg-secondary);
    color: var(--text-main);
    font-size: 0.9rem;
    font-weight: 700;
}

.part-req-input:focus {
    border-color: var(--accent-gold);
    outline: none;
}

.parts-total-display {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm) var(--spacing-md);
    margin-top: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    font-weight: 600;
    border: 2px solid transparent;
    transition: all var(--transition-fast);
}

.parts-total-display.at-limit {
    border-color: var(--status-ready);
    background: rgba(76, 175, 80, 0.1);
}

.parts-total-display.over-limit {
    border-color: var(--accent-red);
    background: rgba(255, 64, 64, 0.1);
}

.total-counter {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.parts-total-display .total-value {
    font-size: 1.2rem;
    font-weight: 900;
    color: var(--text-muted);
    min-width: 24px;
    text-align: right;
}

.parts-total-display .total-value.has-parts {
    color: var(--accent-gold);
}

.parts-total-display .total-value.at-limit {
    color: var(--status-ready);
}

.total-separator {
    font-size: 1.1rem;
    color: var(--text-muted);
}

.total-limit {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--text-secondary);
}

/* Botón + deshabilitado cuando se alcanza el límite */
.part-req-btn.plus.disabled,
.part-req-btn.plus:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    pointer-events: none;
}

/* Estado incompleto del contenedor */
.parts-total-display.incomplete {
    border-color: var(--accent-gold);
    background: rgba(255, 215, 0, 0.05);
}

.parts-total-display .total-value.incomplete {
    color: var(--accent-gold);
}

/* Mensaje de estado de piezas */
.parts-status-msg {
    text-align: center;
    padding: var(--spacing-sm);
    margin-top: var(--spacing-sm);
    font-size: 0.85rem;
    font-weight: 600;
    border-radius: var(--radius-sm);
    background: var(--bg-input);
    color: var(--text-muted);
    transition: all var(--transition-fast);
}

.parts-status-msg.incomplete {
    background: rgba(255, 215, 0, 0.1);
    color: var(--accent-gold);
    border: 1px solid var(--accent-gold);
}

.parts-status-msg.complete {
    background: rgba(76, 175, 80, 0.15);
    color: var(--status-ready);
    border: 1px solid var(--status-ready);
}

/* ===== PROJECT CARD INDIVIDUAL PARTS ===== */
.project-parts-breakdown.individual-parts {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    max-height: 200px;
    overflow-y: auto;
}

.part-item-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-secondary);
    border-radius: var(--radius-xs);
    transition: all var(--transition-fast);
}

.part-item-row.complete {
    background: rgba(76, 175, 80, 0.1);
    border-left: 3px solid var(--status-ready);
}

.part-item-row.missing {
    background: rgba(244, 67, 54, 0.05);
    border-left: 3px solid var(--status-pending);
}

.part-item-img {
    width: 28px;
    height: 28px;
    object-fit: contain;
    flex-shrink: 0;
}

.part-item-name {
    flex: 1;
    font-size: 0.8rem;
    font-weight: 500;
}

.part-item-count {
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--text-secondary);
    min-width: 40px;
    text-align: right;
}

.part-item-row.complete .part-item-count {
    color: var(--status-ready);
}

.part-item-row.missing .part-item-count {
    color: var(--status-pending);
}

/* =============================================
   TAB: MERCADO - PRECIOS DE LA COMUNIDAD
   ============================================= */

#market .section-header {
    margin-bottom: var(--spacing-lg);
}

.section-subtitle-text {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-top: var(--spacing-xs);
}

/* Configuración de Conversión */
.market-config {
    background: var(--bg-card);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
    margin-bottom: var(--spacing-lg);
}

.config-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-md);
}

.config-header h3 {
    margin: 0;
    font-size: 1.1rem;
}

.config-note {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.conversion-inputs {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-lg);
}

.conversion-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.conversion-item label {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.conversion-item input {
    width: 80px;
    padding: var(--spacing-xs) var(--spacing-sm);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-sm);
    background: var(--bg-input);
    color: var(--text-main);
    text-align: center;
    font-weight: 600;
}

.conversion-item span:last-child {
    color: var(--text-muted);
    font-size: 0.85rem;
}

/* Leyenda de Tiendas */
.stores-legend {
    margin-bottom: var(--spacing-lg);
}

.stores-legend h3 {
    margin-bottom: var(--spacing-md);
    font-size: 1.1rem;
}

.stores-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
}

.store-card {
    background: var(--bg-card);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    transition: all var(--transition-fast);
}

.store-card:hover {
    border-color: var(--accent-gold);
    transform: translateY(-2px);
}

.store-card.bot {
    border-left: 3px solid var(--accent-blu);
}

.store-card.community {
    border-left: 3px solid var(--accent-gold);
}

.store-card.market {
    border-left: 3px solid var(--status-ready);
}

.store-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-sm);
}

.store-name {
    font-weight: 700;
    font-size: 1rem;
}

.store-type {
    font-size: 0.75rem;
    padding: 2px 8px;
    border-radius: var(--radius-xs);
    background: var(--bg-tertiary);
}

.store-type.bot { color: var(--accent-blu); }
.store-type.community { color: var(--accent-gold); }
.store-type.market { color: var(--status-ready); }

.store-info {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
    font-size: 0.8rem;
}

.store-currency {
    color: var(--text-secondary);
}

.store-reliability {
    font-weight: 600;
}

.store-reliability.high { color: var(--status-ready); }
.store-reliability.variable { color: var(--accent-gold); }

.store-note {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin: var(--spacing-xs) 0;
    font-style: italic;
}

.store-link {
    display: inline-block;
    margin-top: var(--spacing-sm);
    font-size: 0.8rem;
    color: var(--accent-blu);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.store-link:hover {
    color: var(--accent-gold);
}

/* Tabla de Precios */
.market-table-container {
    overflow-x: auto;
    margin-bottom: var(--spacing-lg);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-inactive);
}

.market-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.85rem;
}

.market-table th {
    background: var(--bg-tertiary);
    padding: var(--spacing-md);
    text-align: center;
    font-weight: 700;
    color: var(--text-main);
    border-bottom: 2px solid var(--border-inactive);
}

.market-table th.part-col {
    text-align: left;
    min-width: 180px;
}

.market-table th.store-col {
    min-width: 100px;
}

.market-table th.best-col {
    min-width: 120px;
    background: var(--accent-gold);
    color: var(--bg-main);
}

.market-table td {
    padding: var(--spacing-sm) var(--spacing-md);
    border-bottom: 1px solid var(--border-inactive);
    text-align: center;
}

.category-row td {
    background: var(--bg-secondary);
    padding: var(--spacing-sm) var(--spacing-md);
}

.category-header {
    font-weight: 700;
    text-align: left !important;
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.category-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-block;
}

.part-row:hover {
    background: rgba(255, 215, 0, 0.05);
}

.part-cell {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    text-align: left !important;
}

.part-thumb {
    width: 32px;
    height: 32px;
    object-fit: contain;
}

.part-name-cell {
    font-weight: 500;
}

.price-cell {
    position: relative;
}

.price-cell.best {
    background: rgba(76, 175, 80, 0.15);
}

.price-cell.best::after {
    content: '✓';
    position: absolute;
    top: 2px;
    right: 4px;
    font-size: 0.7rem;
    color: var(--status-ready);
}

.price {
    font-weight: 600;
}

.price.range {
    font-size: 0.75rem;
    color: var(--accent-gold);
}

.na {
    color: var(--text-muted);
    font-style: italic;
}

.best-cell {
    background: rgba(255, 215, 0, 0.1);
}

.best-store {
    display: block;
    font-weight: 700;
    color: var(--accent-gold);
    font-size: 0.8rem;
}

.best-price {
    display: block;
    font-size: 0.9rem;
    color: var(--status-ready);
    font-weight: 600;
}

/* Resumen de Costos */
.market-summary {
    background: var(--bg-card);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
}

.market-summary h3 {
    margin-bottom: var(--spacing-xs);
}

.summary-hint {
    color: var(--text-secondary);
    font-size: 0.85rem;
    margin-bottom: var(--spacing-lg);
}

.cost-calculator {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-md);
    align-items: flex-end;
    margin-bottom: var(--spacing-lg);
}

.calc-input-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.calc-input-group label {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.calc-input-group select {
    padding: var(--spacing-sm) var(--spacing-md);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-sm);
    background: var(--bg-input);
    color: var(--text-main);
    font-size: 0.9rem;
}

.btn-calculate {
    padding: var(--spacing-sm) var(--spacing-lg);
    background: linear-gradient(135deg, var(--accent-gold), #FFA500);
    border: none;
    border-radius: var(--radius-sm);
    color: var(--bg-main);
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    transition: all var(--transition-fast);
}

.btn-calculate:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
}

.cost-results {
    margin-top: var(--spacing-lg);
    padding-top: var(--spacing-lg);
    border-top: 1px solid var(--border-inactive);
}

.cost-results h4 {
    margin-bottom: var(--spacing-md);
}

.cost-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.cost-card {
    background: var(--bg-tertiary);
    border: 2px solid var(--border-inactive);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    text-align: center;
    transition: all var(--transition-fast);
}

.cost-card.cheapest {
    border-color: var(--status-ready);
    background: rgba(76, 175, 80, 0.1);
}

.cost-card.unavailable {
    opacity: 0.6;
    border-style: dashed;
}

.cost-store-name {
    font-weight: 700;
    margin-bottom: var(--spacing-sm);
}

.cost-value {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.cost-original {
    font-size: 1.1rem;
    font-weight: 600;
}

.cost-ref {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.cost-local {
    font-size: 0.8rem;
    color: var(--accent-primary);
    font-weight: 500;
}

.cheapest-badge {
    display: inline-block;
    margin-top: var(--spacing-sm);
    padding: 2px 8px;
    background: var(--status-ready);
    color: white;
    border-radius: var(--radius-xs);
    font-size: 0.75rem;
    font-weight: 700;
}

.cost-unavailable {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-xs);
    color: var(--text-muted);
}

.na-icon {
    font-size: 1.5rem;
}

.missing-info {
    font-size: 0.75rem;
    color: var(--accent-red);
}

.recommendation-box {
    background: var(--bg-tertiary);
    border-left: 4px solid var(--status-ready);
    border-radius: var(--radius-sm);
    padding: var(--spacing-md);
}

.recommendation-box h5 {
    margin-bottom: var(--spacing-sm);
    color: var(--status-ready);
}

.recommendation-box p {
    margin: var(--spacing-xs) 0;
}

.recommendation-note {
    font-size: 0.8rem;
    color: var(--text-muted);
    font-style: italic;
}

.recommendation-local {
    color: var(--accent-primary);
    font-weight: 500;
}

.recommendation-box.warning {
    border-color: var(--accent-gold);
}

.recommendation-box.warning h5 {
    color: var(--accent-gold);
}

/* Responsive para tabla */
@media (max-width: 900px) {
    .market-table {
        font-size: 0.75rem;
    }
    
    .market-table th,
    .market-table td {
        padding: var(--spacing-xs) var(--spacing-sm);
    }
    
    .part-thumb {
        width: 24px;
        height: 24px;
    }
    
    .stores-grid {
        grid-template-columns: 1fr;
    }
}

/* =============================================
   PROJECT COST DISPLAY (EN LA FORJA)
   ============================================= */

.project-cost-display {
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    margin: var(--spacing-sm) 0;
    border-left: 3px solid var(--accent-gold);
}

.project-cost-display.ready {
    border-left-color: var(--status-ready);
    background: rgba(76, 175, 80, 0.1);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.project-cost-display .cost-icon {
    font-size: 1.1rem;
}

.project-cost-display .cost-text {
    color: var(--status-ready);
    font-weight: 600;
}

.cost-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-sm);
}

.cost-title {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-secondary);
}

.cost-stores {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.cost-store-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-size: 0.85rem;
}

.cost-store-row .store-name {
    min-width: 80px;
    color: var(--text-secondary);
}

.cost-store-row .store-price {
    font-weight: 700;
    color: var(--text-main);
}

.cost-store-row .store-keys {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.cost-store-row.main .store-price {
    color: var(--accent-gold);
}

.cost-store-row.best {
    background: rgba(76, 175, 80, 0.1);
    padding: var(--spacing-xs);
    border-radius: var(--radius-xs);
}

.cost-store-row.best .store-price {
    color: var(--status-ready);
}

/* =============================================
   CUSTOM MODAL (PARA COSTOS Y AGREGAR PIEZAS)
   ============================================= */

.custom-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all var(--transition-normal);
}

.custom-modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.custom-modal {
    background: var(--bg-card);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-lg);
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

.custom-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-inactive);
}

.custom-modal-header h3 {
    margin: 0;
    font-size: 1.1rem;
}

.custom-modal-close {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 1.2rem;
    cursor: pointer;
    padding: var(--spacing-xs);
    transition: color var(--transition-fast);
}

.custom-modal-close:hover {
    color: var(--accent-red);
}

.custom-modal-body {
    padding: var(--spacing-lg);
    overflow-y: auto;
}

/* Cost Modal Content */
.cost-modal-content {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.cost-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--border-inactive);
}

.cost-modal-header h4 {
    margin: 0;
}

.cost-modal-type {
    padding: 4px 12px;
    border-radius: var(--radius-xs);
    font-size: 0.8rem;
    font-weight: 600;
    background: var(--bg-tertiary);
}

.cost-modal-complete {
    text-align: center;
    padding: var(--spacing-xl);
}

.cost-modal-complete .complete-icon {
    font-size: 3rem;
    display: block;
    margin-bottom: var(--spacing-md);
}

.cost-modal-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--spacing-md);
}

.cost-modal-card {
    background: var(--bg-tertiary);
    border: 2px solid var(--border-inactive);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    text-align: center;
    transition: all var(--transition-fast);
}

.cost-modal-card.cheapest {
    border-color: var(--status-ready);
    background: rgba(76, 175, 80, 0.1);
}

.cost-modal-store {
    font-weight: 700;
    margin-bottom: var(--spacing-sm);
}

.cost-modal-price {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.price-main {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--accent-gold);
}

.price-ref {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.price-keys {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.cost-modal-missing {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-top: var(--spacing-xs);
}

.cheapest-label {
    display: inline-block;
    margin-top: var(--spacing-sm);
    padding: 2px 8px;
    background: var(--status-ready);
    color: white;
    border-radius: var(--radius-xs);
    font-size: 0.7rem;
    font-weight: 700;
}

.cost-modal-actions {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-inactive);
}

.btn-add-parts {
    width: 100%;
    padding: var(--spacing-md);
    background: linear-gradient(135deg, var(--accent-blu), #4488FF);
    border: none;
    border-radius: var(--radius-sm);
    color: white;
    font-weight: 700;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-add-parts:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(40, 98, 200, 0.3);
}

/* Add Parts Modal */
.add-parts-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    max-height: 300px;
    overflow-y: auto;
}

.add-part-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
}

.add-part-img {
    width: 36px;
    height: 36px;
    object-fit: contain;
}

.add-part-name {
    flex: 1;
    font-weight: 500;
    font-size: 0.9rem;
}

.add-part-missing {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.btn-add-single {
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--accent-blu);
    border: none;
    border-radius: var(--radius-xs);
    color: white;
    font-size: 0.75rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-add-single:hover {
    background: var(--accent-gold);
}

.add-parts-actions {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-inactive);
}

.btn-add-all {
    width: 100%;
    padding: var(--spacing-md);
    background: linear-gradient(135deg, var(--status-ready), #66BB6A);
    border: none;
    border-radius: var(--radius-sm);
    color: white;
    font-weight: 700;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-add-all:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
}

/* =============================================
   MARKET PROJECTS SECTION
   ============================================= */

.market-projects-section {
    margin-top: var(--spacing-xl);
    background: var(--bg-card);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
}

.market-projects-section .section-header {
    margin-bottom: var(--spacing-lg);
}

.market-projects-section .section-header h3 {
    margin-bottom: var(--spacing-xs);
}

.section-hint {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.market-projects-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-md);
}

.empty-projects-market {
    text-align: center;
    padding: var(--spacing-xl);
    color: var(--text-muted);
}

.empty-projects-market span {
    font-size: 2rem;
    display: block;
    margin-bottom: var(--spacing-sm);
}

.empty-projects-market .hint {
    font-size: 0.85rem;
    margin-top: var(--spacing-xs);
}

.market-project-card {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    transition: all var(--transition-fast);
}

.market-project-card:hover {
    border-color: var(--accent-gold);
}

.mp-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--spacing-sm);
}

.mp-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.mp-name {
    font-weight: 700;
    font-size: 1rem;
}

.mp-type {
    font-size: 0.7rem;
    padding: 2px 6px;
    border-radius: var(--radius-xs);
    font-weight: 600;
    text-transform: uppercase;
}

.mp-type.specialized {
    background: rgba(255, 105, 180, 0.2);
    color: #FF69B4;
}

.mp-type.professional {
    background: rgba(255, 215, 0, 0.2);
    color: var(--accent-gold);
}

.mp-id {
    font-size: 0.7rem;
    color: var(--text-muted);
    font-family: monospace;
}

.mp-sheen {
    padding: var(--spacing-xs) var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
    font-size: 0.8rem;
    color: var(--text-secondary);
    background: var(--bg-secondary);
    border-radius: var(--radius-xs);
}

.mp-costs {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-sm);
}

.mp-cost-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.85rem;
}

.mp-cost-item .mp-store {
    color: var(--text-secondary);
}

.mp-cost-item .mp-value {
    font-weight: 700;
}

.mp-cost-item.best {
    background: rgba(76, 175, 80, 0.1);
    padding: var(--spacing-xs);
    border-radius: var(--radius-xs);
}

.mp-cost-item.best .mp-value {
    color: var(--status-ready);
}

.mp-cost-item.complete {
    justify-content: center;
    color: var(--status-ready);
    font-weight: 600;
}

.mp-actions {
    display: flex;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-sm);
}

.btn-mp-details,
.btn-mp-recommend {
    flex: 1;
    padding: var(--spacing-xs) var(--spacing-sm);
    border: none;
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-mp-details {
    background: var(--bg-secondary);
    color: var(--text-main);
    border: 1px solid var(--border-inactive);
}

.btn-mp-details:hover {
    border-color: var(--accent-gold);
}

.btn-mp-recommend {
    background: linear-gradient(135deg, var(--accent-gold), #FFA500);
    color: var(--bg-main);
}

.btn-mp-recommend:hover {
    transform: translateY(-1px);
}

/* Recommendations Modal */
.recommendations-content {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.recommendations-content h4 {
    margin: 0;
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--border-inactive);
}

.all-complete {
    text-align: center;
    padding: var(--spacing-xl);
    color: var(--status-ready);
    font-weight: 600;
}

.recommendations-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    max-height: 300px;
    overflow-y: auto;
}

.recommendation-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
}

.recommendation-item img {
    width: 36px;
    height: 36px;
    object-fit: contain;
}

.rec-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.rec-name {
    font-weight: 600;
    font-size: 0.9rem;
}

.rec-missing {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.rec-best {
    text-align: right;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.rec-store {
    font-size: 0.75rem;
    color: var(--accent-blu);
}

.rec-price {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.rec-total {
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--status-ready);
}

.recommendations-summary {
    padding: var(--spacing-md);
    background: rgba(76, 175, 80, 0.1);
    border-left: 3px solid var(--status-ready);
    border-radius: var(--radius-sm);
}

/* =============================================
   COMMUNITY PRICES PANEL (Compact with Modal)
   ============================================= */

.community-prices-panel {
    background: var(--bg-card);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
    margin-bottom: var(--spacing-lg);
}

.panel-header-row {
    margin-bottom: var(--spacing-lg);
}

.panel-header-row h3 {
    margin-bottom: var(--spacing-xs);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.panel-hint {
    font-size: 0.85rem;
    color: var(--text-secondary);
    line-height: 1.5;
}

/* Price Source Cards */
.price-source-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.price-source-card {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-md);
    padding: var(--spacing-md) var(--spacing-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.price-source-card:hover {
    border-color: var(--accent-gold);
    background: var(--bg-secondary);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.source-icon {
    font-size: 2rem;
    line-height: 1;
}

.source-info {
    flex: 1;
}

.source-info h4 {
    margin: 0 0 2px 0;
    font-size: 1rem;
    color: var(--text-main);
}

.source-currency {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.source-status {
    text-align: center;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-secondary);
    border-radius: var(--radius-xs);
}

.source-status .status-count {
    display: block;
    font-weight: 700;
    font-size: 1rem;
    color: var(--accent-gold);
}

.source-status .status-label {
    display: block;
    font-size: 0.7rem;
    color: var(--text-muted);
}

.source-status.complete .status-count {
    color: var(--status-ready);
}

.source-action {
    font-size: 1.2rem;
    opacity: 0.5;
    transition: opacity var(--transition-fast);
}

.price-source-card:hover .source-action {
    opacity: 1;
}

/* Global Prices Status */
.prices-global-status {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    background: rgba(100, 100, 100, 0.1);
    color: var(--text-secondary);
}

.prices-global-status.has-custom {
    background: rgba(255, 152, 0, 0.1);
    color: #FF9800;
    border-left: 3px solid #FF9800;
}

.prices-global-status.all-custom {
    background: rgba(76, 175, 80, 0.1);
    color: var(--status-ready);
    border-left: 3px solid var(--status-ready);
}

/* =============================================
   PRICE MODAL
   ============================================= */

.price-modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    padding: var(--spacing-lg);
    animation: fadeIn 0.2s ease;
}

.price-modal-overlay.active {
    display: flex;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.price-modal {
    background: var(--bg-card);
    border: 1px solid var(--border-active);
    border-radius: var(--radius-lg);
    width: 100%;
    max-width: 600px;
    max-height: 85vh;
    display: flex;
    flex-direction: column;
    animation: slideUp 0.25s ease;
}

@keyframes slideUp {
    from { transform: translateY(30px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.price-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 1px solid var(--border-inactive);
}

.modal-title-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.modal-icon {
    font-size: 1.5rem;
}

.price-modal-header h3 {
    margin: 0;
    font-size: 1.2rem;
}

.modal-close-btn {
    background: transparent;
    border: none;
    color: var(--text-muted);
    font-size: 1.5rem;
    cursor: pointer;
    padding: var(--spacing-xs);
    border-radius: var(--radius-xs);
    transition: all var(--transition-fast);
}

.modal-close-btn:hover {
    background: var(--bg-tertiary);
    color: var(--text-main);
}

.price-modal-hint {
    padding: var(--spacing-sm) var(--spacing-lg);
    font-size: 0.85rem;
    color: var(--text-secondary);
    background: var(--bg-tertiary);
}

.price-modal-body {
    flex: 1;
    overflow-y: auto;
    padding: var(--spacing-md);
}

/* Modal Price Items */
.modal-price-item {
    display: grid;
    grid-template-columns: 48px 1fr auto 120px;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-sm);
    margin-bottom: var(--spacing-sm);
    transition: all var(--transition-fast);
}

.modal-price-item:hover {
    border-color: var(--accent-gold);
}

.modal-price-item.pristine {
    border-left: 3px solid #FFD700;
}

.modal-price-item.reinforced {
    border-left: 3px solid #0066FF;
}

.modal-price-item.battle-worn {
    border-left: 3px solid #FF69B4;
}

.modal-price-item.has-value {
    background: rgba(76, 175, 80, 0.05);
}

.modal-item-img {
    width: 48px;
    height: 48px;
    object-fit: contain;
}

.modal-item-info {
    min-width: 0;
}

.modal-item-name {
    font-weight: 600;
    font-size: 0.9rem;
    color: var(--text-main);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.modal-item-estimated {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.modal-item-status {
    font-size: 0.75rem;
    padding: 2px 8px;
    border-radius: var(--radius-xs);
    background: var(--bg-secondary);
    color: var(--text-muted);
}

.modal-item-status.custom {
    background: rgba(76, 175, 80, 0.15);
    color: var(--status-ready);
}

.modal-item-input {
    width: 100%;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-secondary);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-xs);
    color: var(--text-main);
    font-size: 0.95rem;
    text-align: center;
}

.modal-item-input:focus {
    outline: none;
    border-color: var(--accent-gold);
    box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.2);
}

.modal-item-input::placeholder {
    color: var(--text-muted);
}

/* Modal Footer */
.price-modal-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md) var(--spacing-lg);
    border-top: 1px solid var(--border-inactive);
    background: var(--bg-tertiary);
    border-radius: 0 0 var(--radius-lg) var(--radius-lg);
}

.btn-modal-reset,
.btn-modal-open,
.btn-modal-save {
    padding: var(--spacing-sm) var(--spacing-md);
    border: none;
    border-radius: var(--radius-sm);
    font-weight: 600;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    text-decoration: none;
}

.btn-modal-reset {
    background: var(--bg-secondary);
    color: var(--text-secondary);
    border: 1px solid var(--border-inactive);
}

.btn-modal-reset:hover {
    background: var(--bg-card);
    border-color: var(--text-muted);
}

.btn-modal-open {
    background: linear-gradient(135deg, #4A90A4, #5BA3B8);
    color: white;
}

.btn-modal-open:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(74, 144, 164, 0.3);
}

.btn-modal-save {
    background: linear-gradient(135deg, var(--status-ready), #66BB6A);
    color: white;
}

.btn-modal-save:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
}

/* =============================================
   LEGACY COMMUNITY PRICES (for compatibility)
   ============================================= */

.community-prices-section {
    background: var(--bg-card);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
    margin-bottom: var(--spacing-lg);
}

.community-header {
    margin-bottom: var(--spacing-lg);
}

.community-header h3 {
    margin-bottom: var(--spacing-xs);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.community-hint {
    font-size: 0.85rem;
    color: var(--text-secondary);
    line-height: 1.5;
}

.community-prices-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.community-price-card {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    transition: all var(--transition-fast);
}

.community-price-card:hover {
    border-color: var(--accent-gold);
}

.community-price-card.pristine {
    border-left: 3px solid #FFD700;
}

.community-price-card.reinforced {
    border-left: 3px solid #0066FF;
}

.community-price-card.battle-worn {
    border-left: 3px solid #FF69B4;
}

.cp-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
}

.cp-img {
    width: 36px;
    height: 36px;
    object-fit: contain;
}

.cp-name {
    font-weight: 600;
    font-size: 0.9rem;
}

.cp-estimated {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-sm);
    padding: var(--spacing-xs);
    background: var(--bg-secondary);
    border-radius: var(--radius-xs);
    font-size: 0.8rem;
}

.cp-label {
    color: var(--text-muted);
}

.cp-range {
    color: var(--text-secondary);
}

.cp-input-group {
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-bottom: var(--spacing-sm);
}

.cp-input-label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.cp-input {
    width: 100%;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-secondary);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-xs);
    color: var(--text-main);
    font-size: 0.9rem;
    text-align: center;
}

.cp-input:focus {
    outline: none;
    border-color: var(--accent-gold);
    box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.2);
}

.cp-input::placeholder {
    color: var(--text-muted);
}

.cp-status {
    font-size: 0.75rem;
    text-align: center;
    padding: 2px 8px;
    border-radius: var(--radius-xs);
    color: var(--text-muted);
}

.cp-status.has-value {
    background: rgba(76, 175, 80, 0.1);
    color: var(--status-ready);
}

.community-actions {
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
    margin-bottom: var(--spacing-md);
}

.btn-save-community,
.btn-reset-community,
.btn-open-bptf {
    padding: var(--spacing-sm) var(--spacing-lg);
    border: none;
    border-radius: var(--radius-sm);
    font-weight: 600;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    text-decoration: none;
}

.btn-save-community {
    background: linear-gradient(135deg, var(--status-ready), #66BB6A);
    color: white;
}

.btn-save-community:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
}

.btn-reset-community {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    border: 1px solid var(--border-inactive);
}

.btn-reset-community:hover {
    background: var(--bg-secondary);
    border-color: var(--text-muted);
}

.btn-open-bptf {
    background: linear-gradient(135deg, #4A90A4, #5BA3B8);
    color: white;
}

.btn-open-bptf:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(74, 144, 164, 0.3);
}

.community-status {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
}

.community-status.default {
    background: rgba(100, 100, 100, 0.1);
    color: var(--text-secondary);
}

.community-status.partial {
    background: rgba(255, 152, 0, 0.1);
    color: #FF9800;
    border-left: 3px solid #FF9800;
}

.community-status.complete {
    background: rgba(76, 175, 80, 0.1);
    color: var(--status-ready);
    border-left: 3px solid var(--status-ready);
}

.status-icon {
    font-size: 1.1rem;
}

/* Precio personalizado en tabla */
.price-cell.custom-price {
    background: rgba(76, 175, 80, 0.05);
}

.price.custom {
    color: var(--status-ready) !important;
    font-weight: 600;
}

/* Responsive */
@media (max-width: 768px) {
    .community-prices-grid {
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    }
    
    .community-actions {
        flex-direction: column;
    }
    
    .btn-save-community,
    .btn-reset-community,
    .btn-open-bptf {
        width: 100%;
        justify-content: center;
    }
}

/* ============================================
   CALCULADORA DE RENTABILIDAD
   ============================================ */

.profitability-section {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 2px solid var(--border-color);
}

.profitability-header {
    text-align: center;
    margin-bottom: var(--spacing-xl);
}

.profitability-header h2 {
    font-size: 1.8rem;
    font-family: 'Russo One', sans-serif;
    color: var(--text-primary);
    margin: 0 0 var(--spacing-xs) 0;
}

.profitability-subtitle {
    color: var(--text-muted);
    font-size: 0.95rem;
    margin: 0;
}

.profitability-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-xl);
}

@media (max-width: 1200px) {
    .profitability-grid {
        grid-template-columns: 1fr;
    }
}

.profit-card {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-color);
    overflow: hidden;
}

.profit-card .card-header {
    background: var(--bg-tertiary);
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.profit-card .card-header h3 {
    margin: 0;
    font-size: 1.1rem;
    font-family: 'Russo One', sans-serif;
}

.profit-card .card-hint {
    font-size: 0.8rem;
    color: var(--text-muted);
}

/* Formulario de calculadora */
.profit-form {
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--border-color);
}

.profit-form-row {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.profit-field {
    flex: 1;
}

.profit-field label {
    display: block;
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-bottom: var(--spacing-xs);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.profit-field select {
    width: 100%;
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.95rem;
}

.profit-field select:focus {
    outline: none;
    border-color: var(--accent-primary);
}

/* Toggle de fuente de precios */
.profit-source-toggle {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    margin-top: var(--spacing-md);
}

.toggle-label {
    font-size: 0.85rem;
    color: var(--text-muted);
}

.toggle-buttons {
    display: flex;
    gap: 0;
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    overflow: hidden;
    border: 1px solid var(--border-color);
}

.toggle-btn {
    padding: var(--spacing-xs) var(--spacing-md);
    background: transparent;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 0.85rem;
    transition: all var(--transition-fast);
}

.toggle-btn:hover {
    color: var(--text-primary);
}

.toggle-btn.active {
    background: var(--accent-primary);
    color: #000;
    font-weight: 600;
}

/* Resultados de rentabilidad */
.profit-results {
    padding: var(--spacing-lg);
}

.profit-result-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-lg);
    padding-bottom: var(--spacing-md);
    border-bottom: 1px dashed var(--border-color);
}

.result-combo-preview {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.combo-preview-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.combo-preview-item .preview-img {
    width: 40px;
    height: 40px;
    object-fit: contain;
    border: 2px solid;
    border-radius: var(--radius-sm);
    padding: 4px;
    background: var(--bg-tertiary);
}

.combo-preview-item span {
    font-size: 0.7rem;
    text-align: center;
}

.combo-plus {
    font-size: 1.2rem;
    color: var(--accent-primary);
    font-weight: bold;
}

.result-tier-badge {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    background: var(--bg-tertiary);
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-sm);
}

.result-tier-badge .tier-icon {
    font-size: 1.2rem;
}

.result-tier-badge .tier-label {
    font-weight: 600;
    font-size: 0.9rem;
}

/* Breakdown de costos y precios */
.profit-breakdown {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

@media (max-width: 600px) {
    .profit-breakdown {
        grid-template-columns: 1fr;
    }
}

.breakdown-section {
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    padding: var(--spacing-md);
}

.breakdown-section h4 {
    margin: 0 0 var(--spacing-md) 0;
    font-size: 0.9rem;
    color: var(--text-muted);
}

.breakdown-items {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.breakdown-item {
    display: flex;
    justify-content: space-between;
    font-size: 0.85rem;
}

.breakdown-item .item-name {
    color: var(--text-secondary);
}

.breakdown-item .item-price {
    color: var(--text-primary);
    font-family: 'Roboto Mono', monospace;
}

.breakdown-total {
    display: flex;
    justify-content: space-between;
    padding-top: var(--spacing-sm);
    margin-top: var(--spacing-sm);
    border-top: 1px solid var(--border-color);
    font-weight: 600;
}

.breakdown-total .total-value {
    font-family: 'Roboto Mono', monospace;
}

.breakdown-total .total-value.positive {
    color: var(--status-ready);
}

/* Filas de precio de venta */
.sale-price-row {
    display: flex;
    justify-content: space-between;
    font-size: 0.85rem;
    margin-bottom: var(--spacing-xs);
}

.sale-price-row .sale-label {
    color: var(--text-secondary);
}

.sale-price-row .sale-value {
    font-family: 'Roboto Mono', monospace;
}

.sale-price-row.premium .sale-value {
    color: var(--accent-primary);
}

/* Card de ROI */
.profit-roi-card {
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
    border: 2px solid var(--border-color);
    transition: all var(--transition-fast);
}

.profit-roi-card.excellent {
    border-color: #FFD700;
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, transparent 100%);
}

.profit-roi-card.good {
    border-color: var(--status-ready);
    background: linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, transparent 100%);
}

.profit-roi-card.neutral {
    border-color: var(--accent-primary);
    background: linear-gradient(135deg, rgba(255, 202, 40, 0.1) 0%, transparent 100%);
}

.profit-roi-card.negative {
    border-color: var(--status-missing);
    background: linear-gradient(135deg, rgba(244, 67, 54, 0.1) 0%, transparent 100%);
}

.roi-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-md);
}

.roi-label {
    font-size: 0.9rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
}

.roi-value {
    font-size: 2rem;
    font-weight: 700;
    font-family: 'Russo One', sans-serif;
}

.roi-value.excellent {
    color: #FFD700;
}

.roi-value.good {
    color: var(--status-ready);
}

.roi-value.neutral {
    color: var(--accent-primary);
}

.roi-value.negative {
    color: var(--status-missing);
}

.roi-details {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-md);
}

.roi-detail {
    text-align: center;
}

.roi-detail .detail-label {
    display: block;
    font-size: 0.7rem;
    color: var(--text-muted);
    text-transform: uppercase;
    margin-bottom: 4px;
}

.roi-detail .detail-value {
    font-family: 'Roboto Mono', monospace;
    font-weight: 600;
}

.roi-detail .detail-value.positive {
    color: var(--status-ready);
}

.roi-detail .detail-value.negative {
    color: var(--status-missing);
}

/* ============================================
   SISTEMA DE FAVORITOS PERSONALES
   ============================================ */

.favorites-card {
    display: flex;
    flex-direction: column;
}

.favorites-tip {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-sm);
    background: linear-gradient(135deg, rgba(244, 67, 54, 0.1) 0%, rgba(233, 30, 99, 0.1) 100%);
    padding: var(--spacing-md);
    border-left: 3px solid #F44336;
    margin: var(--spacing-md);
    border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
}

.favorites-tip .tip-icon {
    font-size: 1.2rem;
}

.favorites-tip p {
    margin: 0;
    font-size: 0.85rem;
    color: var(--text-secondary);
    line-height: 1.5;
}

/* Formulario de agregar favorito */
.add-favorite-form {
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 1px solid var(--border-color);
}

.add-favorite-form h4 {
    margin: 0 0 var(--spacing-md) 0;
    font-size: 0.95rem;
    color: var(--accent-primary);
}

.fav-form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.fav-field {
    display: flex;
    flex-direction: column;
}

.fav-field label {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.fav-field select {
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.85rem;
}

.fav-field select:focus {
    outline: none;
    border-color: var(--accent-primary);
}

.btn-add-favorite {
    width: 100%;
    padding: var(--spacing-sm) var(--spacing-md);
    background: linear-gradient(135deg, #E91E63 0%, #F44336 100%);
    border: none;
    border-radius: var(--radius-sm);
    color: white;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    transition: all var(--transition-fast);
}

.btn-add-favorite:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3);
}

/* Lista de favoritos */
.favorites-list {
    flex: 1;
    padding: var(--spacing-md);
    overflow-y: auto;
    max-height: 400px;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.empty-favorites {
    text-align: center;
    padding: var(--spacing-xl);
    color: var(--text-muted);
}

.empty-favorites .empty-icon {
    font-size: 3rem;
    display: block;
    margin-bottom: var(--spacing-md);
    opacity: 0.5;
}

.empty-favorites p {
    margin: 0 0 var(--spacing-xs) 0;
}

.empty-favorites .empty-hint {
    font-size: 0.85rem;
    opacity: 0.7;
}

/* Item de favorito */
.favorite-item {
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    border-left: 4px solid;
    transition: all var(--transition-fast);
}

.favorite-item:hover {
    transform: translateX(5px);
    background: rgba(255, 255, 255, 0.05);
}

.favorite-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-sm);
}

.favorite-class {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.favorite-class .class-icon {
    font-size: 1.2rem;
}

.favorite-class .class-name {
    font-weight: 600;
    font-size: 0.9rem;
}

.btn-remove-fav {
    background: transparent;
    border: none;
    cursor: pointer;
    font-size: 1rem;
    opacity: 0.5;
    transition: opacity var(--transition-fast);
}

.btn-remove-fav:hover {
    opacity: 1;
}

.favorite-weapon {
    margin-bottom: var(--spacing-sm);
}

.favorite-weapon .weapon-name {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    display: block;
}

.favorite-weapon .weapon-slot {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
}

.favorite-combo {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    background: var(--bg-secondary);
    padding: var(--spacing-sm);
    border-radius: var(--radius-sm);
    margin-bottom: var(--spacing-sm);
}

.combo-images {
    display: flex;
    align-items: center;
    gap: 4px;
}

.combo-images .combo-img {
    width: 32px;
    height: 32px;
    object-fit: contain;
    border: 2px solid;
    border-radius: 4px;
    padding: 2px;
    background: var(--bg-tertiary);
}

.combo-separator {
    font-size: 0.8rem;
    color: var(--accent-primary);
}

.combo-text {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.combo-text .sheen-name {
    font-weight: 600;
    font-size: 0.85rem;
}

.combo-text .ks-name {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.favorite-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.favorite-footer .kit-type {
    font-size: 0.75rem;
    padding: 2px 8px;
    border-radius: var(--radius-sm);
    background: var(--bg-secondary);
}

.favorite-footer .kit-type.professional {
    color: #FFD700;
    background: rgba(255, 215, 0, 0.1);
}

.favorite-footer .kit-type.specialized {
    color: #9370DB;
    background: rgba(147, 112, 219, 0.1);
}

.favorite-footer .tier-badge {
    font-size: 0.75rem;
    padding: 2px 8px;
    border-radius: var(--radius-sm);
    font-weight: 600;
}

/* Team Shine dual preview */
.team-shine-duo {
    text-align: center;
}

.team-shine-images {
    display: flex;
    gap: 4px;
    justify-content: center;
}

.team-shine-images .preview-img {
    width: 35px;
    height: 35px;
}

/* ============================================
   HOVER EFFECTS PARA ELEMENTOS INTERACTIVOS
   ============================================ */

/* Breakdown items con hover */
.breakdown-item {
    display: flex;
    justify-content: space-between;
    font-size: 0.85rem;
    padding: var(--spacing-xs);
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    cursor: default;
}

.breakdown-item:hover {
    background: rgba(255, 255, 255, 0.05);
    transform: translateX(3px);
}

.breakdown-item.estimated .item-name {
    color: var(--text-muted);
}

.breakdown-item.estimated .item-price {
    color: var(--text-secondary);
    font-style: italic;
}

.breakdown-item.custom .item-name {
    color: var(--status-ready);
}

.breakdown-item.custom .item-price {
    color: var(--status-ready);
    font-weight: 600;
}

/* Indicador de fuente de precios */
.source-wrapper {
    margin-top: var(--spacing-sm);
}

.source-indicator {
    font-size: 0.75rem;
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--radius-sm);
    text-align: center;
}

.source-indicator.custom {
    background: rgba(76, 175, 80, 0.1);
    color: var(--status-ready);
    border: 1px dashed var(--status-ready);
}

.source-indicator.estimated {
    background: rgba(255, 202, 40, 0.1);
    color: var(--accent-primary);
    border: 1px dashed var(--accent-primary);
}

/* Hover en cards de profit */
.profit-card {
    transition: all var(--transition-normal);
}

.profit-card:hover {
    border-color: var(--accent-primary);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

/* Hover en tier badge */
.result-tier-badge {
    transition: all var(--transition-fast);
    cursor: default;
}

.result-tier-badge:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

/* Hover en combo preview items */
.combo-preview-item {
    transition: all var(--transition-fast);
}

.combo-preview-item:hover .preview-img {
    transform: scale(1.15);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
}

/* Hover en ROI card */
.profit-roi-card {
    transition: all var(--transition-normal);
    cursor: default;
}

.profit-roi-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

/* Hover en toggle buttons */
.toggle-btn {
    transition: all var(--transition-fast);
}

.toggle-btn:hover:not(.active) {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-1px);
}

/* Hover en favoritos */
.favorite-item {
    cursor: default;
}

.favorite-item:hover {
    transform: translateX(5px);
    background: rgba(255, 255, 255, 0.08);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.favorite-item:hover .combo-images .combo-img {
    transform: scale(1.1);
}

/* Hover en botón agregar favorito */
.btn-add-favorite {
    position: relative;
    overflow: hidden;
}

.btn-add-favorite::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
}

.btn-add-favorite:hover::before {
    left: 100%;
}

/* Hover en select fields */
.profit-field select:hover,
.fav-field select:hover {
    border-color: var(--accent-primary);
    background: rgba(255, 202, 40, 0.05);
}

/* Animación pulse para elementos importantes */
@keyframes subtlePulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}

.roi-value.excellent {
    animation: subtlePulse 2s ease-in-out infinite;
}

/* Tooltip hover para breakdown items */
.breakdown-item[title] {
    position: relative;
}

.breakdown-item[title]:hover::after {
    content: attr(title);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 4px 8px;
    border-radius: var(--radius-sm);
    font-size: 0.7rem;
    white-space: nowrap;
    border: 1px solid var(--border-color);
    z-index: 10;
    pointer-events: none;
}

/* ============================================
   CONTEXTO DE CLASE/ARMA EN SIMULADOR
   ============================================ */

.weapon-context-section {
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border: 1px solid var(--border-color);
}

.context-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-md);
}

.context-label {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--accent-primary);
}

.btn-popularity-info {
    padding: var(--spacing-xs) var(--spacing-sm);
    background: linear-gradient(135deg, var(--accent-primary) 0%, #FFA000 100%);
    border: none;
    border-radius: var(--radius-sm);
    color: #000;
    font-size: 0.75rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-popularity-info:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(255, 202, 40, 0.3);
}

.weapon-context-row {
    display: grid;
    grid-template-columns: 1fr 1fr 1.5fr;
    gap: var(--spacing-sm);
    align-items: end;
}

@media (max-width: 600px) {
    .weapon-context-row {
        grid-template-columns: 1fr;
    }
}

.context-field {
    position: relative;
}

.context-field label {
    display: block;
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.context-field select {
    width: 100%;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.85rem;
}

.class-field {
    position: relative;
}

.class-preview {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-secondary);
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    pointer-events: none;
}

.class-preview.active {
    background: rgba(255, 202, 40, 0.1);
    border: 1px solid var(--accent-primary);
}

.class-icon-large {
    font-size: 1.3rem;
}

.weapon-popularity-hint {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-top: var(--spacing-sm);
    padding: var(--spacing-xs) var(--spacing-sm);
    background: rgba(255, 202, 40, 0.05);
    border-radius: var(--radius-sm);
    border-left: 2px solid var(--accent-primary);
}

.weapon-popularity-hint .hint-icon {
    font-size: 0.9rem;
}

.weapon-popularity-hint .hint-text {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.profit-form-divider {
    height: 1px;
    background: var(--border-color);
    margin: var(--spacing-md) 0;
}

/* ============================================
   MODAL DE POPULARIDAD
   ============================================ */

.popularity-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.85);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: all var(--transition-normal);
}

.popularity-modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.popularity-modal {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    width: 90%;
    max-width: 800px;
    max-height: 85vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    border: 1px solid var(--border-color);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    transform: scale(0.9);
    transition: transform var(--transition-normal);
}

.popularity-modal-overlay.active .popularity-modal {
    transform: scale(1);
}

.popularity-modal-header {
    padding: var(--spacing-lg);
    background: linear-gradient(135deg, var(--accent-primary) 0%, #FFA000 100%);
    color: #000;
    position: relative;
}

.popularity-modal-header h2 {
    margin: 0;
    font-family: 'Russo One', sans-serif;
}

.popularity-modal-header .modal-subtitle {
    margin: var(--spacing-xs) 0 0 0;
    font-size: 0.85rem;
    opacity: 0.8;
}

.popularity-modal-header .modal-close-btn {
    position: absolute;
    top: var(--spacing-md);
    right: var(--spacing-md);
    background: rgba(0, 0, 0, 0.2);
    border: none;
    color: #000;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    font-size: 1.5rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-fast);
}

.popularity-modal-header .modal-close-btn:hover {
    background: rgba(0, 0, 0, 0.4);
}

/* Tabs de popularidad */
.popularity-tabs {
    display: flex;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-color);
}

.pop-tab {
    flex: 1;
    padding: var(--spacing-md);
    background: transparent;
    border: none;
    color: var(--text-muted);
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
    position: relative;
}

.pop-tab:hover {
    color: var(--text-primary);
    background: rgba(255, 255, 255, 0.03);
}

.pop-tab.active {
    color: var(--accent-primary);
}

.pop-tab.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 20%;
    right: 20%;
    height: 3px;
    background: var(--accent-primary);
    border-radius: 3px 3px 0 0;
}

/* Contenido de popularidad */
.popularity-content {
    flex: 1;
    overflow-y: auto;
    padding: var(--spacing-lg);
}

.pop-tab-content {
    display: none;
}

.pop-tab-content.active {
    display: block;
    animation: fadeIn 0.3s ease;
}

.popularity-info-banner {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    background: rgba(255, 202, 40, 0.1);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--accent-primary);
    margin-bottom: var(--spacing-lg);
}

.popularity-info-banner .info-icon {
    font-size: 1.1rem;
}

.popularity-info-banner p {
    margin: 0;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

/* Grid de clases */
.popularity-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: var(--spacing-md);
}

.class-popularity-card {
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    text-align: center;
    border: 2px solid;
    transition: all var(--transition-fast);
}

.class-popularity-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

.pop-card-rank {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-bottom: var(--spacing-xs);
}

.pop-card-icon {
    font-size: 2.5rem;
    margin-bottom: var(--spacing-xs);
}

.pop-card-name {
    font-weight: 600;
    margin-bottom: var(--spacing-xs);
}

.pop-card-demand {
    font-size: 0.7rem;
    padding: 2px 8px;
    border-radius: var(--radius-sm);
    display: inline-block;
    font-weight: 600;
    margin-bottom: var(--spacing-xs);
}

.pop-card-note {
    font-size: 0.7rem;
    color: var(--text-muted);
    line-height: 1.3;
}

/* Lista de armas */
.weapon-filter-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.weapon-filter-row label {
    font-size: 0.85rem;
    color: var(--text-muted);
}

.weapon-filter-row select {
    padding: var(--spacing-xs) var(--spacing-md);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
}

.popularity-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.weapon-popularity-item {
    display: grid;
    grid-template-columns: 40px 1fr auto auto;
    gap: var(--spacing-md);
    align-items: center;
    background: var(--bg-tertiary);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
}

.weapon-popularity-item:hover {
    background: rgba(255, 255, 255, 0.05);
    transform: translateX(5px);
}

.weapon-pop-rank {
    font-weight: 700;
    color: var(--accent-primary);
}

.weapon-pop-info {
    min-width: 0;
}

.weapon-pop-name {
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.weapon-pop-meta {
    display: flex;
    gap: var(--spacing-sm);
    font-size: 0.75rem;
}

.weapon-class {
    font-weight: 600;
}

.weapon-slot {
    color: var(--text-muted);
}

.weapon-pop-demand {
    font-size: 0.7rem;
    padding: 2px 8px;
    border-radius: var(--radius-sm);
    font-weight: 600;
    white-space: nowrap;
}

.weapon-pop-note {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-align: right;
}

.no-weapons-msg {
    text-align: center;
    padding: var(--spacing-xl);
    color: var(--text-muted);
}

/* Cards de tipo de kit */
.kit-popularity-cards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-md);
}

@media (max-width: 600px) {
    .kit-popularity-cards {
        grid-template-columns: 1fr;
    }
}

.kit-popularity-card {
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--spacing-lg);
    text-align: center;
    border: 2px solid;
    transition: all var(--transition-fast);
}

.kit-popularity-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

.kit-pop-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-md);
}

.kit-pop-icon {
    font-size: 1.5rem;
}

.kit-pop-name {
    font-weight: 600;
    font-size: 1.1rem;
}

.kit-pop-bar {
    height: 8px;
    background: var(--bg-secondary);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: var(--spacing-sm);
}

.kit-pop-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.5s ease;
}

.kit-pop-percent {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: var(--spacing-sm);
}

.kit-pop-note {
    font-size: 0.8rem;
    color: var(--text-muted);
    line-height: 1.4;
}

/* Precio en moneda local (inline) */
.local-price {
    font-size: 0.75rem;
    color: var(--accent-primary);
    font-weight: normal;
    margin-left: 4px;
    opacity: 0.9;
}

.breakdown-total .local-price {
    display: block;
    font-size: 0.7rem;
    margin-top: 2px;
}

/* ROI grid con 4 columnas */
.roi-details {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--spacing-sm);
}

@media (max-width: 500px) {
    .roi-details {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* Footer del modal */
.popularity-modal-footer {
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--bg-tertiary);
    border-top: 1px solid var(--border-color);
}

.data-disclaimer {
    margin: 0;
    font-size: 0.75rem;
    color: var(--text-muted);
    text-align: center;
}

/* ============================================
   MODAL DE REGISTRO DE VENTA
   ============================================ */

.sale-registration-modal {
    max-width: 500px;
    margin: 0 auto;
}

.sale-registration-modal h2 {
    text-align: center;
    margin-bottom: var(--spacing-lg);
    color: var(--accent-gold);
}

.sale-project-summary {
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.sale-project-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
}

.sale-project-header h3 {
    margin: 0;
    font-size: 1.1rem;
}

.sale-project-details {
    display: grid;
    gap: var(--spacing-xs);
}

.sale-detail {
    display: flex;
    justify-content: space-between;
    font-size: 0.85rem;
}

.sale-detail .label {
    color: var(--text-muted);
}

.sale-detail .value {
    font-weight: 500;
}

.sale-detail.suggested {
    border-top: 1px solid var(--border-color);
    padding-top: var(--spacing-sm);
    margin-top: var(--spacing-xs);
}

.sale-detail.suggested .value {
    color: var(--accent-primary);
}

.local-hint {
    font-size: 0.75rem;
    opacity: 0.8;
}

.sale-form {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.sale-form-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.sale-form-group label {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.sale-form-group input,
.sale-form-group textarea {
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.9rem;
}

.sale-form-group input:focus,
.sale-form-group textarea:focus {
    outline: none;
    border-color: var(--accent-primary);
}

.sale-local-preview {
    font-size: 0.8rem;
    color: var(--accent-primary);
    text-align: right;
}

.checkbox-group {
    flex-direction: row !important;
    align-items: center;
}

.checkbox-group label {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    cursor: pointer;
}

.checkbox-group input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
}

.sale-profit-preview {
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.profit-preview-header {
    font-weight: 600;
    margin-bottom: var(--spacing-sm);
    color: var(--text-secondary);
}

.profit-preview-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--spacing-sm);
}

.profit-preview-item {
    text-align: center;
    padding: var(--spacing-sm);
    background: var(--bg-secondary);
    border-radius: var(--radius-sm);
}

.profit-preview-item .label {
    display: block;
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-bottom: 2px;
}

.profit-preview-item .value {
    display: block;
    font-size: 0.9rem;
    font-weight: 600;
}

.profit-preview-item .value.positive {
    color: var(--status-ready);
}

.profit-preview-item .value.negative {
    color: var(--accent-red);
}

.profit-preview-item.highlight {
    background: rgba(0, 255, 136, 0.1);
    border: 1px solid var(--status-ready);
}

.sale-actions {
    display: flex;
    gap: var(--spacing-sm);
    justify-content: flex-end;
}

.sale-actions button {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm) var(--spacing-md);
    border: none;
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-skip-sale {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
}

.btn-skip-sale:hover {
    background: var(--bg-hover);
}

.btn-confirm-sale {
    background: var(--status-ready);
    color: white;
}

.btn-confirm-sale:hover {
    background: #00cc6a;
    transform: translateY(-2px);
}

/* ============================================
   HISTORIAL DE VENTAS
   ============================================ */

.sales-history-section {
    margin-top: var(--spacing-xl);
    padding-top: var(--spacing-xl);
    border-top: 2px solid var(--border-color);
}

.history-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--spacing-lg);
    flex-wrap: wrap;
    gap: var(--spacing-md);
}

.history-title h2 {
    margin: 0;
    color: var(--accent-gold);
}

.history-subtitle {
    margin: var(--spacing-xs) 0 0;
    color: var(--text-muted);
    font-size: 0.9rem;
}

.history-actions {
    display: flex;
    gap: var(--spacing-sm);
}

.history-actions button {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm) var(--spacing-md);
    border: none;
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-clear-history {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
}

.btn-clear-history:hover {
    background: rgba(255, 77, 77, 0.2);
    color: var(--accent-red);
}

.btn-export-history {
    background: var(--accent-primary);
    color: var(--bg-primary);
}

.btn-export-history:hover {
    filter: brightness(1.1);
    transform: translateY(-2px);
}

/* Stats Grid */
.history-stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.history-stat-card {
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    border: 1px solid var(--border-color);
    transition: all 0.2s ease;
}

.history-stat-card:hover {
    transform: translateY(-2px);
    border-color: var(--accent-primary);
}

.history-stat-card .stat-icon {
    font-size: 2rem;
}

.history-stat-card .stat-info {
    display: flex;
    flex-direction: column;
}

.history-stat-card .stat-value {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1.2;
}

.history-stat-card .stat-label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.history-stat-card .stat-local {
    font-size: 0.8rem;
    color: var(--accent-primary);
}

.history-stat-card .stat-detail {
    font-size: 0.8rem;
    color: var(--status-ready);
}

.history-stat-card.total-profit .stat-value {
    color: var(--status-ready);
}

.history-stat-card.avg-roi .stat-value {
    color: var(--accent-primary);
}

/* History List */
.history-list-container {
    max-height: 500px;
    overflow-y: auto;
}

.history-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.empty-history {
    text-align: center;
    padding: var(--spacing-xl);
    color: var(--text-muted);
}

.empty-history .empty-icon {
    font-size: 3rem;
    display: block;
    margin-bottom: var(--spacing-md);
}

.empty-history .empty-hint {
    font-size: 0.85rem;
    opacity: 0.7;
}

/* History Entry */
.history-entry {
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    border-left: 4px solid var(--border-color);
    position: relative;
    transition: all 0.2s ease;
}

.history-entry:hover {
    transform: translateX(4px);
    border-left-color: var(--accent-primary);
}

.history-entry.professional {
    border-left-color: var(--accent-gold);
}

.history-entry.specialized {
    border-left-color: #9370DB;
}

.history-entry-main {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--spacing-md);
}

.history-entry-info {
    flex: 1;
}

.history-entry-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-xs);
}

.history-weapon {
    margin: 0;
    font-size: 1rem;
}

.history-entry-combo {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-size: 0.85rem;
    margin-bottom: var(--spacing-xs);
}

.history-entry-combo .separator {
    color: var(--text-muted);
}

.killstreaker-name {
    color: var(--accent-gold);
}

.history-entry-date {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-size: 0.75rem;
    color: var(--text-muted);
}

.buyer-info {
    color: var(--accent-primary);
    margin-left: var(--spacing-sm);
}

.history-entry-numbers {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-xs) var(--spacing-md);
    min-width: 200px;
}

.number-row {
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
}

.number-row .label {
    color: var(--text-muted);
}

.number-row .value {
    font-weight: 500;
}

.number-row.profit .value.positive {
    color: var(--status-ready);
}

.number-row.profit .value.negative {
    color: var(--accent-red);
}

.number-row.roi .value.positive {
    color: var(--accent-primary);
}

.number-row.roi .value.negative {
    color: var(--accent-red);
}

.history-entry-notes {
    margin-top: var(--spacing-sm);
    padding-top: var(--spacing-sm);
    border-top: 1px solid var(--border-color);
    font-size: 0.8rem;
    color: var(--text-secondary);
    font-style: italic;
}

.history-entry-actions {
    position: absolute;
    top: var(--spacing-sm);
    right: var(--spacing-sm);
    display: flex;
    gap: var(--spacing-xs);
    opacity: 0;
    transition: opacity 0.2s ease;
}

.history-entry:hover .history-entry-actions {
    opacity: 1;
}

.btn-edit-history,
.btn-delete-history {
    padding: 4px 8px;
    border: none;
    border-radius: var(--radius-xs);
    background: var(--bg-tertiary);
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-edit-history:hover {
    background: var(--accent-primary);
}

.btn-delete-history:hover {
    background: var(--accent-red);
}

/* Edit History Modal */
.edit-history-modal {
    max-width: 450px;
    margin: 0 auto;
}

.edit-history-modal h2 {
    text-align: center;
    margin-bottom: var(--spacing-lg);
}

.edit-history-summary {
    text-align: center;
    margin-bottom: var(--spacing-lg);
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
}

.edit-history-summary h3 {
    margin: var(--spacing-sm) 0 var(--spacing-xs);
}

.edit-history-summary .combo-info {
    margin: 0;
    font-size: 0.9rem;
}

.edit-history-form {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.edit-history-form .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-md);
}

.edit-history-form .form-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.edit-history-form label {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.edit-history-form input,
.edit-history-form textarea {
    padding: var(--spacing-sm);
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
}

.edit-history-form input:focus,
.edit-history-form textarea:focus {
    outline: none;
    border-color: var(--accent-primary);
}

.edit-history-actions {
    display: flex;
    justify-content: flex-end;
    gap: var(--spacing-sm);
}

/* Responsive */
@media (max-width: 900px) {
    .history-stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .profit-preview-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 600px) {
    .history-stats-grid {
        grid-template-columns: 1fr;
    }
    
    .history-entry-main {
        flex-direction: column;
    }
    
    .history-entry-numbers {
        width: 100%;
    }
    
    .sale-actions {
        flex-direction: column;
    }
    
    .edit-history-form .form-row {
        grid-template-columns: 1fr;
    }
}

/* ============================================
   FORMULARIO DE SPECIALIZED KITS
   ============================================ */

.spec-kits-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    margin-top: var(--spacing-sm);
}

.spec-kit-entry {
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    border: 1px solid var(--border-color);
}

/* ===== WEAPON INGREDIENT FORMS ===== */

/* NO usar reglas CSS para ocultar - dejamos que JavaScript maneje display */

.weapon-ingredient-section,
.weapon-ingredients-section {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

/* ===== WEAPON TABS SYSTEM ===== */
.weapon-tabs-container {
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    overflow: hidden;
    border: 1px solid var(--border-color);
}

.weapon-tabs-header {
    display: flex;
    background: rgba(0, 0, 0, 0.3);
    border-bottom: 1px solid var(--border-color);
}

.weapon-tab {
    flex: 1;
    padding: var(--spacing-sm) var(--spacing-md);
    background: transparent;
    border: none;
    color: var(--text-muted);
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
}

.weapon-tab:hover {
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-secondary);
}

.weapon-tab.active {
    background: var(--bg-tertiary);
    color: var(--accent-gold);
    border-bottom: 2px solid var(--accent-gold);
}

.weapon-tab .tab-icon {
    font-size: 1rem;
}

.weapon-tab-content {
    display: none;
    padding: var(--spacing-md);
    max-height: 300px;
    overflow-y: auto;
}

.weapon-tab-content.active {
    display: block;
}

/* Empty state for backpack tabs */
.weapon-tab-content .empty-backpack {
    text-align: center;
    padding: var(--spacing-lg);
    color: var(--text-muted);
}

.weapon-tab-content .empty-backpack .empty-icon {
    font-size: 2rem;
    margin-bottom: var(--spacing-sm);
    opacity: 0.5;
}

/* Selected weapon display */
.selected-weapon-display,
.selected-weapons-display {
    margin-top: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    background: rgba(76, 175, 80, 0.15);
    border: 1px solid var(--accent-green);
    border-radius: var(--radius-sm);
}

.selected-weapon-display {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.selected-label {
    color: var(--accent-green);
    font-weight: 600;
    font-size: 0.85rem;
}

.selected-weapon-name {
    flex: 1;
    color: var(--text-primary);
    font-weight: 500;
}

.btn-clear-selection {
    background: transparent;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 4px 8px;
    font-size: 0.9rem;
    border-radius: var(--radius-sm);
    transition: var(--transition-fast);
}

.btn-clear-selection:hover {
    background: rgba(255, 64, 64, 0.2);
    color: var(--accent-red);
}

/* Selected weapons for Professional (2 slots) */
.selected-weapons-display {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.selected-weapon-slot {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-xs) 0;
}

.selected-weapon-slot:not(:last-child) {
    border-bottom: 1px solid rgba(76, 175, 80, 0.3);
    padding-bottom: var(--spacing-sm);
}

.slot-number {
    font-size: 0.9rem;
}

.selected-weapons-display .spec-weapons-summary {
    margin-top: var(--spacing-xs);
    padding: var(--spacing-xs) 0;
    background: transparent;
    justify-content: center;
}

.manual-weapon-input,
.spec-weapons-manual {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.form-row {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: var(--spacing-sm);
    align-items: end;
}

.form-field {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.form-field label {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
}

.form-field input[type="text"],
.form-field input[type="number"] {
    padding: var(--spacing-sm);
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.9rem;
}

.form-field.cost-field {
    width: 120px;
}

.form-field.cost-field input {
    text-align: right;
}

/* Spec Weapon Entries */
.spec-weapon-entry {
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    border: 1px solid var(--border-color);
}

.spec-weapon-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
    font-weight: 600;
    font-size: 0.9rem;
}

.spec-weapon-number {
    font-size: 1.1rem;
}

.spec-weapon-fields {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.spec-weapons-summary {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-sm) var(--spacing-md);
    background: rgba(0, 0, 0, 0.2);
    border-radius: var(--radius-sm);
    margin-top: var(--spacing-sm);
}

.spec-weapons-summary .summary-label {
    font-size: 0.85rem;
    color: var(--text-muted);
}

.spec-weapons-summary .summary-value {
    font-weight: 700;
    color: var(--accent-gold);
}

/* Checkbox styling improvements */
.checkbox-label.small {
    font-size: 0.8rem;
}

.checkbox-label.small .checkmark {
    width: 16px;
    height: 16px;
}

.spec-kit-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
    font-weight: 600;
}

.spec-kit-number {
    font-size: 1.1rem;
}

.spec-kit-fields {
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: var(--spacing-sm);
    align-items: center;
}

.spec-kit-field {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.spec-kit-field label {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    cursor: pointer;
    font-size: 0.85rem;
}

.spec-kit-field input[type="text"] {
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.85rem;
    width: 100%;
}

.spec-kit-field.cost-field {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.spec-kit-field.cost-field input {
    width: 70px;
    padding: var(--spacing-xs);
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.85rem;
    text-align: right;
}

.spec-kit-field.cost-field .ref-label {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.spec-kits-summary {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: var(--spacing-md);
    padding: var(--spacing-sm);
    background: var(--bg-secondary);
    border-radius: var(--radius-sm);
}

.spec-kits-summary .summary-value {
    font-weight: 600;
    color: var(--text-muted);
}

.spec-kits-summary .summary-value.complete {
    color: var(--status-ready);
}

.spec-kits-summary .summary-value.partial {
    color: var(--accent-gold);
}

/* Display de Spec Kits en tarjeta de proyecto */
.spec-kits-display {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    width: 100%;
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
}

.spec-kits-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-weight: 600;
    font-size: 0.85rem;
    margin-bottom: var(--spacing-xs);
    color: var(--text-primary);
}

.spec-kit-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-size: 0.8rem;
    padding: var(--spacing-xs);
    background: var(--bg-input);
    border-radius: var(--radius-xs);
}

.spec-kit-row .kit-icon {
    flex-shrink: 0;
    font-size: 0.9rem;
}

.spec-kit-row .kit-info {
    flex: 1;
    display: flex;
    gap: var(--spacing-xs);
}

.spec-kit-row .kit-label {
    color: var(--text-muted);
}

.spec-kit-row .kit-weapon {
    color: var(--text-primary);
}

.spec-kit-row .kit-cost {
    color: var(--accent-gold);
    font-size: 0.75rem;
    font-weight: 600;
    margin-left: auto;
    background: rgba(255, 196, 0, 0.1);
    padding: 2px 6px;
    border-radius: var(--radius-xs);
}

.spec-kit-row.complete {
    border-left: 3px solid var(--status-ready);
}

.spec-kit-row.missing {
    opacity: 0.7;
    border-left: 3px solid var(--status-missing);
}

.spec-kits-total-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: var(--spacing-xs);
    margin-top: var(--spacing-xs);
    border-top: 1px dashed var(--border-color);
    font-size: 0.85rem;
}

.spec-kits-total-row .total-label {
    color: var(--text-secondary);
}

.spec-kits-total-row .total-value {
    font-weight: 700;
    color: var(--text-muted);
}

.spec-kits-total-row .total-value.has-value {
    color: var(--accent-gold);
}

/* Mantener estilos antiguos por compatibilidad */
.spec-kits-total {
    display: flex;
    justify-content: space-between;
    padding-top: var(--spacing-xs);
    border-top: 1px dashed var(--border-color);
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.spec-kits-total .total-value {
    color: var(--accent-gold);
    font-weight: 600;
}

/* ============================================
   MODAL DE EDICIÓN DE PROYECTO
   ============================================ */

.edit-project-modal {
    max-width: 450px;
    margin: 0 auto;
}

.edit-project-modal h2 {
    text-align: center;
    margin-bottom: var(--spacing-lg);
}

.edit-project-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    margin-bottom: var(--spacing-lg);
}

.edit-project-header .project-kit-icon img {
    width: 48px;
    height: 48px;
}

.edit-project-header .project-info h3 {
    margin: var(--spacing-xs) 0;
    font-size: 1.1rem;
}

.edit-project-header .project-combo {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.edit-section {
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.edit-section h4 {
    margin: 0 0 var(--spacing-sm);
    font-size: 0.95rem;
}

.edit-hint {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-bottom: var(--spacing-md);
}

.edit-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
}

.edit-row label {
    font-size: 0.85rem;
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    cursor: pointer;
}

.edit-row input[type="number"],
.edit-row input[type="text"] {
    flex: 1;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.85rem;
}

.edit-spec-kit {
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    padding: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
}

.edit-spec-header {
    font-weight: 600;
    font-size: 0.85rem;
    margin-bottom: var(--spacing-sm);
    color: var(--accent-primary);
}

.edit-actions {
    display: flex;
    justify-content: flex-end;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-lg);
}

/* ============================================
   KITS COMPLETADOS - MOCHILA
   ============================================ */

.completed-kits-section {
    margin-top: var(--spacing-xl);
}

.kits-hint {
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: var(--spacing-lg);
}

.kits-category {
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    margin-bottom: var(--spacing-lg);
    overflow: hidden;
}

.kits-category-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-color);
}

.kit-type-icon {
    width: 48px;
    height: 48px;
    object-fit: contain;
}

.kits-category-info {
    flex: 1;
}

.kits-category-info h4 {
    margin: 0;
    font-size: 1rem;
}

.kits-count {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.btn-add-kit {
    padding: var(--spacing-xs) var(--spacing-md);
    background: #44474e; /* gris por defecto */
    color: #e0e0e0;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-add-kit:hover {
    background: #3fd18b; /* verde menta en hover */
    color: white;
    filter: brightness(1.1);
    transform: scale(1.02);
}

.kits-list {
    padding: var(--spacing-md);
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--spacing-md);
}

.empty-kits {
    text-align: center;
    padding: var(--spacing-xl);
    color: var(--text-muted);
    grid-column: 1 / -1;
}

.empty-kits span {
    font-size: 2rem;
    display: block;
    margin-bottom: var(--spacing-sm);
}

.empty-kits p {
    margin: 0;
}

.empty-kits .hint {
    font-size: 0.8rem;
    margin-top: var(--spacing-xs);
    opacity: 0.7;
}

/* Tarjeta de Kit Completado */
.completed-kit-card {
    background: var(--bg-input);
    border-radius: var(--radius-md);
    overflow: hidden;
    transition: all var(--transition-fast);
    border: 2px solid transparent;
}

.completed-kit-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.completed-kit-card.basic {
    border-color: var(--text-secondary);
}

.completed-kit-card.specialized {
    border-color: var(--accent-primary);
}

.completed-kit-card.professional {
    border-color: var(--accent-gold);
}

.kit-card-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-tertiary);
}

.kit-card-header .kit-icon {
    width: 36px;
    height: 36px;
    object-fit: contain;
}

.kit-card-header .kit-info {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.kit-card-header .kit-weapon {
    font-weight: 600;
    font-size: 0.95rem;
}

.kit-card-header .kit-type-label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.kit-delete-btn {
    padding: var(--spacing-xs);
    background: transparent;
    border: none;
    font-size: 0.9rem;
    cursor: pointer;
    opacity: 0.5;
    transition: all var(--transition-fast);
}

.kit-delete-btn:hover {
    opacity: 1;
    transform: scale(1.1);
}

.kit-details {
    padding: var(--spacing-sm) var(--spacing-md);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.kit-sheen {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-secondary);
    border-radius: var(--radius-xs);
    font-size: 0.85rem;
}

.kit-sheen .color-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
}

.kit-effect {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--bg-secondary);
    border-radius: var(--radius-xs);
    font-size: 0.85rem;
}

.kit-card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-xs) var(--spacing-md);
    background: var(--bg-main);
    font-size: 0.75rem;
}

.kit-date {
    color: var(--text-muted);
}

.kit-cost {
    color: var(--accent-gold);
    font-weight: 600;
}

/* Modal Agregar Kit */
.add-kit-modal {
    max-width: 400px;
}

.add-kit-modal .modal-hint {
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
}

.add-kit-modal .form-group {
    margin-bottom: var(--spacing-md);
}

.add-kit-modal .form-group label {
    display: block;
    margin-bottom: var(--spacing-xs);
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.add-kit-modal .form-group input {
    width: 100%;
    padding: var(--spacing-sm);
    background: var(--bg-input);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.9rem;
}

.add-kit-modal .form-group input:focus {
    outline: none;
    border-color: var(--accent-primary);
}

.add-kit-modal .modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-lg);
}

/* Imbued checkbox en modal agregar kit */
.imbued-group {
    margin-top: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
}

.imbued-label {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-sm);
    cursor: pointer;
}

.imbued-label input[type="checkbox"] {
    width: 20px;
    height: 20px;
    margin-top: 2px;
    cursor: pointer;
}

.imbued-text {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.imbued-text strong {
    color: var(--text-primary);
}

.imbued-text small {
    color: var(--text-muted);
    font-size: 0.8rem;
}

/* Estado imbuido en tarjetas de kit */
.kit-imbued-status {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-xs) var(--spacing-md);
    font-size: 0.8rem;
    border-top: 1px solid var(--border-color);
}

.kit-imbued-status.is-imbued {
    background: rgba(0, 255, 136, 0.1);
    color: var(--status-ready);
}

.kit-imbued-status.not-imbued {
    background: rgba(255, 193, 7, 0.1);
    color: var(--accent-gold);
}

.kit-imbued-status .imbued-icon {
    font-size: 1rem;
}

.kit-imbued-status .imbued-text {
    flex: 1;
}

.toggle-imbued-btn {
    padding: 4px 8px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-xs);
    cursor: pointer;
    transition: all var(--transition-fast);
    font-size: 0.9rem;
}

.toggle-imbued-btn:hover {
    background: var(--bg-input);
    transform: scale(1.1);
}

.completed-kit-card.imbued {
    border-color: var(--status-ready);
}

.completed-kit-card.not-imbued {
    opacity: 0.8;
}

/* ============================================
   KITS DISPONIBLES EN LA FORJA
   ============================================ */

.available-kits-section {
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border: 1px solid var(--border-color);
}

.available-kits-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
}

.available-kits-header .section-icon {
    font-size: 1.2rem;
}

.available-kits-header h4 {
    margin: 0;
    font-size: 0.9rem;
    color: var(--text-primary);
}

.available-kits-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.no-kits-available {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    color: var(--text-muted);
}

.no-kits-available.warning {
    background: rgba(255, 193, 7, 0.1);
    border: 1px solid rgba(255, 193, 7, 0.3);
}

.no-kits-available.warning .no-kits-icon {
    color: var(--accent-gold);
}

.no-kits-available .no-kits-icon {
    font-size: 1.2rem;
}

.no-kits-available .no-kits-hint {
    flex-basis: 100%;
    font-size: 0.75rem;
    opacity: 0.8;
}

.add-kit-link {
    color: var(--accent-primary);
    text-decoration: none;
    font-weight: 600;
    margin-left: auto;
}

.add-kit-link:hover {
    text-decoration: underline;
}

.available-kit-card {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all var(--transition-fast);
    border: 2px solid transparent;
}

.available-kit-card:hover {
    background: var(--bg-input);
    transform: translateX(4px);
}

.available-kit-card.selected {
    border-color: var(--status-ready);
    background: rgba(0, 255, 136, 0.1);
}

.available-kit-card .kit-mini-icon {
    width: 32px;
    height: 32px;
    object-fit: contain;
}

.available-kit-card .kit-mini-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.available-kit-card .kit-mini-weapon {
    font-weight: 600;
    font-size: 0.85rem;
}

.available-kit-card .kit-mini-status {
    font-size: 0.75rem;
    color: var(--status-ready);
}

.available-kit-card .kit-mini-sheen {
    font-size: 0.75rem;
}

.available-kit-card .kit-mini-cost {
    font-size: 0.8rem;
    color: var(--accent-gold);
    font-weight: 600;
}

.available-kit-card .select-kit-btn {
    padding: 4px 12px;
    background: var(--accent-primary);
    color: var(--bg-primary);
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: 600;
    transition: all var(--transition-fast);
}

.available-kit-card:hover .select-kit-btn {
    transform: scale(1.05);
}

.kit-selection-divider {
    display: flex;
    align-items: center;
    justify-content: center;
    margin: var(--spacing-md) 0;
    color: var(--text-muted);
    font-size: 0.8rem;
}

/* Weapon Cards (similar to kit cards) */
.available-weapon-card {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all var(--transition-fast);
    border: 2px solid transparent;
}

.available-weapon-card:hover {
    background: var(--bg-input);
    transform: translateX(4px);
}

.available-weapon-card.selected {
    border-color: var(--status-ready);
    background: rgba(0, 255, 136, 0.1);
}

.available-weapon-card .weapon-mini-icon {
    width: 32px;
    height: 32px;
    object-fit: contain;
}

.available-weapon-card .weapon-mini-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.available-weapon-card .weapon-mini-name {
    font-weight: 600;
    font-size: 0.85rem;
}

.available-weapon-card .weapon-mini-status {
    font-size: 0.75rem;
    color: var(--status-ready);
}

.available-weapon-card .weapon-mini-sheen {
    font-size: 0.75rem;
}

.available-weapon-card .weapon-mini-cost {
    font-size: 0.8rem;
    color: var(--accent-gold);
    font-weight: 600;
}

.available-weapon-card .select-weapon-btn {
    padding: 4px 12px;
    background: var(--accent-primary);
    color: var(--bg-primary);
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: 600;
    transition: all var(--transition-fast);
}

.available-weapon-card:hover .select-weapon-btn {
    transform: scale(1.05);
}

.available-weapon-card.specialized {
    border-left: 3px solid var(--accent-purple);
}

.kit-selection-divider span {
    padding: 0 var(--spacing-sm);
    background: var(--bg-main);
}

.kit-selection-divider::before,
.kit-selection-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border-color);
}

/* Edit Modal - Available Kits */
.edit-available-kits {
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.edit-available-kits h5 {
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--text-muted);
    font-size: 0.85rem;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.edit-kit-options {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    max-height: 180px;
    overflow-y: auto;
}

.edit-kit-option {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--bg-input);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all var(--transition-fast);
    border: 2px solid transparent;
}

.edit-kit-option:hover {
    background: var(--bg-secondary);
    transform: translateX(4px);
}

.edit-kit-option.selected {
    border-color: var(--status-ready);
    background: rgba(0, 255, 136, 0.1);
}

.edit-kit-option .kit-opt-icon {
    width: 28px;
    height: 28px;
    object-fit: contain;
}

.edit-kit-option .kit-opt-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.edit-kit-option .kit-opt-weapon {
    font-weight: 600;
    font-size: 0.8rem;
}

.edit-kit-option .kit-opt-details {
    font-size: 0.7rem;
    color: var(--text-muted);
}

.edit-kit-option .kit-opt-cost {
    font-size: 0.8rem;
    color: var(--accent-gold);
    font-weight: 600;
}

.edit-divider {
    text-align: center;
    color: var(--text-muted);
    font-size: 0.75rem;
    margin: var(--spacing-sm) 0;
    position: relative;
}

.edit-divider::before,
.edit-divider::after {
    content: '';
    position: absolute;
    top: 50%;
    width: 35%;
    height: 1px;
    background: var(--border-color);
}

.edit-divider::before {
    left: 0;
}

.edit-divider::after {
    right: 0;
}

.no-kits-available {
    text-align: center;
    padding: var(--spacing-md);
    color: var(--text-muted);
    font-size: 0.85rem;
}

.no-kits-available a {
    color: var(--accent-primary);
    text-decoration: none;
    font-weight: 600;
}

.no-kits-available a:hover {
    text-decoration: underline;
}

/* Modal de Costo del Kit */
.kit-cost-modal {
    text-align: left;
}

.kit-cost-modal h2 {
    margin: 0 0 var(--spacing-lg) 0;
    font-size: 1.5rem;
    color: var(--text-primary);
}

.kit-cost-summary {
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.kit-cost-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
}

.kit-cost-header h3 {
    margin: 0;
    font-size: 1.1rem;
}

.kit-cost-details {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.kit-cost-detail {
    display: flex;
    justify-content: space-between;
    font-size: 0.9rem;
}

.kit-cost-detail .label {
    color: var(--text-muted);
}

.kit-cost-detail .value {
    font-weight: 600;
}

.kit-cost-form {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.kit-cost-form-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.kit-cost-form-group label {
    font-weight: 600;
    font-size: 0.95rem;
}

.kit-cost-form-group .form-hint {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin: 0 0 var(--spacing-xs) 0;
}

.kit-cost-form-group input {
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-input);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 1.1rem;
    text-align: center;
}

.kit-cost-form-group input:focus {
    outline: none;
    border-color: var(--accent-primary);
}

.kit-cost-local {
    text-align: center;
    font-size: 0.9rem;
    color: var(--text-muted);
    margin-top: var(--spacing-xs);
}

.kit-cost-checkbox {
    background: var(--bg-input);
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
}

.kit-cost-checkbox label {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 600;
    cursor: pointer;
}

.kit-cost-checkbox input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: var(--accent-primary);
}

.kit-cost-checkbox .form-hint {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin: var(--spacing-xs) 0 0 26px;
}

.kit-cost-actions {
    display: flex;
    gap: var(--spacing-sm);
    justify-content: flex-end;
}

.kit-cost-actions .btn-secondary {
    padding: var(--spacing-sm) var(--spacing-lg);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    color: var(--text-primary);
    cursor: pointer;
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.kit-cost-actions .btn-secondary:hover {
    background: var(--bg-input);
}

.btn-confirm-kit {
    padding: var(--spacing-sm) var(--spacing-lg);
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
    border: none;
    border-radius: var(--radius-md);
    color: var(--bg-primary);
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.btn-confirm-kit:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
}

/* Mejoras en kit-card-footer para mostrar costo */
.kit-card-footer .kit-cost {
    color: var(--accent-gold);
    font-weight: 600;
    font-size: 0.85rem;
}

/* ============================================
   MODAL DINÁMICO (Ventas, Costos, etc.)
   ============================================ */
.dynamic-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(5px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: all var(--transition-normal);
}

.dynamic-modal.active {
    opacity: 1;
    visibility: visible;
}

.dynamic-modal-content {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    padding: var(--spacing-xl);
    max-width: 550px;
    width: 95%;
    max-height: 90vh;
    overflow-y: auto;
    border: 1px solid var(--border-color);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    transform: translateY(20px) scale(0.95);
    transition: transform var(--transition-normal);
}

.dynamic-modal.active .dynamic-modal-content {
    transform: translateY(0) scale(1);
}

/* Responsive */
@media (max-width: 500px) {
    .spec-kit-fields {
        grid-template-columns: 1fr;
    }
    
    .kits-list {
        grid-template-columns: 1fr;
    }
    
    .kits-category-header {
        flex-wrap: wrap;
    }
    
    .btn-add-kit {
        width: 100%;
        margin-top: var(--spacing-sm);
    }
    
    .available-kit-card {
        flex-wrap: wrap;
    }
    
    .available-kit-card .select-kit-btn {
        width: 100%;
        text-align: center;
        margin-top: var(--spacing-xs);
    }
}

/* ============================================
   CURRENCY GRID EN MOCHILA
   ============================================ */

.currency-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--spacing-md);
}

.stock-item.currency-item {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    transition: all var(--transition-fast);
}

.stock-item.currency-item:hover {
    border-color: var(--accent-primary);
    transform: translateY(-2px);
}

/* Header - Nombre del item */
.stock-item.currency-item .stock-header {
    width: 100%;
    text-align: center;
    padding-bottom: var(--spacing-xs);
    border-bottom: 1px solid var(--border-color);
}

.stock-item.currency-item .stock-header .stock-name {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
}

/* Body - Imagen + Controles */
.stock-item.currency-item .stock-body {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    width: 100%;
}

.stock-item.currency-item .stock-icon {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 80px;
}

.stock-item.currency-item .stock-icon img {
    width: 64px;
    height: 64px;
    object-fit: contain;
}

.stock-item.currency-item .stock-controls {
    flex: 1;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
}

/* Footer - Hint */
.stock-item.currency-item .stock-footer {
    width: 100%;
    text-align: center;
    padding-top: var(--spacing-xs);
    border-top: 1px solid var(--border-color);
}

.stock-item .stock-hint {
    font-size: 0.8rem;
    color: var(--text-muted);
    display: block;
}

.stock-controls .stock-input {
    width: 70px;
    padding: var(--spacing-sm);
    background: var(--bg-input);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    text-align: center;
    font-size: 1.1rem;
    font-weight: 600;
}

.stock-controls .stock-input:focus {
    outline: none;
    border-color: var(--accent-primary);
}

/* Botones +/- en currency */
.stock-item.currency-item .stock-btn {
    width: 36px;
    height: 36px;
    font-size: 1.2rem;
}

/* ============================================
   ROBOT PARTS - Tarjetas en Mochila
   ============================================ */

.stock-item.parts-item {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    transition: all var(--transition-fast);
}

.stock-item.parts-item:hover {
    border-color: var(--accent-primary);
    transform: translateY(-2px);
}

/* Header - Nombre */
.stock-item.parts-item .stock-header {
    width: 100%;
    text-align: center;
    padding-bottom: var(--spacing-xs);
    border-bottom: 1px solid var(--border-color);
}

.stock-item.parts-item .stock-header .stock-name {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
}

/* Body - Imagen + Controles */
.stock-item.parts-item .stock-body {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    width: 100%;
}

.stock-item.parts-item .stock-icon {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 70px;
}

.stock-item.parts-item .stock-icon img {
    width: 56px;
    height: 56px;
    object-fit: contain;
}

.stock-item.parts-item .stock-controls {
    flex: 1;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
}

/* Footer - Categoría + Precio */
.stock-item.parts-item .stock-footer {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: var(--spacing-xs);
    border-top: 1px solid var(--border-color);
}

.stock-item.parts-item .stock-category {
    font-size: 0.75rem;
    font-weight: 600;
}

.stock-item.parts-item .part-price {
    font-size: 0.75rem;
    color: var(--accent-gold);
}

.currency-summary {
    grid-column: 1 / -1;
    background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-secondary));
    border: 2px solid var(--accent-gold);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-md);
}

.currency-summary .summary-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.currency-summary .summary-icon {
    font-size: 1.5rem;
}

.currency-summary .summary-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-secondary);
}

.currency-summary .summary-values {
    display: flex;
    gap: var(--spacing-xl);
}

.currency-summary .summary-value {
    text-align: center;
}

.currency-summary .value-amount {
    display: block;
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--accent-gold);
}

.currency-summary .value-label {
    font-size: 0.85rem;
    color: var(--text-muted);
}

/* ============================================
   MODAL AÑADIR KIT - ESTILOS MEJORADOS
   ============================================ */

.add-kit-modal.specialized,
.add-kit-modal.professional {
    max-width: 500px;
}

.add-kit-modal .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-md);
}

.add-kit-modal .form-group.half {
    width: 100%;
}

.add-kit-modal select {
    width: 100%;
    padding: var(--spacing-sm);
    background: var(--bg-input);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 0.9rem;
    cursor: pointer;
}

.add-kit-modal select:focus {
    outline: none;
    border-color: var(--accent-primary);
}

/* Dual cost input */
.cost-input-group {
    margin-top: var(--spacing-md);
}

.cost-dual-input {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-xs);
}

.cost-field {
    flex: 1;
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    background: var(--bg-input);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    padding: var(--spacing-xs) var(--spacing-sm);
}

.cost-field input {
    flex: 1;
    background: transparent !important;
    border: none !important;
    padding: var(--spacing-xs) !important;
    color: var(--text-primary);
    font-size: 1rem;
    font-weight: 600;
    text-align: right;
    width: 60px;
}

.cost-field input:focus {
    outline: none;
}

.cost-field .cost-label {
    font-size: 0.85rem;
    color: var(--text-muted);
    min-width: 35px;
}

.cost-separator {
    color: var(--text-muted);
    font-size: 0.9rem;
}

.cost-preview {
    display: block;
    margin-top: var(--spacing-xs);
    font-size: 0.8rem;
    color: var(--accent-primary);
    text-align: center;
}

/* Sheen Preview */
.sheen-preview {
    margin-top: var(--spacing-xs);
}

.sheen-preview-content {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--bg-secondary);
    border-radius: var(--radius-sm);
    border-left: 3px solid;
}

.sheen-preview-content .color-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
}

.sheen-preview-content .sheen-name {
    flex: 1;
    font-weight: 500;
}

/* Killstreaker Preview */
.killstreaker-preview {
    margin-top: var(--spacing-xs);
}

.killstreaker-preview-content {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: var(--bg-secondary);
    border-radius: var(--radius-sm);
}

.killstreaker-preview-content .ks-preview-img {
    width: 24px;
    height: 24px;
    object-fit: contain;
}

.killstreaker-preview-content .ks-name {
    flex: 1;
    font-weight: 500;
    color: var(--text-primary);
}

/* Combo Preview en modal Professional */
.combo-preview {
    margin: var(--spacing-md) 0;
    padding: var(--spacing-md);
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
    text-align: center;
}

.combo-preview .combo-hint {
    color: var(--text-muted);
    font-size: 0.85rem;
}

.combo-valuation {
    display: flex;
    align-items: center;
    gap: var(--spacing-lg);
    justify-content: center;
}

.combo-tier-display {
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-md);
    border: 2px solid;
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.combo-tier-display .combo-tier-icon {
    font-size: 1.2rem;
}

.combo-tier-display .combo-tier-label {
    font-weight: 700;
    font-size: 0.9rem;
}

.combo-stats {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.combo-stat {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-size: 0.85rem;
}

.combo-stat .stat-label {
    color: var(--text-muted);
}

.combo-stat .stat-value {
    font-weight: 600;
}

.combo-stat .stat-value.positive {
    color: var(--status-ready);
}

.combo-stat .stat-value.negative {
    color: var(--status-error);
}

/* Tier badges en previews */
.tier-badge {
    font-size: 0.75rem;
    padding: 2px 6px;
    border-radius: var(--radius-xs);
    font-weight: 600;
}

.tier-badge.tier-S { background: rgba(255, 215, 0, 0.2); color: #ffd700; }
.tier-badge.tier-A { background: rgba(255, 107, 107, 0.2); color: #ff6b6b; }
.tier-badge.tier-B { background: rgba(78, 205, 196, 0.2); color: #4ecdc4; }
.tier-badge.tier-C { background: rgba(149, 165, 166, 0.2); color: #95a5a6; }
.tier-badge.tier-D { background: rgba(108, 92, 231, 0.2); color: #6c5ce7; }

/* Responsive para modales de kit */
@media (max-width: 500px) {
    .add-kit-modal .form-row {
        grid-template-columns: 1fr;
    }
    
    .cost-dual-input {
        flex-direction: column;
    }
    
    .cost-separator {
        display: none;
    }
    
    .combo-valuation {
        flex-direction: column;
        gap: var(--spacing-sm);
    }
}

/* ========================================
   ROI Y ANÁLISIS DE RENTABILIDAD
   ======================================== */

.roi-section {
    margin: var(--spacing-md) 0;
    padding: var(--spacing-md);
    background: var(--bg-input);
    border-radius: var(--radius-sm);
}

.roi-section h4 {
    margin: 0 0 var(--spacing-sm);
    font-size: 0.9rem;
    color: var(--text-main);
}

.roi-card {
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    padding: var(--spacing-md);
    border-left: 4px solid var(--accent-green);
}

.roi-card.positive { border-color: #4CAF50; }
.roi-card.neutral { border-color: #FF9800; }
.roi-card.negative { border-color: #f44336; }

.roi-main {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-sm);
}

.roi-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.roi-value {
    font-size: 1.8rem;
    font-weight: bold;
    color: var(--accent-green);
}

.roi-card.positive .roi-value { color: #4CAF50; }
.roi-card.neutral .roi-value { color: #FF9800; }
.roi-card.negative .roi-value { color: #f44336; }

.roi-breakdown {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    padding-top: var(--spacing-sm);
    border-top: 1px solid rgba(255,255,255,0.1);
}

.roi-item {
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.roi-item.highlight {
    padding-top: var(--spacing-xs);
    border-top: 1px dashed rgba(255,255,255,0.1);
    font-weight: 600;
}

.roi-item .cost { color: #f44336; }
.roi-item .revenue { color: var(--text-main); }
.roi-item .profit { color: #4CAF50; }
.roi-item .loss { color: #f44336; }

.breakeven-note {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-sm);
    padding: var(--spacing-sm);
    background: rgba(255,152,0,0.1);
    border-radius: var(--radius-xs);
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.breakeven-note strong {
    color: #FF9800;
}

/* Free Kit Badge */
.roi-section.free-kit {
    background: rgba(76, 175, 80, 0.1);
    border-left: 4px solid #4CAF50;
}

.free-kit-badge {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    background: rgba(76, 175, 80, 0.2);
    border-radius: var(--radius-sm);
    font-weight: 600;
    color: #4CAF50;
}

.free-kit-badge .badge-icon {
    font-size: 1.2rem;
}

.free-kit-note {
    margin-top: var(--spacing-sm);
    font-size: 0.8rem;
    color: var(--text-secondary);
}

/* Currency Tabs */
.currency-tabs {
    display: flex;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-sm);
    padding: var(--spacing-xs);
    background: var(--bg-input);
    border-radius: var(--radius-sm);
}

.currency-tab {
    flex: 1;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: transparent;
    border: none;
    border-radius: var(--radius-xs);
    color: var(--text-secondary);
    font-size: 0.75rem;
    cursor: pointer;
    transition: var(--transition-fast);
}

.currency-tab:hover {
    background: rgba(255,255,255,0.05);
    color: var(--text-main);
}

.currency-tab.active {
    background: var(--accent-orange);
    color: #fff;
}

/* Strategy Card Updates */
.strategy-card .strategy-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-xs);
}

.strategy-card .strategy-prices {
    font-size: 1rem;
    font-weight: bold;
    color: var(--text-main);
    margin: var(--spacing-xs) 0;
}

.strategy-card .strategy-prices small {
    font-size: 0.7rem;
    font-weight: normal;
    color: var(--text-muted);
}

.strategy-card .strategy-meta {
    display: flex;
    justify-content: space-between;
    font-size: 0.7rem;
    color: var(--text-secondary);
    margin-top: var(--spacing-xs);
}

.strategy-profit.positive { color: #4CAF50; }
.strategy-profit.negative { color: #f44336; }

/* ========================================
   PANEL DE FAVORITOS
   ======================================== */

.favorites-container {
    padding: var(--spacing-md);
}

.favorites-tip {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    background: rgba(255, 152, 0, 0.1);
    border-left: 3px solid #FF9800;
    border-radius: var(--radius-sm);
    margin-bottom: var(--spacing-md);
}

.favorites-tip .tip-icon {
    font-size: 1.2rem;
}

.favorites-tip p {
    margin: 0;
    font-size: 0.85rem;
    color: var(--text-secondary);
    line-height: 1.4;
}

.add-favorite-form {
    background: var(--bg-input);
    padding: var(--spacing-md);
    border-radius: var(--radius-sm);
    margin-bottom: var(--spacing-md);
}

.add-favorite-form h4 {
    margin: 0 0 var(--spacing-md);
    font-size: 0.9rem;
    color: var(--text-main);
}

.fav-form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.fav-field label {
    display: block;
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-xs);
}

.fav-field select {
    width: 100%;
    padding: var(--spacing-sm);
    background: var(--bg-card);
    border: 1px solid var(--border-inactive);
    border-radius: var(--radius-xs);
    color: var(--text-main);
    font-size: 0.85rem;
}

.fav-field select:focus {
    border-color: var(--accent-orange);
    outline: none;
}

/* Cost Preview */
.favorite-cost-preview {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    margin-bottom: var(--spacing-md);
}

.cost-label {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.cost-values {
    display: flex;
    gap: var(--spacing-md);
}

.cost-values span {
    font-size: 0.85rem;
    font-weight: 600;
}

.cost-keys { color: var(--accent-orange); }
.cost-usd { color: #4CAF50; }
.cost-mxn { color: #2196F3; }

.btn-add-favorite {
    width: 100%;
    padding: var(--spacing-sm) var(--spacing-md);
    background: linear-gradient(135deg, #e91e63, #c2185b);
    border: none;
    border-radius: var(--radius-sm);
    color: #fff;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    transition: var(--transition-fast);
}

.btn-add-favorite:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

/* Favorites List */
.favorites-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.empty-favorites {
    text-align: center;
    padding: var(--spacing-xl);
    color: var(--text-muted);
}

.empty-favorites .empty-icon {
    font-size: 2.5rem;
    display: block;
    margin-bottom: var(--spacing-sm);
}

.empty-favorites p {
    margin: var(--spacing-xs) 0;
}

.empty-favorites .empty-hint {
    font-size: 0.8rem;
}

.favorite-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    border-left: 4px solid #e91e63;
    transition: var(--transition-fast);
}

.favorite-item:hover {
    background: var(--bg-card-hover);
}

.fav-visual {
    position: relative;
    flex-shrink: 0;
}

.fav-class-icon {
    width: 40px;
    height: 40px;
    object-fit: contain;
}

.fav-sheen-dot {
    position: absolute;
    bottom: -2px;
    right: -2px;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    border: 2px solid var(--bg-card);
}

/* Team Shine - Dot dividido RED/BLU */
.fav-sheen-dot.team-shine {
    background: transparent;
    overflow: hidden;
    display: flex;
}

.fav-sheen-dot.team-shine .dot-red,
.fav-sheen-dot.team-shine .dot-blu {
    width: 50%;
    height: 100%;
}

/* Team Shine - Imágenes oficiales RED/BLU */
.fav-sheen-images.team-shine {
    display: flex;
    gap: 2px;
    align-items: center;
}

.fav-sheen-images.team-shine .team-shine-img {
    width: 24px;
    height: 24px;
    object-fit: contain;
    border-radius: 4px;
    background: rgba(0, 0, 0, 0.3);
    padding: 2px;
}

.fav-sheen-images.team-shine .team-shine-img.red {
    border: 1px solid #C8140F;
}

.fav-sheen-images.team-shine .team-shine-img.blu {
    border: 1px solid #2862C8;
}

/* Sheen Color Dot en Análisis - Team Shine */
.sheen-color-dot.team-shine {
    display: flex;
    overflow: hidden;
}

.sheen-color-dot.team-shine .dot-red,
.sheen-color-dot.team-shine .dot-blu {
    width: 50%;
    height: 100%;
}

.fav-info {
    flex: 1;
}

.fav-weapon {
    font-weight: 600;
    color: var(--text-main);
    font-size: 0.9rem;
}

.fav-combo {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-top: var(--spacing-xs);
}

.fav-type {
    padding: 2px 6px;
    border-radius: var(--radius-xs);
    font-size: 0.65rem;
}

.fav-type.specialized { background: rgba(255, 193, 7, 0.2); }
.fav-type.professional { background: rgba(156, 39, 176, 0.2); }

.fav-plus {
    color: var(--text-muted);
}

.btn-remove-fav {
    padding: var(--spacing-xs);
    background: transparent;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    opacity: 0.5;
    transition: var(--transition-fast);
}

.btn-remove-fav:hover {
    opacity: 1;
    color: #f44336;
}

/* ============================================
   TARJETAS DE FAVORITOS COMPACTAS
   ============================================ */

#favoritesList {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: var(--spacing-sm);
    max-height: 400px;
    overflow-y: auto;
    padding: var(--spacing-xs);
}

.favorite-card {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: var(--spacing-sm);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    border: 1px solid var(--border-color);
    transition: var(--transition-fast);
}

.favorite-card:hover {
    border-color: var(--accent-primary);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.fav-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.fav-icons {
    display: flex;
    align-items: center;
    gap: 4px;
}

.fav-class-icon {
    width: 28px;
    height: 28px;
    object-fit: contain;
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.3));
}

.fav-ks-icon {
    width: 24px;
    height: 24px;
    object-fit: contain;
    border-radius: 4px;
    background: rgba(0, 0, 0, 0.3);
}

.fav-tier-badge {
    font-size: 0.7rem;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: var(--radius-xs);
}

.fav-card-body {
    flex: 1;
}

.fav-weapon-name {
    font-weight: 600;
    font-size: 0.85rem;
    color: var(--text-main);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.fav-combo-row {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-top: 4px;
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.fav-sheen-dot {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    flex-shrink: 0;
    border: 1px solid rgba(255,255,255,0.2);
}

/* Team Shine - Círculo dividido */
.fav-sheen-dot.team-shine-dot {
    display: flex;
    overflow: hidden;
    background: transparent;
}

.fav-sheen-dot.team-shine-dot .dot-half {
    width: 50%;
    height: 100%;
}

.fav-sheen-name {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.fav-ks-name {
    color: var(--text-muted);
    font-size: 0.7rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.fav-card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: var(--spacing-xs);
    border-top: 1px solid var(--border-color);
    margin-top: auto;
}

.fav-prices {
    display: flex;
    gap: 6px;
    font-size: 0.65rem;
}

.fav-price {
    padding: 2px 4px;
    border-radius: 3px;
    background: rgba(255,255,255,0.05);
}

.fav-price.keys { color: #FFD700; }
.fav-price.usd { color: #4CAF50; }
.fav-price.mxn { color: #2196F3; }

.fav-actions {
    display: flex;
    align-items: center;
    gap: 4px;
}

.fav-kit-type {
    font-size: 0.8rem;
}

.btn-remove-fav-small {
    width: 20px;
    height: 20px;
    padding: 0;
    background: transparent;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 0.75rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0.5;
    transition: var(--transition-fast);
}

.btn-remove-fav-small:hover {
    opacity: 1;
    background: rgba(244, 67, 54, 0.2);
    color: #f44336;
}

/* Empty state en grid */
.empty-favorites {
    grid-column: 1 / -1;
    text-align: center;
    padding: var(--spacing-xl);
}

/* ============================================
   TARJETAS CON DEGRADADO Y EFECTOS
   ============================================ */

.favorite-card {
    position: relative;
    background: var(--bg-card);
    border-radius: var(--radius-md);
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

/* Borde degradado */
.favorite-card::before {
    content: '';
    position: absolute;
    inset: 0;
    padding: 2px;
    border-radius: var(--radius-md);
    background: linear-gradient(135deg, var(--kit-color) 0%, transparent 50%, var(--tier-color) 100%);
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    opacity: var(--glow-opacity, 0.5);
    transition: opacity 0.3s ease;
}

/* Glow interno */
.fav-card-glow {
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at top left, var(--kit-color) 0%, transparent 50%),
                radial-gradient(ellipse at bottom right, var(--tier-color) 0%, transparent 50%);
    opacity: calc(var(--glow-opacity, 0.5) * 0.15);
    pointer-events: none;
    transition: opacity 0.3s ease;
}

.fav-card-content {
    position: relative;
    padding: var(--spacing-sm);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    z-index: 1;
}

/* Hover effects */
.favorite-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
}

.favorite-card:hover::before {
    opacity: 1;
}

.favorite-card:hover .fav-card-glow {
    opacity: calc(var(--glow-opacity, 0.5) * 0.3);
}

/* Efecto de partículas/estrellas en hover */
.favorite-card::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: 
        radial-gradient(2px 2px at 20% 30%, var(--tier-color) 50%, transparent 50%),
        radial-gradient(2px 2px at 40% 70%, var(--kit-color) 50%, transparent 50%),
        radial-gradient(1.5px 1.5px at 60% 20%, var(--tier-color) 50%, transparent 50%),
        radial-gradient(1.5px 1.5px at 80% 60%, var(--kit-color) 50%, transparent 50%),
        radial-gradient(1px 1px at 30% 80%, var(--tier-color) 50%, transparent 50%),
        radial-gradient(1px 1px at 70% 40%, var(--kit-color) 50%, transparent 50%);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    animation: sparkle 2s ease-in-out infinite;
}

.favorite-card:hover::after {
    opacity: calc(var(--glow-opacity, 0.5) * 0.8);
}

@keyframes sparkle {
    0%, 100% { transform: scale(1); filter: brightness(1); }
    50% { transform: scale(1.02); filter: brightness(1.2); }
}

/* Tiers específicos */
.favorite-card[data-tier="S"]:hover {
    box-shadow: 0 8px 30px rgba(255, 215, 0, 0.4);
}

.favorite-card[data-tier="A"]:hover {
    box-shadow: 0 8px 28px rgba(255, 107, 107, 0.35);
}

.favorite-card[data-tier="B"]:hover {
    box-shadow: 0 8px 25px rgba(244, 208, 63, 0.3);
}

/* ============================================
   MODAL DE FAVORITO DETALLADO
   ============================================ */

.favorite-modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(8px);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.favorite-modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.favorite-modal {
    position: relative;
    width: 90%;
    max-width: 700px;
    max-height: 90vh;
    background: var(--bg-secondary);
    border-radius: var(--radius-xl);
    overflow: hidden;
    transform: scale(0.9) translateY(20px);
    transition: transform 0.3s ease;
}

.favorite-modal-overlay.active .favorite-modal {
    transform: scale(1) translateY(0);
}

/* Glow del modal */
.favorite-modal::before {
    content: '';
    position: absolute;
    inset: 0;
    padding: 3px;
    border-radius: var(--radius-xl);
    background: linear-gradient(135deg, var(--kit-color) 0%, var(--tier-color) 100%);
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
}

.modal-glow {
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at top, var(--kit-color) 0%, transparent 60%),
                radial-gradient(ellipse at bottom, var(--tier-color) 0%, transparent 60%);
    opacity: 0.1;
    pointer-events: none;
}

.modal-close {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 36px;
    height: 36px;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    border-radius: 50%;
    color: var(--text-main);
    font-size: 1.2rem;
    cursor: pointer;
    z-index: 10;
    transition: all 0.2s ease;
}

.modal-close:hover {
    background: rgba(244, 67, 54, 0.3);
    color: #f44336;
}

/* Header del modal */
.modal-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-lg);
    padding: var(--spacing-lg);
    background: linear-gradient(180deg, rgba(0,0,0,0.3) 0%, transparent 100%);
    position: relative;
    z-index: 1;
}

.modal-class-profile {
    position: relative;
    width: 80px;
    height: 80px;
    flex-shrink: 0;
}

.modal-profile-img {
    width: 100%;
    height: 100%;
    border-radius: var(--radius-md);
    object-fit: cover;
    border: 2px solid var(--kit-color);
}

.modal-class-icon-overlay {
    position: absolute;
    bottom: -5px;
    right: -5px;
    width: 32px;
    height: 32px;
    background: var(--bg-card);
    border-radius: 50%;
    padding: 3px;
    border: 2px solid var(--tier-color);
}

.modal-title-section {
    flex: 1;
}

.modal-weapon-name {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-main);
    margin: 0 0 var(--spacing-xs);
}

.modal-class-info {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

.modal-class-name {
    font-weight: 600;
}

.modal-role-badge {
    font-size: 0.75rem;
    padding: 3px 8px;
    border-radius: var(--radius-sm);
}

.modal-tier-display {
    text-align: center;
}

.modal-tier-badge {
    display: inline-block;
    font-size: 1.5rem;
    font-weight: 700;
    padding: 8px 16px;
    border-radius: var(--radius-md);
    margin-bottom: 4px;
}

.modal-tier-label {
    display: block;
    font-size: 0.7rem;
    color: var(--text-secondary);
}

/* Body del modal */
.modal-body {
    padding: var(--spacing-lg);
    overflow-y: auto;
    max-height: calc(90vh - 250px);
    position: relative;
    z-index: 1;
}

.modal-section {
    margin-bottom: var(--spacing-lg);
}

.modal-section h3 {
    font-size: 1rem;
    color: var(--text-main);
    margin-bottom: var(--spacing-sm);
    padding-bottom: var(--spacing-xs);
    border-bottom: 1px solid var(--border-color);
}

/* Combo display */
.modal-combo-display {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: rgba(0, 0, 0, 0.2);
    border-radius: var(--radius-md);
}

.modal-combo-item {
    text-align: center;
}

.combo-item-visual {
    width: 64px;
    height: 64px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: var(--spacing-xs);
}

.combo-item-visual img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

.sheen-color-preview {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    border: 3px solid rgba(255, 255, 255, 0.3);
}

.modal-sheen-images.team-shine {
    display: flex;
    gap: 4px;
}

.modal-sheen-images.team-shine img {
    width: 30px;
    height: 30px;
}

.modal-sheen-img {
    width: 64px;
    height: 64px;
    object-fit: contain;
}

.combo-item-label {
    display: block;
    font-size: 0.7rem;
    color: var(--text-muted);
}

.combo-item-name {
    font-weight: 600;
    font-size: 0.9rem;
}

.modal-combo-separator {
    font-size: 2rem;
    color: var(--text-muted);
}

.modal-kit-type {
    text-align: center;
    margin-top: var(--spacing-sm);
}

.kit-badge {
    display: inline-block;
    padding: 6px 16px;
    border-radius: var(--radius-md);
    font-weight: 600;
}

.kit-badge.specialized {
    background: linear-gradient(135deg, rgba(255, 193, 7, 0.2), rgba(255, 193, 7, 0.1));
    color: #FFC107;
    border: 1px solid rgba(255, 193, 7, 0.3);
}

.kit-badge.professional {
    background: linear-gradient(135deg, rgba(156, 39, 176, 0.2), rgba(156, 39, 176, 0.1));
    color: #9C27B0;
    border: 1px solid rgba(156, 39, 176, 0.3);
}

/* Precios grid */
.modal-prices-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-sm);
}

.modal-price-card {
    text-align: center;
    padding: var(--spacing-md);
    background: rgba(0, 0, 0, 0.2);
    border-radius: var(--radius-md);
}

.modal-price-card .price-icon {
    display: block;
    font-size: 1.5rem;
    margin-bottom: 4px;
}

.modal-price-card .price-value {
    display: block;
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--text-main);
}

.modal-price-card .price-label {
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* Tier analysis */
.tier-analysis {
    background: rgba(0, 0, 0, 0.2);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
}

.tier-description {
    margin-bottom: var(--spacing-sm);
    color: var(--text-secondary);
}

.tier-details {
    display: grid;
    gap: var(--spacing-xs);
}

.tier-detail {
    display: flex;
    justify-content: space-between;
    padding: var(--spacing-xs) 0;
    border-bottom: 1px solid var(--border-color);
}

.tier-detail.total {
    border-bottom: none;
    font-weight: 600;
}

/* Compatibility section */
.compatibility-analysis {
    display: grid;
    gap: var(--spacing-sm);
}

.compat-item {
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
    background: rgba(0, 0, 0, 0.2);
}

.compat-item.excellent {
    border-left: 3px solid #4CAF50;
}

.compat-item.good {
    border-left: 3px solid #FFC107;
}

.compat-item.neutral {
    border-left: 3px solid #9E9E9E;
}

.compat-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-xs);
}

.compat-ks-img {
    width: 32px;
    height: 32px;
}

.compat-ks-name {
    font-weight: 600;
}

.compat-score {
    margin-bottom: var(--spacing-xs);
}

.compat-text {
    color: var(--text-secondary);
    font-size: 0.9rem;
    line-height: 1.4;
    margin: 0;
}

.compat-tip {
    padding: var(--spacing-sm);
    background: rgba(33, 150, 243, 0.1);
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.compat-tip strong {
    color: #2196F3;
}

/* Footer del modal */
.modal-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-md) var(--spacing-lg);
    background: rgba(0, 0, 0, 0.2);
    position: relative;
    z-index: 1;
}

.modal-created {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.btn-modal-close {
    padding: 8px 24px;
    background: var(--accent-primary);
    border: none;
    border-radius: var(--radius-md);
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-modal-close:hover {
    filter: brightness(1.1);
    transform: translateY(-1px);
}

/* Placeholder hint */
.placeholder-hint {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-top: var(--spacing-xs);
}